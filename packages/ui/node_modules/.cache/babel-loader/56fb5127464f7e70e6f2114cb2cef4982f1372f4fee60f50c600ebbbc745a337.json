{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.retryAfter = exports.handleRetriesFor = void 0;\nfunction handleRetriesFor(code) {\n  return new Promise(function run(ok, fail) {\n    try {\n      ok(code());\n    } catch (err) {\n      if (err.retry && err.retry instanceof Promise) {\n        err.retry.then(function () {\n          return run(ok, fail);\n        }).catch(function (perr) {\n          return fail(perr);\n        });\n      } else if (err.restart && err.restart.isCallback) {\n        MathJax.Callback.After(function () {\n          return run(ok, fail);\n        }, err.restart);\n      } else {\n        fail(err);\n      }\n    }\n  });\n}\nexports.handleRetriesFor = handleRetriesFor;\nfunction retryAfter(promise) {\n  var err = new Error('MathJax retry');\n  err.retry = promise;\n  throw err;\n}\nexports.retryAfter = retryAfter;","map":{"version":3,"names":["handleRetriesFor","code","Promise","run","ok","fail","err","retry","then","catch","perr","restart","isCallback","MathJax","Callback","After","exports","retryAfter","promise","Error"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/node_modules/mathjax-full/ts/util/Retries.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2017-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements methods for handling asynchronous actions\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\n\n/*****************************************************************/\n/*\n *  The legacy MathJax object  (FIXME: remove this after all v2 code is gone)\n */\n\ndeclare var MathJax: {Callback: {After: Function}};\n\n\n/*****************************************************************/\n/**\n *  Allow us to pass a promise as part of an Error object\n */\n\nexport interface RetryError extends Error {\n  retry: Promise<any>;\n}\n\n/*****************************************************************/\n/**\n * A wrapper for actions that may be asynchronous.  This will\n *   rerun the action after the asychronous action completes.\n *   Usually, this is for dynamic loading of files.  Legacy\n *   MathJax does that a lot, so we still need it for now, but\n *   may be able to go without it in the future.\n *\n *   Example:\n *\n *     HandleRetriesFor(() => {\n *\n *         html.findMath()\n *             .compile()\n *             .getMetrics()\n *             .typeset()\n *             .updateDocument();\n *\n *     }).catch(err => {\n *       console.log(err.message);\n *     });\n *\n * @param {Function} code  The code to run that might cause retries\n * @return {Promise}       A promise that is satisfied when the code\n *                         runs completely, and fails if the code\n *                         generates an error (that is not a retry).\n */\n\nexport function handleRetriesFor(code: Function): Promise<any> {\n  return new Promise(function run(ok: Function, fail: Function) {\n    try {\n      ok(code());\n    } catch (err) {\n      if (err.retry && err.retry instanceof Promise) {\n        err.retry.then(() => run(ok, fail))\n                 .catch((perr: Error) => fail(perr));\n      } else if (err.restart && err.restart.isCallback) {\n        // FIXME: Remove this branch when all legacy code is gone\n        MathJax.Callback.After(() => run(ok, fail), err.restart);\n      } else {\n        fail(err);\n      }\n    }\n  });\n}\n\n/*****************************************************************/\n/**\n * Tells HandleRetriesFor() to wait for this promise to be fulfilled\n *   before rerunning the code.  Causes an error to be thrown, so\n *   calling this terminates the code at that point.\n *\n * @param {Promise} promise  The promise that must be satisfied before\n *                            actions will continue\n */\n\nexport function retryAfter(promise: Promise<any>) {\n  let err = new Error('MathJax retry') as RetryError;\n  err.retry = promise;\n  throw err;\n}\n"],"mappings":";;;;;;AAqEA,SAAgBA,gBAAgBA,CAACC,IAAc;EAC7C,OAAO,IAAIC,OAAO,CAAC,SAASC,GAAGA,CAACC,EAAY,EAAEC,IAAc;IAC1D,IAAI;MACFD,EAAE,CAACH,IAAI,EAAE,CAAC;KACX,CAAC,OAAOK,GAAG,EAAE;MACZ,IAAIA,GAAG,CAACC,KAAK,IAAID,GAAG,CAACC,KAAK,YAAYL,OAAO,EAAE;QAC7CI,GAAG,CAACC,KAAK,CAACC,IAAI,CAAC;UAAM,OAAAL,GAAG,CAACC,EAAE,EAAEC,IAAI,CAAC;QAAb,CAAa,CAAC,CACzBI,KAAK,CAAC,UAACC,IAAW;UAAK,OAAAL,IAAI,CAACK,IAAI,CAAC;QAAV,CAAU,CAAC;OAC7C,MAAM,IAAIJ,GAAG,CAACK,OAAO,IAAIL,GAAG,CAACK,OAAO,CAACC,UAAU,EAAE;QAEhDC,OAAO,CAACC,QAAQ,CAACC,KAAK,CAAC;UAAM,OAAAZ,GAAG,CAACC,EAAE,EAAEC,IAAI,CAAC;QAAb,CAAa,EAAEC,GAAG,CAACK,OAAO,CAAC;OACzD,MAAM;QACLN,IAAI,CAACC,GAAG,CAAC;;;EAGf,CAAC,CAAC;AACJ;AAhBAU,OAAA,CAAAhB,gBAAA,GAAAA,gBAAA;AA4BA,SAAgBiB,UAAUA,CAACC,OAAqB;EAC9C,IAAIZ,GAAG,GAAG,IAAIa,KAAK,CAAC,eAAe,CAAe;EAClDb,GAAG,CAACC,KAAK,GAAGW,OAAO;EACnB,MAAMZ,GAAG;AACX;AAJAU,OAAA,CAAAC,UAAA,GAAAA,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}