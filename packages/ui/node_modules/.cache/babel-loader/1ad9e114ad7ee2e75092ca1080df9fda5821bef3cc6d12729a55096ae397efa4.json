{"ast":null,"code":"import{createPortal}from'react-dom';import{useState,useEffect}from'react';import{useDispatch}from'react-redux';import{enqueueSnackbar as enqueueSnackbarAction,closeSnackbar as closeSnackbarAction}from'store/actions';import{v4 as uuidv4}from'uuid';import{Box,Typography,Button,IconButton,Dialog,DialogActions,DialogContent,DialogTitle,Stack,OutlinedInput}from'@mui/material';import{StyledButton}from'ui-component/button/StyledButton';import{TooltipWithParser}from'ui-component/tooltip/TooltipWithParser';import{Dropdown}from'ui-component/dropdown/Dropdown';import{MultiDropdown}from'ui-component/dropdown/MultiDropdown';import CredentialInputHandler from'views/canvas/CredentialInputHandler';import{File}from'ui-component/file/File';import{BackdropLoader}from'ui-component/loading/BackdropLoader';import DeleteConfirmDialog from'./DeleteConfirmDialog';// Icons\nimport{IconX}from'@tabler/icons';// API\nimport assistantsApi from'api/assistants';// Hooks\nimport useApi from'hooks/useApi';// utils\nimport useNotifier from'utils/useNotifier';import{HIDE_CANVAS_DIALOG,SHOW_CANVAS_DIALOG}from'store/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const assistantAvailableModels=[{label:'gpt-4-1106-preview',name:'gpt-4-1106-preview'},{label:'gpt-4-0613',name:'gpt-4-0613'},{label:'gpt-4-0314',name:'gpt-4-0314'},{label:'gpt-4',name:'gpt-4'},{label:'gpt-3.5-turbo',name:'gpt-3.5-turbo'},{label:'gpt-3.5-turbo-1106',name:'gpt-3.5-turbo-1106'},{label:'gpt-3.5-turbo-0613',name:'gpt-3.5-turbo-0613'},{label:'gpt-3.5-turbo-16k',name:'gpt-3.5-turbo-16k'},{label:'gpt-3.5-turbo-16k-0613',name:'gpt-3.5-turbo-16k-0613'}];const AssistantDialog=_ref=>{let{show,dialogProps,onCancel,onConfirm}=_ref;const portalElement=document.getElementById('portal');useNotifier();const dispatch=useDispatch();const enqueueSnackbar=function(){return dispatch(enqueueSnackbarAction(...arguments));};const closeSnackbar=function(){return dispatch(closeSnackbarAction(...arguments));};const getSpecificAssistantApi=useApi(assistantsApi.getSpecificAssistant);const getAssistantObjApi=useApi(assistantsApi.getAssistantObj);const[assistantId,setAssistantId]=useState('');const[openAIAssistantId,setOpenAIAssistantId]=useState('');const[assistantName,setAssistantName]=useState('');const[assistantDesc,setAssistantDesc]=useState('');const[assistantIcon,setAssistantIcon]=useState(\"https://api.dicebear.com/7.x/bottts/svg?seed=\".concat(uuidv4()));const[assistantModel,setAssistantModel]=useState('');const[assistantCredential,setAssistantCredential]=useState('');const[assistantInstructions,setAssistantInstructions]=useState('');const[assistantTools,setAssistantTools]=useState(['code_interpreter','retrieval']);const[assistantFiles,setAssistantFiles]=useState([]);const[uploadAssistantFiles,setUploadAssistantFiles]=useState('');const[loading,setLoading]=useState(false);const[deleteDialogOpen,setDeleteDialogOpen]=useState(false);const[deleteDialogProps,setDeleteDialogProps]=useState({});useEffect(()=>{if(show)dispatch({type:SHOW_CANVAS_DIALOG});else dispatch({type:HIDE_CANVAS_DIALOG});return()=>dispatch({type:HIDE_CANVAS_DIALOG});},[show,dispatch]);useEffect(()=>{if(getSpecificAssistantApi.data){var _assistantDetails$too,_assistantDetails$fil;setAssistantId(getSpecificAssistantApi.data.id);setAssistantIcon(getSpecificAssistantApi.data.iconSrc);setAssistantCredential(getSpecificAssistantApi.data.credential);const assistantDetails=JSON.parse(getSpecificAssistantApi.data.details);setOpenAIAssistantId(assistantDetails.id);setAssistantName(assistantDetails.name);setAssistantDesc(assistantDetails.description);setAssistantModel(assistantDetails.model);setAssistantInstructions(assistantDetails.instructions);setAssistantTools((_assistantDetails$too=assistantDetails.tools)!==null&&_assistantDetails$too!==void 0?_assistantDetails$too:[]);setAssistantFiles((_assistantDetails$fil=assistantDetails.files)!==null&&_assistantDetails$fil!==void 0?_assistantDetails$fil:[]);}},[getSpecificAssistantApi.data]);useEffect(()=>{if(getAssistantObjApi.data){syncData(getAssistantObjApi.data);}},[getAssistantObjApi.data]);useEffect(()=>{if(dialogProps.type==='EDIT'&&dialogProps.data){var _assistantDetails$too2,_assistantDetails$fil2;// When assistant dialog is opened from Assistants dashboard\nsetAssistantId(dialogProps.data.id);setAssistantIcon(dialogProps.data.iconSrc);setAssistantCredential(dialogProps.data.credential);const assistantDetails=JSON.parse(dialogProps.data.details);setOpenAIAssistantId(assistantDetails.id);setAssistantName(assistantDetails.name);setAssistantDesc(assistantDetails.description);setAssistantModel(assistantDetails.model);setAssistantInstructions(assistantDetails.instructions);setAssistantTools((_assistantDetails$too2=assistantDetails.tools)!==null&&_assistantDetails$too2!==void 0?_assistantDetails$too2:[]);setAssistantFiles((_assistantDetails$fil2=assistantDetails.files)!==null&&_assistantDetails$fil2!==void 0?_assistantDetails$fil2:[]);}else if(dialogProps.type==='EDIT'&&dialogProps.assistantId){// When assistant dialog is opened from OpenAIAssistant node in canvas\ngetSpecificAssistantApi.request(dialogProps.assistantId);}else if(dialogProps.type==='ADD'&&dialogProps.selectedOpenAIAssistantId&&dialogProps.credential){// When assistant dialog is to add new assistant from existing\nsetAssistantId('');setAssistantIcon(\"https://api.dicebear.com/7.x/bottts/svg?seed=\".concat(uuidv4()));setAssistantCredential(dialogProps.credential);getAssistantObjApi.request(dialogProps.selectedOpenAIAssistantId,dialogProps.credential);}else if(dialogProps.type==='ADD'&&!dialogProps.selectedOpenAIAssistantId){// When assistant dialog is to add a blank new assistant\nsetAssistantId('');setAssistantIcon(\"https://api.dicebear.com/7.x/bottts/svg?seed=\".concat(uuidv4()));setAssistantCredential('');setOpenAIAssistantId('');setAssistantName('');setAssistantDesc('');setAssistantModel('');setAssistantInstructions('');setAssistantTools(['code_interpreter','retrieval']);setUploadAssistantFiles('');setAssistantFiles([]);}return()=>{setAssistantId('');setAssistantIcon(\"https://api.dicebear.com/7.x/bottts/svg?seed=\".concat(uuidv4()));setAssistantCredential('');setOpenAIAssistantId('');setAssistantName('');setAssistantDesc('');setAssistantModel('');setAssistantInstructions('');setAssistantTools(['code_interpreter','retrieval']);setUploadAssistantFiles('');setAssistantFiles([]);setLoading(false);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dialogProps]);const syncData=data=>{var _data$files;setOpenAIAssistantId(data.id);setAssistantName(data.name);setAssistantDesc(data.description);setAssistantModel(data.model);setAssistantInstructions(data.instructions);setAssistantFiles((_data$files=data.files)!==null&&_data$files!==void 0?_data$files:[]);let tools=[];if(data.tools&&data.tools.length){for(const tool of data.tools){tools.push(tool.type);}}setAssistantTools(tools);};const addNewAssistant=async()=>{setLoading(true);try{const assistantDetails={id:openAIAssistantId,name:assistantName,description:assistantDesc,model:assistantModel,instructions:assistantInstructions,tools:assistantTools,files:assistantFiles,uploadFiles:uploadAssistantFiles};const obj={details:JSON.stringify(assistantDetails),iconSrc:assistantIcon,credential:assistantCredential};const createResp=await assistantsApi.createNewAssistant(obj);if(createResp.data){enqueueSnackbar({message:'New Assistant added',options:{key:new Date().getTime()+Math.random(),variant:'success',action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});onConfirm(createResp.data.id);}setLoading(false);}catch(error){const errorData=error.response.data||\"\".concat(error.response.status,\": \").concat(error.response.statusText);enqueueSnackbar({message:\"Failed to add new Assistant: \".concat(errorData),options:{key:new Date().getTime()+Math.random(),variant:'error',persist:true,action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});setLoading(false);onCancel();}};const saveAssistant=async()=>{setLoading(true);try{const assistantDetails={name:assistantName,description:assistantDesc,model:assistantModel,instructions:assistantInstructions,tools:assistantTools,files:assistantFiles,uploadFiles:uploadAssistantFiles};const obj={details:JSON.stringify(assistantDetails),iconSrc:assistantIcon,credential:assistantCredential};const saveResp=await assistantsApi.updateAssistant(assistantId,obj);if(saveResp.data){enqueueSnackbar({message:'Assistant saved',options:{key:new Date().getTime()+Math.random(),variant:'success',action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});onConfirm(saveResp.data.id);}setLoading(false);}catch(error){const errorData=error.response.data||\"\".concat(error.response.status,\": \").concat(error.response.statusText);enqueueSnackbar({message:\"Failed to save Assistant: \".concat(errorData),options:{key:new Date().getTime()+Math.random(),variant:'error',persist:true,action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});setLoading(false);onCancel();}};const onSyncClick=async()=>{setLoading(true);try{const getResp=await assistantsApi.getAssistantObj(openAIAssistantId,assistantCredential);if(getResp.data){syncData(getResp.data);enqueueSnackbar({message:'Assistant successfully synced!',options:{key:new Date().getTime()+Math.random(),variant:'success',action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});}setLoading(false);}catch(error){const errorData=error.response.data||\"\".concat(error.response.status,\": \").concat(error.response.statusText);enqueueSnackbar({message:\"Failed to sync Assistant: \".concat(errorData),options:{key:new Date().getTime()+Math.random(),variant:'error',persist:true,action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});setLoading(false);}};const onDeleteClick=()=>{setDeleteDialogProps({title:\"Delete Assistant\",description:\"Delete Assistant \".concat(assistantName,\"?\"),cancelButtonName:'Cancel'});setDeleteDialogOpen(true);};const deleteAssistant=async isDeleteBoth=>{setDeleteDialogOpen(false);try{const delResp=await assistantsApi.deleteAssistant(assistantId,isDeleteBoth);if(delResp.data){enqueueSnackbar({message:'Assistant deleted',options:{key:new Date().getTime()+Math.random(),variant:'success',action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});onConfirm();}}catch(error){const errorData=error.response.data||\"\".concat(error.response.status,\": \").concat(error.response.statusText);enqueueSnackbar({message:\"Failed to delete Assistant: \".concat(errorData),options:{key:new Date().getTime()+Math.random(),variant:'error',persist:true,action:key=>/*#__PURE__*/_jsx(Button,{style:{color:'white'},onClick:()=>closeSnackbar(key),children:/*#__PURE__*/_jsx(IconX,{})})}});onCancel();}};const onFileDeleteClick=async fileId=>{setAssistantFiles(assistantFiles.filter(file=>file.id!==fileId));};const component=show?/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,maxWidth:\"md\",open:show,onClose:onCancel,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{fontSize:'1rem'},id:\"alert-dialog-title\",children:dialogProps.title}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Assistant Name\",/*#__PURE__*/_jsx(TooltipWithParser,{style:{marginLeft:10},title:'The name of the assistant. The maximum length is 256 characters.'})]})}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"assistantName\",type:\"string\",fullWidth:true,placeholder:\"My New Assistant\",value:assistantName,name:\"assistantName\",onChange:e=>setAssistantName(e.target.value)})]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Assistant Description\",/*#__PURE__*/_jsx(TooltipWithParser,{style:{marginLeft:10},title:'The description of the assistant. The maximum length is 512 characters.'})]})}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"assistantDesc\",type:\"string\",fullWidth:true,placeholder:\"Description of what the Assistant does\",multiline:true,rows:3,value:assistantDesc,name:\"assistantDesc\",onChange:e=>setAssistantDesc(e.target.value)})]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsx(Typography,{variant:\"overline\",children:\"Assistant Icon Src\"})}),/*#__PURE__*/_jsx(\"div\",{style:{width:100,height:100,borderRadius:'50%',backgroundColor:'white'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',padding:5,borderRadius:'50%',objectFit:'contain'},alt:assistantName,src:assistantIcon})}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"assistantIcon\",type:\"string\",fullWidth:true,placeholder:\"https://api.dicebear.com/7.x/bottts/svg?seed=\".concat(uuidv4()),value:assistantIcon,name:\"assistantIcon\",onChange:e=>setAssistantIcon(e.target.value)})]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Assistant Model\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\xA0*\"})]})}),/*#__PURE__*/_jsx(Dropdown,{name:assistantModel,options:assistantAvailableModels,onSelect:newValue=>setAssistantModel(newValue),value:assistantModel!==null&&assistantModel!==void 0?assistantModel:'choose an option'},assistantModel)]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"OpenAI Credential\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\xA0*\"})]})}),/*#__PURE__*/_jsx(CredentialInputHandler,{data:assistantCredential?{credential:assistantCredential}:{},inputParam:{label:'Connect Credential',name:'credential',type:'credential',credentialNames:['openAIApi']},onSelect:newValue=>setAssistantCredential(newValue)},assistantCredential)]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Assistant Instruction\",/*#__PURE__*/_jsx(TooltipWithParser,{style:{marginLeft:10},title:'The system instructions that the assistant uses. The maximum length is 32768 characters.'})]})}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"assistantInstructions\",type:\"string\",fullWidth:true,placeholder:\"You are a personal math tutor. When asked a question, write and run Python code to answer the question.\",multiline:true,rows:3,value:assistantInstructions,name:\"assistantInstructions\",onChange:e=>setAssistantInstructions(e.target.value)})]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Assistant Tools\",/*#__PURE__*/_jsx(TooltipWithParser,{style:{marginLeft:10},title:\"A list of tool enabled on the assistant. There can be a maximum of 128 tools per assistant.\"})]})}),/*#__PURE__*/_jsx(MultiDropdown,{name:JSON.stringify(assistantTools),options:[{label:'Code Interpreter',name:'code_interpreter'},{label:'Retrieval',name:'retrieval'}],onSelect:newValue=>newValue?setAssistantTools(JSON.parse(newValue)):setAssistantTools([]),value:assistantTools!==null&&assistantTools!==void 0?assistantTools:'choose an option'},JSON.stringify(assistantTools))]}),/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Stack,{sx:{position:'relative'},direction:\"row\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"overline\",children:[\"Knowledge Files\",/*#__PURE__*/_jsx(TooltipWithParser,{style:{marginLeft:10},title:\"Allow assistant to use the content from uploaded files for retrieval and code interpreter. MAX: 20 files\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'row'},children:assistantFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',alignItems:'center',width:'max-content',height:'max-content',borderRadius:15,background:'rgb(254,252,191)',paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5,marginRight:10},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'rgb(116,66,16)',marginRight:10},children:file.filename}),/*#__PURE__*/_jsx(IconButton,{sx:{height:15,width:15,p:0},onClick:()=>onFileDeleteClick(file.id),children:/*#__PURE__*/_jsx(IconX,{})})]},index))}),/*#__PURE__*/_jsx(File,{fileType:\"*\",onChange:newValue=>setUploadAssistantFiles(newValue),value:uploadAssistantFiles!==null&&uploadAssistantFiles!==void 0?uploadAssistantFiles:'Choose a file to upload'},uploadAssistantFiles)]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[dialogProps.type==='EDIT'&&/*#__PURE__*/_jsx(StyledButton,{color:\"secondary\",variant:\"contained\",onClick:()=>onSyncClick(),children:\"Sync\"}),dialogProps.type==='EDIT'&&/*#__PURE__*/_jsx(StyledButton,{color:\"error\",variant:\"contained\",onClick:()=>onDeleteClick(),children:\"Delete\"}),/*#__PURE__*/_jsx(StyledButton,{disabled:!(assistantModel&&assistantCredential),variant:\"contained\",onClick:()=>dialogProps.type==='ADD'?addNewAssistant():saveAssistant(),children:dialogProps.confirmButtonName})]}),/*#__PURE__*/_jsx(DeleteConfirmDialog,{show:deleteDialogOpen,dialogProps:deleteDialogProps,onCancel:()=>setDeleteDialogOpen(false),onDelete:()=>deleteAssistant(),onDeleteBoth:()=>deleteAssistant(true)}),loading&&/*#__PURE__*/_jsx(BackdropLoader,{open:loading})]}):null;return/*#__PURE__*/createPortal(component,portalElement);};export default AssistantDialog;","map":{"version":3,"names":["createPortal","useState","useEffect","useDispatch","enqueueSnackbar","enqueueSnackbarAction","closeSnackbar","closeSnackbarAction","v4","uuidv4","Box","Typography","Button","IconButton","Dialog","DialogActions","DialogContent","DialogTitle","Stack","OutlinedInput","StyledButton","TooltipWithParser","Dropdown","MultiDropdown","CredentialInputHandler","File","BackdropLoader","DeleteConfirmDialog","IconX","assistantsApi","useApi","useNotifier","HIDE_CANVAS_DIALOG","SHOW_CANVAS_DIALOG","jsx","_jsx","jsxs","_jsxs","assistantAvailableModels","label","name","AssistantDialog","_ref","show","dialogProps","onCancel","onConfirm","portalElement","document","getElementById","dispatch","arguments","getSpecificAssistantApi","getSpecificAssistant","getAssistantObjApi","getAssistantObj","assistantId","setAssistantId","openAIAssistantId","setOpenAIAssistantId","assistantName","setAssistantName","assistantDesc","setAssistantDesc","assistantIcon","setAssistantIcon","concat","assistantModel","setAssistantModel","assistantCredential","setAssistantCredential","assistantInstructions","setAssistantInstructions","assistantTools","setAssistantTools","assistantFiles","setAssistantFiles","uploadAssistantFiles","setUploadAssistantFiles","loading","setLoading","deleteDialogOpen","setDeleteDialogOpen","deleteDialogProps","setDeleteDialogProps","type","data","_assistantDetails$too","_assistantDetails$fil","id","iconSrc","credential","assistantDetails","JSON","parse","details","description","model","instructions","tools","files","syncData","_assistantDetails$too2","_assistantDetails$fil2","request","selectedOpenAIAssistantId","_data$files","length","tool","push","addNewAssistant","uploadFiles","obj","stringify","createResp","createNewAssistant","message","options","key","Date","getTime","Math","random","variant","action","style","color","onClick","children","error","errorData","response","status","statusText","persist","saveAssistant","saveResp","updateAssistant","onSyncClick","getResp","onDeleteClick","title","cancelButtonName","deleteAssistant","isDeleteBoth","delResp","onFileDeleteClick","fileId","filter","file","component","fullWidth","maxWidth","open","onClose","sx","fontSize","p","position","direction","marginLeft","placeholder","value","onChange","e","target","multiline","rows","width","height","borderRadius","backgroundColor","padding","objectFit","alt","src","onSelect","newValue","inputParam","credentialNames","display","flexDirection","map","index","alignItems","background","paddingLeft","paddingRight","paddingTop","paddingBottom","marginRight","filename","fileType","disabled","confirmButtonName","onDelete","onDeleteBoth"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/packages/ui/src/views/assistants/AssistantDialog.js"],"sourcesContent":["import { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { useState, useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { enqueueSnackbar as enqueueSnackbarAction, closeSnackbar as closeSnackbarAction } from 'store/actions'\nimport { v4 as uuidv4 } from 'uuid'\n\nimport { Box, Typography, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, Stack, OutlinedInput } from '@mui/material'\n\nimport { StyledButton } from 'ui-component/button/StyledButton'\nimport { TooltipWithParser } from 'ui-component/tooltip/TooltipWithParser'\nimport { Dropdown } from 'ui-component/dropdown/Dropdown'\nimport { MultiDropdown } from 'ui-component/dropdown/MultiDropdown'\nimport CredentialInputHandler from 'views/canvas/CredentialInputHandler'\nimport { File } from 'ui-component/file/File'\nimport { BackdropLoader } from 'ui-component/loading/BackdropLoader'\nimport DeleteConfirmDialog from './DeleteConfirmDialog'\n\n// Icons\nimport { IconX } from '@tabler/icons'\n\n// API\nimport assistantsApi from 'api/assistants'\n\n// Hooks\nimport useApi from 'hooks/useApi'\n\n// utils\nimport useNotifier from 'utils/useNotifier'\nimport { HIDE_CANVAS_DIALOG, SHOW_CANVAS_DIALOG } from 'store/actions'\n\nconst assistantAvailableModels = [\n    {\n        label: 'gpt-4-1106-preview',\n        name: 'gpt-4-1106-preview'\n    },\n    {\n        label: 'gpt-4-0613',\n        name: 'gpt-4-0613'\n    },\n    {\n        label: 'gpt-4-0314',\n        name: 'gpt-4-0314'\n    },\n    {\n        label: 'gpt-4',\n        name: 'gpt-4'\n    },\n    {\n        label: 'gpt-3.5-turbo',\n        name: 'gpt-3.5-turbo'\n    },\n    {\n        label: 'gpt-3.5-turbo-1106',\n        name: 'gpt-3.5-turbo-1106'\n    },\n    {\n        label: 'gpt-3.5-turbo-0613',\n        name: 'gpt-3.5-turbo-0613'\n    },\n    {\n        label: 'gpt-3.5-turbo-16k',\n        name: 'gpt-3.5-turbo-16k'\n    },\n    {\n        label: 'gpt-3.5-turbo-16k-0613',\n        name: 'gpt-3.5-turbo-16k-0613'\n    }\n]\n\nconst AssistantDialog = ({ show, dialogProps, onCancel, onConfirm }) => {\n    const portalElement = document.getElementById('portal')\n    useNotifier()\n    const dispatch = useDispatch()\n    const enqueueSnackbar = (...args) => dispatch(enqueueSnackbarAction(...args))\n    const closeSnackbar = (...args) => dispatch(closeSnackbarAction(...args))\n\n    const getSpecificAssistantApi = useApi(assistantsApi.getSpecificAssistant)\n    const getAssistantObjApi = useApi(assistantsApi.getAssistantObj)\n\n    const [assistantId, setAssistantId] = useState('')\n    const [openAIAssistantId, setOpenAIAssistantId] = useState('')\n    const [assistantName, setAssistantName] = useState('')\n    const [assistantDesc, setAssistantDesc] = useState('')\n    const [assistantIcon, setAssistantIcon] = useState(`https://api.dicebear.com/7.x/bottts/svg?seed=${uuidv4()}`)\n    const [assistantModel, setAssistantModel] = useState('')\n    const [assistantCredential, setAssistantCredential] = useState('')\n    const [assistantInstructions, setAssistantInstructions] = useState('')\n    const [assistantTools, setAssistantTools] = useState(['code_interpreter', 'retrieval'])\n    const [assistantFiles, setAssistantFiles] = useState([])\n    const [uploadAssistantFiles, setUploadAssistantFiles] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [deleteDialogOpen, setDeleteDialogOpen] = useState(false)\n    const [deleteDialogProps, setDeleteDialogProps] = useState({})\n\n    useEffect(() => {\n        if (show) dispatch({ type: SHOW_CANVAS_DIALOG })\n        else dispatch({ type: HIDE_CANVAS_DIALOG })\n        return () => dispatch({ type: HIDE_CANVAS_DIALOG })\n    }, [show, dispatch])\n\n    useEffect(() => {\n        if (getSpecificAssistantApi.data) {\n            setAssistantId(getSpecificAssistantApi.data.id)\n            setAssistantIcon(getSpecificAssistantApi.data.iconSrc)\n            setAssistantCredential(getSpecificAssistantApi.data.credential)\n\n            const assistantDetails = JSON.parse(getSpecificAssistantApi.data.details)\n            setOpenAIAssistantId(assistantDetails.id)\n            setAssistantName(assistantDetails.name)\n            setAssistantDesc(assistantDetails.description)\n            setAssistantModel(assistantDetails.model)\n            setAssistantInstructions(assistantDetails.instructions)\n            setAssistantTools(assistantDetails.tools ?? [])\n            setAssistantFiles(assistantDetails.files ?? [])\n        }\n    }, [getSpecificAssistantApi.data])\n\n    useEffect(() => {\n        if (getAssistantObjApi.data) {\n            syncData(getAssistantObjApi.data)\n        }\n    }, [getAssistantObjApi.data])\n\n    useEffect(() => {\n        if (dialogProps.type === 'EDIT' && dialogProps.data) {\n            // When assistant dialog is opened from Assistants dashboard\n            setAssistantId(dialogProps.data.id)\n            setAssistantIcon(dialogProps.data.iconSrc)\n            setAssistantCredential(dialogProps.data.credential)\n\n            const assistantDetails = JSON.parse(dialogProps.data.details)\n            setOpenAIAssistantId(assistantDetails.id)\n            setAssistantName(assistantDetails.name)\n            setAssistantDesc(assistantDetails.description)\n            setAssistantModel(assistantDetails.model)\n            setAssistantInstructions(assistantDetails.instructions)\n            setAssistantTools(assistantDetails.tools ?? [])\n            setAssistantFiles(assistantDetails.files ?? [])\n        } else if (dialogProps.type === 'EDIT' && dialogProps.assistantId) {\n            // When assistant dialog is opened from OpenAIAssistant node in canvas\n            getSpecificAssistantApi.request(dialogProps.assistantId)\n        } else if (dialogProps.type === 'ADD' && dialogProps.selectedOpenAIAssistantId && dialogProps.credential) {\n            // When assistant dialog is to add new assistant from existing\n            setAssistantId('')\n            setAssistantIcon(`https://api.dicebear.com/7.x/bottts/svg?seed=${uuidv4()}`)\n            setAssistantCredential(dialogProps.credential)\n\n            getAssistantObjApi.request(dialogProps.selectedOpenAIAssistantId, dialogProps.credential)\n        } else if (dialogProps.type === 'ADD' && !dialogProps.selectedOpenAIAssistantId) {\n            // When assistant dialog is to add a blank new assistant\n            setAssistantId('')\n            setAssistantIcon(`https://api.dicebear.com/7.x/bottts/svg?seed=${uuidv4()}`)\n            setAssistantCredential('')\n\n            setOpenAIAssistantId('')\n            setAssistantName('')\n            setAssistantDesc('')\n            setAssistantModel('')\n            setAssistantInstructions('')\n            setAssistantTools(['code_interpreter', 'retrieval'])\n            setUploadAssistantFiles('')\n            setAssistantFiles([])\n        }\n\n        return () => {\n            setAssistantId('')\n            setAssistantIcon(`https://api.dicebear.com/7.x/bottts/svg?seed=${uuidv4()}`)\n            setAssistantCredential('')\n\n            setOpenAIAssistantId('')\n            setAssistantName('')\n            setAssistantDesc('')\n            setAssistantModel('')\n            setAssistantInstructions('')\n            setAssistantTools(['code_interpreter', 'retrieval'])\n            setUploadAssistantFiles('')\n            setAssistantFiles([])\n            setLoading(false)\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dialogProps])\n\n    const syncData = (data) => {\n        setOpenAIAssistantId(data.id)\n        setAssistantName(data.name)\n        setAssistantDesc(data.description)\n        setAssistantModel(data.model)\n        setAssistantInstructions(data.instructions)\n        setAssistantFiles(data.files ?? [])\n\n        let tools = []\n        if (data.tools && data.tools.length) {\n            for (const tool of data.tools) {\n                tools.push(tool.type)\n            }\n        }\n        setAssistantTools(tools)\n    }\n\n    const addNewAssistant = async () => {\n        setLoading(true)\n        try {\n            const assistantDetails = {\n                id: openAIAssistantId,\n                name: assistantName,\n                description: assistantDesc,\n                model: assistantModel,\n                instructions: assistantInstructions,\n                tools: assistantTools,\n                files: assistantFiles,\n                uploadFiles: uploadAssistantFiles\n            }\n            const obj = {\n                details: JSON.stringify(assistantDetails),\n                iconSrc: assistantIcon,\n                credential: assistantCredential\n            }\n\n            const createResp = await assistantsApi.createNewAssistant(obj)\n            if (createResp.data) {\n                enqueueSnackbar({\n                    message: 'New Assistant added',\n                    options: {\n                        key: new Date().getTime() + Math.random(),\n                        variant: 'success',\n                        action: (key) => (\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                                <IconX />\n                            </Button>\n                        )\n                    }\n                })\n                onConfirm(createResp.data.id)\n            }\n            setLoading(false)\n        } catch (error) {\n            const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`\n            enqueueSnackbar({\n                message: `Failed to add new Assistant: ${errorData}`,\n                options: {\n                    key: new Date().getTime() + Math.random(),\n                    variant: 'error',\n                    persist: true,\n                    action: (key) => (\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                            <IconX />\n                        </Button>\n                    )\n                }\n            })\n            setLoading(false)\n            onCancel()\n        }\n    }\n\n    const saveAssistant = async () => {\n        setLoading(true)\n        try {\n            const assistantDetails = {\n                name: assistantName,\n                description: assistantDesc,\n                model: assistantModel,\n                instructions: assistantInstructions,\n                tools: assistantTools,\n                files: assistantFiles,\n                uploadFiles: uploadAssistantFiles\n            }\n            const obj = {\n                details: JSON.stringify(assistantDetails),\n                iconSrc: assistantIcon,\n                credential: assistantCredential\n            }\n            const saveResp = await assistantsApi.updateAssistant(assistantId, obj)\n            if (saveResp.data) {\n                enqueueSnackbar({\n                    message: 'Assistant saved',\n                    options: {\n                        key: new Date().getTime() + Math.random(),\n                        variant: 'success',\n                        action: (key) => (\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                                <IconX />\n                            </Button>\n                        )\n                    }\n                })\n                onConfirm(saveResp.data.id)\n            }\n            setLoading(false)\n        } catch (error) {\n            const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`\n            enqueueSnackbar({\n                message: `Failed to save Assistant: ${errorData}`,\n                options: {\n                    key: new Date().getTime() + Math.random(),\n                    variant: 'error',\n                    persist: true,\n                    action: (key) => (\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                            <IconX />\n                        </Button>\n                    )\n                }\n            })\n            setLoading(false)\n            onCancel()\n        }\n    }\n\n    const onSyncClick = async () => {\n        setLoading(true)\n        try {\n            const getResp = await assistantsApi.getAssistantObj(openAIAssistantId, assistantCredential)\n            if (getResp.data) {\n                syncData(getResp.data)\n                enqueueSnackbar({\n                    message: 'Assistant successfully synced!',\n                    options: {\n                        key: new Date().getTime() + Math.random(),\n                        variant: 'success',\n                        action: (key) => (\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                                <IconX />\n                            </Button>\n                        )\n                    }\n                })\n            }\n            setLoading(false)\n        } catch (error) {\n            const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`\n            enqueueSnackbar({\n                message: `Failed to sync Assistant: ${errorData}`,\n                options: {\n                    key: new Date().getTime() + Math.random(),\n                    variant: 'error',\n                    persist: true,\n                    action: (key) => (\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                            <IconX />\n                        </Button>\n                    )\n                }\n            })\n            setLoading(false)\n        }\n    }\n\n    const onDeleteClick = () => {\n        setDeleteDialogProps({\n            title: `Delete Assistant`,\n            description: `Delete Assistant ${assistantName}?`,\n            cancelButtonName: 'Cancel'\n        })\n        setDeleteDialogOpen(true)\n    }\n\n    const deleteAssistant = async (isDeleteBoth) => {\n        setDeleteDialogOpen(false)\n        try {\n            const delResp = await assistantsApi.deleteAssistant(assistantId, isDeleteBoth)\n            if (delResp.data) {\n                enqueueSnackbar({\n                    message: 'Assistant deleted',\n                    options: {\n                        key: new Date().getTime() + Math.random(),\n                        variant: 'success',\n                        action: (key) => (\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                                <IconX />\n                            </Button>\n                        )\n                    }\n                })\n                onConfirm()\n            }\n        } catch (error) {\n            const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`\n            enqueueSnackbar({\n                message: `Failed to delete Assistant: ${errorData}`,\n                options: {\n                    key: new Date().getTime() + Math.random(),\n                    variant: 'error',\n                    persist: true,\n                    action: (key) => (\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\n                            <IconX />\n                        </Button>\n                    )\n                }\n            })\n            onCancel()\n        }\n    }\n\n    const onFileDeleteClick = async (fileId) => {\n        setAssistantFiles(assistantFiles.filter((file) => file.id !== fileId))\n    }\n\n    const component = show ? (\n        <Dialog\n            fullWidth\n            maxWidth='md'\n            open={show}\n            onClose={onCancel}\n            aria-labelledby='alert-dialog-title'\n            aria-describedby='alert-dialog-description'\n        >\n            <DialogTitle sx={{ fontSize: '1rem' }} id='alert-dialog-title'>\n                {dialogProps.title}\n            </DialogTitle>\n            <DialogContent>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Assistant Name\n                            <TooltipWithParser\n                                style={{ marginLeft: 10 }}\n                                title={'The name of the assistant. The maximum length is 256 characters.'}\n                            />\n                        </Typography>\n                    </Stack>\n                    <OutlinedInput\n                        id='assistantName'\n                        type='string'\n                        fullWidth\n                        placeholder='My New Assistant'\n                        value={assistantName}\n                        name='assistantName'\n                        onChange={(e) => setAssistantName(e.target.value)}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Assistant Description\n                            <TooltipWithParser\n                                style={{ marginLeft: 10 }}\n                                title={'The description of the assistant. The maximum length is 512 characters.'}\n                            />\n                        </Typography>\n                    </Stack>\n                    <OutlinedInput\n                        id='assistantDesc'\n                        type='string'\n                        fullWidth\n                        placeholder='Description of what the Assistant does'\n                        multiline={true}\n                        rows={3}\n                        value={assistantDesc}\n                        name='assistantDesc'\n                        onChange={(e) => setAssistantDesc(e.target.value)}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>Assistant Icon Src</Typography>\n                    </Stack>\n                    <div\n                        style={{\n                            width: 100,\n                            height: 100,\n                            borderRadius: '50%',\n                            backgroundColor: 'white'\n                        }}\n                    >\n                        <img\n                            style={{\n                                width: '100%',\n                                height: '100%',\n                                padding: 5,\n                                borderRadius: '50%',\n                                objectFit: 'contain'\n                            }}\n                            alt={assistantName}\n                            src={assistantIcon}\n                        />\n                    </div>\n                    <OutlinedInput\n                        id='assistantIcon'\n                        type='string'\n                        fullWidth\n                        placeholder={`https://api.dicebear.com/7.x/bottts/svg?seed=${uuidv4()}`}\n                        value={assistantIcon}\n                        name='assistantIcon'\n                        onChange={(e) => setAssistantIcon(e.target.value)}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Assistant Model\n                            <span style={{ color: 'red' }}>&nbsp;*</span>\n                        </Typography>\n                    </Stack>\n                    <Dropdown\n                        key={assistantModel}\n                        name={assistantModel}\n                        options={assistantAvailableModels}\n                        onSelect={(newValue) => setAssistantModel(newValue)}\n                        value={assistantModel ?? 'choose an option'}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            OpenAI Credential\n                            <span style={{ color: 'red' }}>&nbsp;*</span>\n                        </Typography>\n                    </Stack>\n                    <CredentialInputHandler\n                        key={assistantCredential}\n                        data={assistantCredential ? { credential: assistantCredential } : {}}\n                        inputParam={{\n                            label: 'Connect Credential',\n                            name: 'credential',\n                            type: 'credential',\n                            credentialNames: ['openAIApi']\n                        }}\n                        onSelect={(newValue) => setAssistantCredential(newValue)}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Assistant Instruction\n                            <TooltipWithParser\n                                style={{ marginLeft: 10 }}\n                                title={'The system instructions that the assistant uses. The maximum length is 32768 characters.'}\n                            />\n                        </Typography>\n                    </Stack>\n                    <OutlinedInput\n                        id='assistantInstructions'\n                        type='string'\n                        fullWidth\n                        placeholder='You are a personal math tutor. When asked a question, write and run Python code to answer the question.'\n                        multiline={true}\n                        rows={3}\n                        value={assistantInstructions}\n                        name='assistantInstructions'\n                        onChange={(e) => setAssistantInstructions(e.target.value)}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Assistant Tools\n                            <TooltipWithParser\n                                style={{ marginLeft: 10 }}\n                                title='A list of tool enabled on the assistant. There can be a maximum of 128 tools per assistant.'\n                            />\n                        </Typography>\n                    </Stack>\n                    <MultiDropdown\n                        key={JSON.stringify(assistantTools)}\n                        name={JSON.stringify(assistantTools)}\n                        options={[\n                            {\n                                label: 'Code Interpreter',\n                                name: 'code_interpreter'\n                            },\n                            {\n                                label: 'Retrieval',\n                                name: 'retrieval'\n                            }\n                        ]}\n                        onSelect={(newValue) => (newValue ? setAssistantTools(JSON.parse(newValue)) : setAssistantTools([]))}\n                        value={assistantTools ?? 'choose an option'}\n                    />\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Stack sx={{ position: 'relative' }} direction='row'>\n                        <Typography variant='overline'>\n                            Knowledge Files\n                            <TooltipWithParser\n                                style={{ marginLeft: 10 }}\n                                title='Allow assistant to use the content from uploaded files for retrieval and code interpreter. MAX: 20 files'\n                            />\n                        </Typography>\n                    </Stack>\n                    <div style={{ display: 'flex', flexDirection: 'row' }}>\n                        {assistantFiles.map((file, index) => (\n                            <div\n                                key={index}\n                                style={{\n                                    display: 'flex',\n                                    flexDirection: 'row',\n                                    alignItems: 'center',\n                                    width: 'max-content',\n                                    height: 'max-content',\n                                    borderRadius: 15,\n                                    background: 'rgb(254,252,191)',\n                                    paddingLeft: 15,\n                                    paddingRight: 15,\n                                    paddingTop: 5,\n                                    paddingBottom: 5,\n                                    marginRight: 10\n                                }}\n                            >\n                                <span style={{ color: 'rgb(116,66,16)', marginRight: 10 }}>{file.filename}</span>\n                                <IconButton sx={{ height: 15, width: 15, p: 0 }} onClick={() => onFileDeleteClick(file.id)}>\n                                    <IconX />\n                                </IconButton>\n                            </div>\n                        ))}\n                    </div>\n                    <File\n                        key={uploadAssistantFiles}\n                        fileType='*'\n                        onChange={(newValue) => setUploadAssistantFiles(newValue)}\n                        value={uploadAssistantFiles ?? 'Choose a file to upload'}\n                    />\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                {dialogProps.type === 'EDIT' && (\n                    <StyledButton color='secondary' variant='contained' onClick={() => onSyncClick()}>\n                        Sync\n                    </StyledButton>\n                )}\n                {dialogProps.type === 'EDIT' && (\n                    <StyledButton color='error' variant='contained' onClick={() => onDeleteClick()}>\n                        Delete\n                    </StyledButton>\n                )}\n                <StyledButton\n                    disabled={!(assistantModel && assistantCredential)}\n                    variant='contained'\n                    onClick={() => (dialogProps.type === 'ADD' ? addNewAssistant() : saveAssistant())}\n                >\n                    {dialogProps.confirmButtonName}\n                </StyledButton>\n            </DialogActions>\n            <DeleteConfirmDialog\n                show={deleteDialogOpen}\n                dialogProps={deleteDialogProps}\n                onCancel={() => setDeleteDialogOpen(false)}\n                onDelete={() => deleteAssistant()}\n                onDeleteBoth={() => deleteAssistant(true)}\n            />\n            {loading && <BackdropLoader open={loading} />}\n        </Dialog>\n    ) : null\n\n    return createPortal(component, portalElement)\n}\n\nAssistantDialog.propTypes = {\n    show: PropTypes.bool,\n    dialogProps: PropTypes.object,\n    onCancel: PropTypes.func,\n    onConfirm: PropTypes.func\n}\n\nexport default AssistantDialog\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}