{"ast":null,"code":"import{useState,useEffect}from'react';import{createPortal}from'react-dom';import{useSelector,useDispatch}from'react-redux';import{List,ListItemButton,ListItem,ListItemAvatar,ListItemText,Dialog,DialogContent,DialogTitle,Box,OutlinedInput,InputAdornment}from'@mui/material';import{useTheme}from'@mui/material/styles';import{IconSearch,IconX}from'@tabler/icons';// const\nimport{baseURL}from'store/constant';import{HIDE_CANVAS_DIALOG,SHOW_CANVAS_DIALOG}from'store/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CredentialListDialog=_ref=>{let{show,dialogProps,onCancel,onCredentialSelected}=_ref;const portalElement=document.getElementById('portal');const customization=useSelector(state=>state.customization);const dispatch=useDispatch();const theme=useTheme();const[searchValue,setSearchValue]=useState('');const[componentsCredentials,setComponentsCredentials]=useState([]);const filterSearch=value=>{setSearchValue(value);setTimeout(()=>{if(value){const searchData=dialogProps.componentsCredentials.filter(crd=>crd.name.toLowerCase().includes(value.toLowerCase()));setComponentsCredentials(searchData);}else if(value===''){setComponentsCredentials(dialogProps.componentsCredentials);}// scrollTop()\n},500);};useEffect(()=>{if(dialogProps.componentsCredentials){setComponentsCredentials(dialogProps.componentsCredentials);}},[dialogProps]);useEffect(()=>{if(show)dispatch({type:SHOW_CANVAS_DIALOG});else dispatch({type:HIDE_CANVAS_DIALOG});return()=>dispatch({type:HIDE_CANVAS_DIALOG});},[show,dispatch]);const component=show?/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,maxWidth:\"xs\",open:show,onClose:onCancel,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{fontSize:'1rem'},id:\"alert-dialog-title\",children:[dialogProps.title,/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsx(OutlinedInput,{sx:{width:'100%',pr:2,pl:2,my:2},id:\"input-search-credential\",value:searchValue,onChange:e=>filterSearch(e.target.value),placeholder:\"Search credential\",startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(IconSearch,{stroke:1.5,size:\"1rem\",color:theme.palette.grey[500]})}),endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",sx:{cursor:'pointer',color:theme.palette.grey[500],'&:hover':{color:theme.palette.grey[900]}},title:\"Clear Search\",children:/*#__PURE__*/_jsx(IconX,{stroke:1.5,size:\"1rem\",onClick:()=>filterSearch(''),style:{cursor:'pointer'}})}),\"aria-describedby\":\"search-helper-text\",inputProps:{'aria-label':'weight'}})})]}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(List,{sx:{width:'100%',py:0,borderRadius:'10px',[theme.breakpoints.down('md')]:{maxWidth:370},'& .MuiListItemSecondaryAction-root':{top:22},'& .MuiDivider-root':{my:0},'& .list-container':{pl:7}},children:[...componentsCredentials].map(componentCredential=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ListItemButton,{onClick:()=>onCredentialSelected(componentCredential),sx:{p:0,borderRadius:\"\".concat(customization.borderRadius,\"px\")},children:/*#__PURE__*/_jsxs(ListItem,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:50,borderRadius:'50%',backgroundColor:'white'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',padding:7,borderRadius:'50%',objectFit:'contain'},alt:componentCredential.name,src:\"\".concat(baseURL,\"/api/v1/components-credentials-icon/\").concat(componentCredential.name)})})}),/*#__PURE__*/_jsx(ListItemText,{sx:{ml:1},primary:componentCredential.label})]})})},componentCredential.name))})})]}):null;return/*#__PURE__*/createPortal(component,portalElement);};export default CredentialListDialog;","map":{"version":3,"names":["useState","useEffect","createPortal","useSelector","useDispatch","List","ListItemButton","ListItem","ListItemAvatar","ListItemText","Dialog","DialogContent","DialogTitle","Box","OutlinedInput","InputAdornment","useTheme","IconSearch","IconX","baseURL","HIDE_CANVAS_DIALOG","SHOW_CANVAS_DIALOG","jsx","_jsx","jsxs","_jsxs","CredentialListDialog","_ref","show","dialogProps","onCancel","onCredentialSelected","portalElement","document","getElementById","customization","state","dispatch","theme","searchValue","setSearchValue","componentsCredentials","setComponentsCredentials","filterSearch","value","setTimeout","searchData","filter","crd","name","toLowerCase","includes","type","component","fullWidth","maxWidth","open","onClose","children","sx","fontSize","id","title","p","width","pr","pl","my","onChange","e","target","placeholder","startAdornment","position","stroke","size","color","palette","grey","endAdornment","cursor","onClick","style","inputProps","py","borderRadius","breakpoints","down","top","map","componentCredential","concat","alignItems","height","backgroundColor","padding","objectFit","alt","src","ml","primary","label"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/packages/ui/src/views/credentials/CredentialListDialog.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport {\n    List,\n    ListItemButton,\n    ListItem,\n    ListItemAvatar,\n    ListItemText,\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    Box,\n    OutlinedInput,\n    InputAdornment\n} from '@mui/material'\nimport { useTheme } from '@mui/material/styles'\nimport { IconSearch, IconX } from '@tabler/icons'\n\n// const\nimport { baseURL } from 'store/constant'\nimport { HIDE_CANVAS_DIALOG, SHOW_CANVAS_DIALOG } from 'store/actions'\n\nconst CredentialListDialog = ({ show, dialogProps, onCancel, onCredentialSelected }) => {\n    const portalElement = document.getElementById('portal')\n    const customization = useSelector((state) => state.customization)\n    const dispatch = useDispatch()\n    const theme = useTheme()\n    const [searchValue, setSearchValue] = useState('')\n    const [componentsCredentials, setComponentsCredentials] = useState([])\n\n    const filterSearch = (value) => {\n        setSearchValue(value)\n        setTimeout(() => {\n            if (value) {\n                const searchData = dialogProps.componentsCredentials.filter((crd) => crd.name.toLowerCase().includes(value.toLowerCase()))\n                setComponentsCredentials(searchData)\n            } else if (value === '') {\n                setComponentsCredentials(dialogProps.componentsCredentials)\n            }\n            // scrollTop()\n        }, 500)\n    }\n\n    useEffect(() => {\n        if (dialogProps.componentsCredentials) {\n            setComponentsCredentials(dialogProps.componentsCredentials)\n        }\n    }, [dialogProps])\n\n    useEffect(() => {\n        if (show) dispatch({ type: SHOW_CANVAS_DIALOG })\n        else dispatch({ type: HIDE_CANVAS_DIALOG })\n        return () => dispatch({ type: HIDE_CANVAS_DIALOG })\n    }, [show, dispatch])\n\n    const component = show ? (\n        <Dialog\n            fullWidth\n            maxWidth='xs'\n            open={show}\n            onClose={onCancel}\n            aria-labelledby='alert-dialog-title'\n            aria-describedby='alert-dialog-description'\n        >\n            <DialogTitle sx={{ fontSize: '1rem' }} id='alert-dialog-title'>\n                {dialogProps.title}\n                <Box sx={{ p: 2 }}>\n                    <OutlinedInput\n                        sx={{ width: '100%', pr: 2, pl: 2, my: 2 }}\n                        id='input-search-credential'\n                        value={searchValue}\n                        onChange={(e) => filterSearch(e.target.value)}\n                        placeholder='Search credential'\n                        startAdornment={\n                            <InputAdornment position='start'>\n                                <IconSearch stroke={1.5} size='1rem' color={theme.palette.grey[500]} />\n                            </InputAdornment>\n                        }\n                        endAdornment={\n                            <InputAdornment\n                                position='end'\n                                sx={{\n                                    cursor: 'pointer',\n                                    color: theme.palette.grey[500],\n                                    '&:hover': {\n                                        color: theme.palette.grey[900]\n                                    }\n                                }}\n                                title='Clear Search'\n                            >\n                                <IconX\n                                    stroke={1.5}\n                                    size='1rem'\n                                    onClick={() => filterSearch('')}\n                                    style={{\n                                        cursor: 'pointer'\n                                    }}\n                                />\n                            </InputAdornment>\n                        }\n                        aria-describedby='search-helper-text'\n                        inputProps={{\n                            'aria-label': 'weight'\n                        }}\n                    />\n                </Box>\n            </DialogTitle>\n            <DialogContent>\n                <List\n                    sx={{\n                        width: '100%',\n                        py: 0,\n                        borderRadius: '10px',\n                        [theme.breakpoints.down('md')]: {\n                            maxWidth: 370\n                        },\n                        '& .MuiListItemSecondaryAction-root': {\n                            top: 22\n                        },\n                        '& .MuiDivider-root': {\n                            my: 0\n                        },\n                        '& .list-container': {\n                            pl: 7\n                        }\n                    }}\n                >\n                    {[...componentsCredentials].map((componentCredential) => (\n                        <div key={componentCredential.name}>\n                            <ListItemButton\n                                onClick={() => onCredentialSelected(componentCredential)}\n                                sx={{ p: 0, borderRadius: `${customization.borderRadius}px` }}\n                            >\n                                <ListItem alignItems='center'>\n                                    <ListItemAvatar>\n                                        <div\n                                            style={{\n                                                width: 50,\n                                                height: 50,\n                                                borderRadius: '50%',\n                                                backgroundColor: 'white'\n                                            }}\n                                        >\n                                            <img\n                                                style={{\n                                                    width: '100%',\n                                                    height: '100%',\n                                                    padding: 7,\n                                                    borderRadius: '50%',\n                                                    objectFit: 'contain'\n                                                }}\n                                                alt={componentCredential.name}\n                                                src={`${baseURL}/api/v1/components-credentials-icon/${componentCredential.name}`}\n                                            />\n                                        </div>\n                                    </ListItemAvatar>\n                                    <ListItemText sx={{ ml: 1 }} primary={componentCredential.label} />\n                                </ListItem>\n                            </ListItemButton>\n                        </div>\n                    ))}\n                </List>\n            </DialogContent>\n        </Dialog>\n    ) : null\n\n    return createPortal(component, portalElement)\n}\n\nCredentialListDialog.propTypes = {\n    show: PropTypes.bool,\n    dialogProps: PropTypes.object,\n    onCancel: PropTypes.func,\n    onCredentialSelected: PropTypes.func\n}\n\nexport default CredentialListDialog\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,YAAY,KAAQ,WAAW,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD,OACIC,IAAI,CACJC,cAAc,CACdC,QAAQ,CACRC,cAAc,CACdC,YAAY,CACZC,MAAM,CACNC,aAAa,CACbC,WAAW,CACXC,GAAG,CACHC,aAAa,CACbC,cAAc,KACX,eAAe,CACtB,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,OAASC,UAAU,CAAEC,KAAK,KAAQ,eAAe,CAEjD;AACA,OAASC,OAAO,KAAQ,gBAAgB,CACxC,OAASC,kBAAkB,CAAEC,kBAAkB,KAAQ,eAAe,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtE,KAAM,CAAAC,oBAAoB,CAAGC,IAAA,EAA2D,IAA1D,CAAEC,IAAI,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,oBAAqB,CAAC,CAAAJ,IAAA,CAC/E,KAAM,CAAAK,aAAa,CAAGC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CACvD,KAAM,CAAAC,aAAa,CAAGhC,WAAW,CAAEiC,KAAK,EAAKA,KAAK,CAACD,aAAa,CAAC,CACjE,KAAM,CAAAE,QAAQ,CAAGjC,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAkC,KAAK,CAAGtB,QAAQ,CAAC,CAAC,CACxB,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxC,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACyC,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CAEtE,KAAM,CAAA2C,YAAY,CAAIC,KAAK,EAAK,CAC5BJ,cAAc,CAACI,KAAK,CAAC,CACrBC,UAAU,CAAC,IAAM,CACb,GAAID,KAAK,CAAE,CACP,KAAM,CAAAE,UAAU,CAAGjB,WAAW,CAACY,qBAAqB,CAACM,MAAM,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACP,KAAK,CAACM,WAAW,CAAC,CAAC,CAAC,CAAC,CAC1HR,wBAAwB,CAACI,UAAU,CAAC,CACxC,CAAC,IAAM,IAAIF,KAAK,GAAK,EAAE,CAAE,CACrBF,wBAAwB,CAACb,WAAW,CAACY,qBAAqB,CAAC,CAC/D,CACA;AACJ,CAAC,CAAE,GAAG,CAAC,CACX,CAAC,CAEDxC,SAAS,CAAC,IAAM,CACZ,GAAI4B,WAAW,CAACY,qBAAqB,CAAE,CACnCC,wBAAwB,CAACb,WAAW,CAACY,qBAAqB,CAAC,CAC/D,CACJ,CAAC,CAAE,CAACZ,WAAW,CAAC,CAAC,CAEjB5B,SAAS,CAAC,IAAM,CACZ,GAAI2B,IAAI,CAAES,QAAQ,CAAC,CAAEe,IAAI,CAAE/B,kBAAmB,CAAC,CAAC,KAC3C,CAAAgB,QAAQ,CAAC,CAAEe,IAAI,CAAEhC,kBAAmB,CAAC,CAAC,CAC3C,MAAO,IAAMiB,QAAQ,CAAC,CAAEe,IAAI,CAAEhC,kBAAmB,CAAC,CAAC,CACvD,CAAC,CAAE,CAACQ,IAAI,CAAES,QAAQ,CAAC,CAAC,CAEpB,KAAM,CAAAgB,SAAS,CAAGzB,IAAI,cAClBH,KAAA,CAACf,MAAM,EACH4C,SAAS,MACTC,QAAQ,CAAC,IAAI,CACbC,IAAI,CAAE5B,IAAK,CACX6B,OAAO,CAAE3B,QAAS,CAClB,kBAAgB,oBAAoB,CACpC,mBAAiB,0BAA0B,CAAA4B,QAAA,eAE3CjC,KAAA,CAACb,WAAW,EAAC+C,EAAE,CAAE,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAACC,EAAE,CAAC,oBAAoB,CAAAH,QAAA,EACzD7B,WAAW,CAACiC,KAAK,cAClBvC,IAAA,CAACV,GAAG,EAAC8C,EAAE,CAAE,CAAEI,CAAC,CAAE,CAAE,CAAE,CAAAL,QAAA,cACdnC,IAAA,CAACT,aAAa,EACV6C,EAAE,CAAE,CAAEK,KAAK,CAAE,MAAM,CAAEC,EAAE,CAAE,CAAC,CAAEC,EAAE,CAAE,CAAC,CAAEC,EAAE,CAAE,CAAE,CAAE,CAC3CN,EAAE,CAAC,yBAAyB,CAC5BjB,KAAK,CAAEL,WAAY,CACnB6B,QAAQ,CAAGC,CAAC,EAAK1B,YAAY,CAAC0B,CAAC,CAACC,MAAM,CAAC1B,KAAK,CAAE,CAC9C2B,WAAW,CAAC,mBAAmB,CAC/BC,cAAc,cACVjD,IAAA,CAACR,cAAc,EAAC0D,QAAQ,CAAC,OAAO,CAAAf,QAAA,cAC5BnC,IAAA,CAACN,UAAU,EAACyD,MAAM,CAAE,GAAI,CAACC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEtC,KAAK,CAACuC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAE,CAAE,CAAC,CAC3D,CACnB,CACDC,YAAY,cACRxD,IAAA,CAACR,cAAc,EACX0D,QAAQ,CAAC,KAAK,CACdd,EAAE,CAAE,CACAqB,MAAM,CAAE,SAAS,CACjBJ,KAAK,CAAEtC,KAAK,CAACuC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC,CAC9B,SAAS,CAAE,CACPF,KAAK,CAAEtC,KAAK,CAACuC,OAAO,CAACC,IAAI,CAAC,GAAG,CACjC,CACJ,CAAE,CACFhB,KAAK,CAAC,cAAc,CAAAJ,QAAA,cAEpBnC,IAAA,CAACL,KAAK,EACFwD,MAAM,CAAE,GAAI,CACZC,IAAI,CAAC,MAAM,CACXM,OAAO,CAAEA,CAAA,GAAMtC,YAAY,CAAC,EAAE,CAAE,CAChCuC,KAAK,CAAE,CACHF,MAAM,CAAE,SACZ,CAAE,CACL,CAAC,CACU,CACnB,CACD,mBAAiB,oBAAoB,CACrCG,UAAU,CAAE,CACR,YAAY,CAAE,QAClB,CAAE,CACL,CAAC,CACD,CAAC,EACG,CAAC,cACd5D,IAAA,CAACZ,aAAa,EAAA+C,QAAA,cACVnC,IAAA,CAAClB,IAAI,EACDsD,EAAE,CAAE,CACAK,KAAK,CAAE,MAAM,CACboB,EAAE,CAAE,CAAC,CACLC,YAAY,CAAE,MAAM,CACpB,CAAC/C,KAAK,CAACgD,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC,EAAG,CAC5BhC,QAAQ,CAAE,GACd,CAAC,CACD,oCAAoC,CAAE,CAClCiC,GAAG,CAAE,EACT,CAAC,CACD,oBAAoB,CAAE,CAClBrB,EAAE,CAAE,CACR,CAAC,CACD,mBAAmB,CAAE,CACjBD,EAAE,CAAE,CACR,CACJ,CAAE,CAAAR,QAAA,CAED,CAAC,GAAGjB,qBAAqB,CAAC,CAACgD,GAAG,CAAEC,mBAAmB,eAChDnE,IAAA,QAAAmC,QAAA,cACInC,IAAA,CAACjB,cAAc,EACX2E,OAAO,CAAEA,CAAA,GAAMlD,oBAAoB,CAAC2D,mBAAmB,CAAE,CACzD/B,EAAE,CAAE,CAAEI,CAAC,CAAE,CAAC,CAAEsB,YAAY,IAAAM,MAAA,CAAKxD,aAAa,CAACkD,YAAY,MAAK,CAAE,CAAA3B,QAAA,cAE9DjC,KAAA,CAAClB,QAAQ,EAACqF,UAAU,CAAC,QAAQ,CAAAlC,QAAA,eACzBnC,IAAA,CAACf,cAAc,EAAAkD,QAAA,cACXnC,IAAA,QACI2D,KAAK,CAAE,CACHlB,KAAK,CAAE,EAAE,CACT6B,MAAM,CAAE,EAAE,CACVR,YAAY,CAAE,KAAK,CACnBS,eAAe,CAAE,OACrB,CAAE,CAAApC,QAAA,cAEFnC,IAAA,QACI2D,KAAK,CAAE,CACHlB,KAAK,CAAE,MAAM,CACb6B,MAAM,CAAE,MAAM,CACdE,OAAO,CAAE,CAAC,CACVV,YAAY,CAAE,KAAK,CACnBW,SAAS,CAAE,SACf,CAAE,CACFC,GAAG,CAAEP,mBAAmB,CAACzC,IAAK,CAC9BiD,GAAG,IAAAP,MAAA,CAAKxE,OAAO,yCAAAwE,MAAA,CAAuCD,mBAAmB,CAACzC,IAAI,CAAG,CACpF,CAAC,CACD,CAAC,CACM,CAAC,cACjB1B,IAAA,CAACd,YAAY,EAACkD,EAAE,CAAE,CAAEwC,EAAE,CAAE,CAAE,CAAE,CAACC,OAAO,CAAEV,mBAAmB,CAACW,KAAM,CAAE,CAAC,EAC7D,CAAC,CACC,CAAC,EA9BXX,mBAAmB,CAACzC,IA+BzB,CACR,CAAC,CACA,CAAC,CACI,CAAC,EACZ,CAAC,CACT,IAAI,CAER,mBAAO/C,YAAY,CAACmD,SAAS,CAAErB,aAAa,CAAC,CACjD,CAAC,CASD,cAAe,CAAAN,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}