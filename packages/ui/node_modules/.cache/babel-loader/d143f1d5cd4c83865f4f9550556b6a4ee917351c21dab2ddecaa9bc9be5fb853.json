{"ast":null,"code":"import{forwardRef,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';// material-ui\nimport{useTheme}from'@mui/material/styles';import{Avatar,Chip,ListItemButton,ListItemIcon,ListItemText,Typography,useMediaQuery}from'@mui/material';// project imports\nimport{MENU_OPEN,SET_MENU}from'store/actions';import config from'config';// assets\nimport FiberManualRecordIcon from'@mui/icons-material/FiberManualRecord';// ==============================|| SIDEBAR MENU LIST ITEMS ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const NavItem=_ref=>{let{item,level,navType,onClick,onUploadFile}=_ref;const theme=useTheme();const dispatch=useDispatch();const customization=useSelector(state=>state.customization);const matchesSM=useMediaQuery(theme.breakpoints.down('lg'));const Icon=item.icon;const itemIcon=item!==null&&item!==void 0&&item.icon?/*#__PURE__*/_jsx(Icon,{stroke:1.5,size:\"1.3rem\"}):/*#__PURE__*/_jsx(FiberManualRecordIcon,{sx:{width:customization.isOpen.findIndex(id=>id===(item===null||item===void 0?void 0:item.id))>-1?8:6,height:customization.isOpen.findIndex(id=>id===(item===null||item===void 0?void 0:item.id))>-1?8:6},fontSize:level>0?'inherit':'medium'});let itemTarget='_self';if(item.target){itemTarget='_blank';}let listItemProps={component:/*#__PURE__*/forwardRef(function ListItemPropsComponent(props,ref){return/*#__PURE__*/_jsx(Link,{ref:ref,...props,to:\"\".concat(config.basename).concat(item.url),target:itemTarget});})};if(item!==null&&item!==void 0&&item.external){listItemProps={component:'a',href:item.url,target:itemTarget};}if((item===null||item===void 0?void 0:item.id)==='loadChatflow'){listItemProps.component='label';}const handleFileUpload=e=>{if(!e.target.files)return;const file=e.target.files[0];const reader=new FileReader();reader.onload=evt=>{var _evt$target;if(!(evt!==null&&evt!==void 0&&(_evt$target=evt.target)!==null&&_evt$target!==void 0&&_evt$target.result)){return;}const{result}=evt.target;onUploadFile(result);};reader.readAsText(file);};const itemHandler=id=>{if(navType==='SETTINGS'&&id!=='loadChatflow'){onClick(id);}else{dispatch({type:MENU_OPEN,id});if(matchesSM)dispatch({type:SET_MENU,opened:false});}};// active menu item on page load\nuseEffect(()=>{if(navType==='MENU'){const currentIndex=document.location.pathname.toString().split('/').findIndex(id=>id===item.id);if(currentIndex>-1){dispatch({type:MENU_OPEN,id:item.id});}if(!document.location.pathname.toString().split('/')[1]){itemHandler('chatflows');}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[navType]);return/*#__PURE__*/_jsxs(ListItemButton,{...listItemProps,disabled:item.disabled,sx:{borderRadius:\"\".concat(customization.borderRadius,\"px\"),mb:0.5,alignItems:'flex-start',backgroundColor:level>1?'transparent !important':'inherit',py:level>1?1:1.25,pl:\"\".concat(level*24,\"px\")},selected:customization.isOpen.findIndex(id=>id===item.id)>-1,onClick:()=>itemHandler(item.id),children:[item.id==='loadChatflow'&&/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\".json\",onChange:e=>handleFileUpload(e)}),/*#__PURE__*/_jsx(ListItemIcon,{sx:{my:'auto',minWidth:!(item!==null&&item!==void 0&&item.icon)?18:36},children:itemIcon}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(Typography,{variant:customization.isOpen.findIndex(id=>id===item.id)>-1?'h5':'body1',color:\"inherit\",children:item.title}),secondary:item.caption&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{...theme.typography.subMenuCaption},display:\"block\",gutterBottom:true,children:item.caption})}),item.chip&&/*#__PURE__*/_jsx(Chip,{color:item.chip.color,variant:item.chip.variant,size:item.chip.size,label:item.chip.label,avatar:item.chip.avatar&&/*#__PURE__*/_jsx(Avatar,{children:item.chip.avatar})})]});};export default NavItem;","map":{"version":3,"names":["forwardRef","useEffect","Link","useDispatch","useSelector","useTheme","Avatar","Chip","ListItemButton","ListItemIcon","ListItemText","Typography","useMediaQuery","MENU_OPEN","SET_MENU","config","FiberManualRecordIcon","jsx","_jsx","jsxs","_jsxs","NavItem","_ref","item","level","navType","onClick","onUploadFile","theme","dispatch","customization","state","matchesSM","breakpoints","down","Icon","icon","itemIcon","stroke","size","sx","width","isOpen","findIndex","id","height","fontSize","itemTarget","target","listItemProps","component","ListItemPropsComponent","props","ref","to","concat","basename","url","external","href","handleFileUpload","e","files","file","reader","FileReader","onload","evt","_evt$target","result","readAsText","itemHandler","type","opened","currentIndex","document","location","pathname","toString","split","disabled","borderRadius","mb","alignItems","backgroundColor","py","pl","selected","children","hidden","accept","onChange","my","minWidth","primary","variant","color","title","secondary","caption","typography","subMenuCaption","display","gutterBottom","chip","label","avatar"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/packages/ui/src/layout/MainLayout/Sidebar/MenuList/NavItem/index.js"],"sourcesContent":["import PropTypes from 'prop-types'\nimport { forwardRef, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\n\n// material-ui\nimport { useTheme } from '@mui/material/styles'\nimport { Avatar, Chip, ListItemButton, ListItemIcon, ListItemText, Typography, useMediaQuery } from '@mui/material'\n\n// project imports\nimport { MENU_OPEN, SET_MENU } from 'store/actions'\nimport config from 'config'\n\n// assets\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord'\n\n// ==============================|| SIDEBAR MENU LIST ITEMS ||============================== //\n\nconst NavItem = ({ item, level, navType, onClick, onUploadFile }) => {\n    const theme = useTheme()\n    const dispatch = useDispatch()\n    const customization = useSelector((state) => state.customization)\n    const matchesSM = useMediaQuery(theme.breakpoints.down('lg'))\n\n    const Icon = item.icon\n    const itemIcon = item?.icon ? (\n        <Icon stroke={1.5} size='1.3rem' />\n    ) : (\n        <FiberManualRecordIcon\n            sx={{\n                width: customization.isOpen.findIndex((id) => id === item?.id) > -1 ? 8 : 6,\n                height: customization.isOpen.findIndex((id) => id === item?.id) > -1 ? 8 : 6\n            }}\n            fontSize={level > 0 ? 'inherit' : 'medium'}\n        />\n    )\n\n    let itemTarget = '_self'\n    if (item.target) {\n        itemTarget = '_blank'\n    }\n\n    let listItemProps = {\n        component: forwardRef(function ListItemPropsComponent(props, ref) {\n            return <Link ref={ref} {...props} to={`${config.basename}${item.url}`} target={itemTarget} />\n        })\n    }\n    if (item?.external) {\n        listItemProps = { component: 'a', href: item.url, target: itemTarget }\n    }\n    if (item?.id === 'loadChatflow') {\n        listItemProps.component = 'label'\n    }\n\n    const handleFileUpload = (e) => {\n        if (!e.target.files) return\n\n        const file = e.target.files[0]\n\n        const reader = new FileReader()\n        reader.onload = (evt) => {\n            if (!evt?.target?.result) {\n                return\n            }\n            const { result } = evt.target\n            onUploadFile(result)\n        }\n        reader.readAsText(file)\n    }\n\n    const itemHandler = (id) => {\n        if (navType === 'SETTINGS' && id !== 'loadChatflow') {\n            onClick(id)\n        } else {\n            dispatch({ type: MENU_OPEN, id })\n            if (matchesSM) dispatch({ type: SET_MENU, opened: false })\n        }\n    }\n\n    // active menu item on page load\n    useEffect(() => {\n        if (navType === 'MENU') {\n            const currentIndex = document.location.pathname\n                .toString()\n                .split('/')\n                .findIndex((id) => id === item.id)\n            if (currentIndex > -1) {\n                dispatch({ type: MENU_OPEN, id: item.id })\n            }\n            if (!document.location.pathname.toString().split('/')[1]) {\n                itemHandler('chatflows')\n            }\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [navType])\n\n    return (\n        <ListItemButton\n            {...listItemProps}\n            disabled={item.disabled}\n            sx={{\n                borderRadius: `${customization.borderRadius}px`,\n                mb: 0.5,\n                alignItems: 'flex-start',\n                backgroundColor: level > 1 ? 'transparent !important' : 'inherit',\n                py: level > 1 ? 1 : 1.25,\n                pl: `${level * 24}px`\n            }}\n            selected={customization.isOpen.findIndex((id) => id === item.id) > -1}\n            onClick={() => itemHandler(item.id)}\n        >\n            {item.id === 'loadChatflow' && <input type='file' hidden accept='.json' onChange={(e) => handleFileUpload(e)} />}\n            <ListItemIcon sx={{ my: 'auto', minWidth: !item?.icon ? 18 : 36 }}>{itemIcon}</ListItemIcon>\n            <ListItemText\n                primary={\n                    <Typography variant={customization.isOpen.findIndex((id) => id === item.id) > -1 ? 'h5' : 'body1'} color='inherit'>\n                        {item.title}\n                    </Typography>\n                }\n                secondary={\n                    item.caption && (\n                        <Typography variant='caption' sx={{ ...theme.typography.subMenuCaption }} display='block' gutterBottom>\n                            {item.caption}\n                        </Typography>\n                    )\n                }\n            />\n            {item.chip && (\n                <Chip\n                    color={item.chip.color}\n                    variant={item.chip.variant}\n                    size={item.chip.size}\n                    label={item.chip.label}\n                    avatar={item.chip.avatar && <Avatar>{item.chip.avatar}</Avatar>}\n                />\n            )}\n        </ListItemButton>\n    )\n}\n\nNavItem.propTypes = {\n    item: PropTypes.object,\n    level: PropTypes.number,\n    navType: PropTypes.string,\n    onClick: PropTypes.func,\n    onUploadFile: PropTypes.func\n}\n\nexport default NavItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}