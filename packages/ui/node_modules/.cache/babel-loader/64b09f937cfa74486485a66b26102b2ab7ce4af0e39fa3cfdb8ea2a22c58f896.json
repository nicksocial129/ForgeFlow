{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HTMLMathItem = void 0;\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\nvar HTMLMathItem = function (_super) {\n  __extends(HTMLMathItem, _super);\n  function HTMLMathItem(math, jax, display, start, end) {\n    if (display === void 0) {\n      display = true;\n    }\n    if (start === void 0) {\n      start = {\n        node: null,\n        n: 0,\n        delim: ''\n      };\n    }\n    if (end === void 0) {\n      end = {\n        node: null,\n        n: 0,\n        delim: ''\n      };\n    }\n    return _super.call(this, math, jax, display, start, end) || this;\n  }\n  Object.defineProperty(HTMLMathItem.prototype, \"adaptor\", {\n    get: function () {\n      return this.inputJax.adaptor;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  HTMLMathItem.prototype.updateDocument = function (_html) {\n    if (this.state() < MathItem_js_1.STATE.INSERTED) {\n      if (this.inputJax.processStrings) {\n        var node = this.start.node;\n        if (node === this.end.node) {\n          if (this.end.n && this.end.n < this.adaptor.value(this.end.node).length) {\n            this.adaptor.split(this.end.node, this.end.n);\n          }\n          if (this.start.n) {\n            node = this.adaptor.split(this.start.node, this.start.n);\n          }\n          this.adaptor.replace(this.typesetRoot, node);\n        } else {\n          if (this.start.n) {\n            node = this.adaptor.split(node, this.start.n);\n          }\n          while (node !== this.end.node) {\n            var next = this.adaptor.next(node);\n            this.adaptor.remove(node);\n            node = next;\n          }\n          this.adaptor.insert(this.typesetRoot, node);\n          if (this.end.n < this.adaptor.value(node).length) {\n            this.adaptor.split(node, this.end.n);\n          }\n          this.adaptor.remove(node);\n        }\n      } else {\n        this.adaptor.replace(this.typesetRoot, this.start.node);\n      }\n      this.start.node = this.end.node = this.typesetRoot;\n      this.start.n = this.end.n = 0;\n      this.state(MathItem_js_1.STATE.INSERTED);\n    }\n  };\n  HTMLMathItem.prototype.updateStyleSheet = function (document) {\n    document.addStyleSheet();\n  };\n  HTMLMathItem.prototype.removeFromDocument = function (restore) {\n    if (restore === void 0) {\n      restore = false;\n    }\n    if (this.state() >= MathItem_js_1.STATE.TYPESET) {\n      var adaptor = this.adaptor;\n      var node = this.start.node;\n      var math = adaptor.text('');\n      if (restore) {\n        var text = this.start.delim + this.math + this.end.delim;\n        if (this.inputJax.processStrings) {\n          math = adaptor.text(text);\n        } else {\n          var doc = adaptor.parse(text, 'text/html');\n          math = adaptor.firstChild(adaptor.body(doc));\n        }\n      }\n      if (adaptor.parent(node)) {\n        adaptor.replace(math, node);\n      }\n      this.start.node = this.end.node = math;\n      this.start.n = this.end.n = 0;\n    }\n  };\n  return HTMLMathItem;\n}(MathItem_js_1.AbstractMathItem);\nexports.HTMLMathItem = HTMLMathItem;","map":{"version":3,"names":["MathItem_js_1","require","HTMLMathItem","_super","__extends","math","jax","display","start","end","node","n","delim","call","Object","defineProperty","prototype","get","inputJax","adaptor","updateDocument","_html","state","STATE","INSERTED","processStrings","value","length","split","replace","typesetRoot","next","remove","insert","updateStyleSheet","document","addStyleSheet","removeFromDocument","restore","TYPESET","text","doc","parse","firstChild","body","parent","AbstractMathItem","exports"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/node_modules/mathjax-full/ts/handlers/html/HTMLMathItem.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2017-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the HTMLMathItem class\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {AbstractMathItem, Location, STATE} from '../../core/MathItem.js';\nimport {InputJax} from '../../core/InputJax.js';\nimport {HTMLDocument} from './HTMLDocument.js';\n\n/*****************************************************************/\n/**\n *  Implements the HTMLMathItem class (extends AbstractMathItem)\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\nexport class HTMLMathItem<N, T, D> extends AbstractMathItem<N, T, D> {\n\n  /**\n   * Easy access to DOM adaptor\n   */\n  get adaptor() {\n    return this.inputJax.adaptor;\n  }\n\n  /**\n   * @override\n   */\n  constructor(math: string, jax: InputJax<N, T, D>, display: boolean = true,\n              start: Location<N, T> = {node: null, n: 0, delim: ''},\n              end: Location<N, T> = {node: null, n: 0, delim: ''}) {\n    super(math, jax, display, start, end);\n  }\n\n  /**\n   * Insert the typeset MathItem into the document at the right location\n   *   If the starting and ending nodes are the same:\n   *     Split the text to isolate the math and its delimiters\n   *     Replace the math by the typeset version\n   *   Otherewise (spread over several nodes)\n   *     Split the start node, if needed\n   *     Remove nodes until we reach the end node\n   *     Insert the math before the end node\n   *     Split the end node, if needed\n   *     Remove the end node\n   *\n   * @override\n   */\n  public updateDocument(_html: HTMLDocument<N, T, D>) {\n    if (this.state() < STATE.INSERTED) {\n      if (this.inputJax.processStrings) {\n        let node = this.start.node as T;\n        if (node === this.end.node) {\n          if (this.end.n && this.end.n < this.adaptor.value(this.end.node).length) {\n            this.adaptor.split(this.end.node, this.end.n);\n          }\n          if (this.start.n) {\n            node = this.adaptor.split(this.start.node as T, this.start.n);\n          }\n          this.adaptor.replace(this.typesetRoot, node);\n        } else {\n          if (this.start.n) {\n            node = this.adaptor.split(node, this.start.n);\n          }\n          while (node !== this.end.node) {\n            let next = this.adaptor.next(node) as T;\n            this.adaptor.remove(node);\n            node = next;\n          }\n          this.adaptor.insert(this.typesetRoot, node);\n          if (this.end.n < this.adaptor.value(node).length) {\n            this.adaptor.split(node, this.end.n);\n          }\n          this.adaptor.remove(node);\n        }\n      } else {\n        this.adaptor.replace(this.typesetRoot, this.start.node);\n      }\n      this.start.node = this.end.node = this.typesetRoot;\n      this.start.n = this.end.n = 0;\n      this.state(STATE.INSERTED);\n    }\n  }\n\n  /**\n   * Update the style sheet for any changes due to rerendering\n   *\n   * @param {HTMLDocument} document   The document whose styles are to be updated\n   */\n  public updateStyleSheet(document: HTMLDocument<N, T, D>) {\n    document.addStyleSheet();\n  }\n\n  /**\n   * Remove the typeset math from the document, and put back the original\n   *  expression and its delimiters, if requested.\n   *\n   * @override\n   */\n  public removeFromDocument(restore: boolean = false) {\n    if (this.state() >= STATE.TYPESET) {\n      const adaptor = this.adaptor;\n      let node = this.start.node;\n      let math: N | T = adaptor.text('');\n      if (restore) {\n        let text = this.start.delim + this.math + this.end.delim;\n        if (this.inputJax.processStrings) {\n          math = adaptor.text(text);\n        } else {\n          const doc = adaptor.parse(text, 'text/html');\n          math = adaptor.firstChild(adaptor.body(doc));\n        }\n      }\n      if (adaptor.parent(node)) {\n        adaptor.replace(math, node);\n      }\n      this.start.node = this.end.node = math;\n      this.start.n = this.end.n = 0;\n    }\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}