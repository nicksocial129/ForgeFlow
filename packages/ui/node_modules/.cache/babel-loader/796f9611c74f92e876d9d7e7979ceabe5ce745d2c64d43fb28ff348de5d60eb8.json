{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonOutputJax = void 0;\nvar OutputJax_js_1 = require(\"../../core/OutputJax.js\");\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\nvar Options_js_1 = require(\"../../util/Options.js\");\nvar lengths_js_1 = require(\"../../util/lengths.js\");\nvar Styles_js_1 = require(\"../../util/Styles.js\");\nvar StyleList_js_1 = require(\"../../util/StyleList.js\");\nvar CommonOutputJax = function (_super) {\n  __extends(CommonOutputJax, _super);\n  function CommonOutputJax(options, defaultFactory, defaultFont) {\n    if (options === void 0) {\n      options = null;\n    }\n    if (defaultFactory === void 0) {\n      defaultFactory = null;\n    }\n    if (defaultFont === void 0) {\n      defaultFont = null;\n    }\n    var _this = this;\n    var _a = __read((0, Options_js_1.separateOptions)(options, defaultFont.OPTIONS), 2),\n      jaxOptions = _a[0],\n      fontOptions = _a[1];\n    _this = _super.call(this, jaxOptions) || this;\n    _this.factory = _this.options.wrapperFactory || new defaultFactory();\n    _this.factory.jax = _this;\n    _this.cssStyles = _this.options.cssStyles || new StyleList_js_1.CssStyles();\n    _this.font = _this.options.font || new defaultFont(fontOptions);\n    _this.unknownCache = new Map();\n    return _this;\n  }\n  CommonOutputJax.prototype.typeset = function (math, html) {\n    this.setDocument(html);\n    var node = this.createNode();\n    this.toDOM(math, node, html);\n    return node;\n  };\n  CommonOutputJax.prototype.createNode = function () {\n    var jax = this.constructor.NAME;\n    return this.html('mjx-container', {\n      'class': 'MathJax',\n      jax: jax\n    });\n  };\n  CommonOutputJax.prototype.setScale = function (node) {\n    var scale = this.math.metrics.scale * this.options.scale;\n    if (scale !== 1) {\n      this.adaptor.setStyle(node, 'fontSize', (0, lengths_js_1.percent)(scale));\n    }\n  };\n  CommonOutputJax.prototype.toDOM = function (math, node, html) {\n    if (html === void 0) {\n      html = null;\n    }\n    this.setDocument(html);\n    this.math = math;\n    this.pxPerEm = math.metrics.ex / this.font.params.x_height;\n    math.root.setTeXclass(null);\n    this.setScale(node);\n    this.nodeMap = new Map();\n    this.container = node;\n    this.processMath(math.root, node);\n    this.nodeMap = null;\n    this.executeFilters(this.postFilters, math, html, node);\n  };\n  CommonOutputJax.prototype.getBBox = function (math, html) {\n    this.setDocument(html);\n    this.math = math;\n    math.root.setTeXclass(null);\n    this.nodeMap = new Map();\n    var bbox = this.factory.wrap(math.root).getOuterBBox();\n    this.nodeMap = null;\n    return bbox;\n  };\n  CommonOutputJax.prototype.getMetrics = function (html) {\n    var e_1, _a;\n    this.setDocument(html);\n    var adaptor = this.adaptor;\n    var maps = this.getMetricMaps(html);\n    try {\n      for (var _b = __values(html.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var math = _c.value;\n        var parent_1 = adaptor.parent(math.start.node);\n        if (math.state() < MathItem_js_1.STATE.METRICS && parent_1) {\n          var map = maps[math.display ? 1 : 0];\n          var _d = map.get(parent_1),\n            em = _d.em,\n            ex = _d.ex,\n            containerWidth = _d.containerWidth,\n            lineWidth = _d.lineWidth,\n            scale = _d.scale,\n            family = _d.family;\n          math.setMetrics(em, ex, containerWidth, lineWidth, scale);\n          if (this.options.mtextInheritFont) {\n            math.outputData.mtextFamily = family;\n          }\n          if (this.options.merrorInheritFont) {\n            math.outputData.merrorFamily = family;\n          }\n          math.state(MathItem_js_1.STATE.METRICS);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  CommonOutputJax.prototype.getMetricsFor = function (node, display) {\n    var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;\n    var test = this.getTestElement(node, display);\n    var metrics = this.measureMetrics(test, getFamily);\n    this.adaptor.remove(test);\n    return metrics;\n  };\n  CommonOutputJax.prototype.getMetricMaps = function (html) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d, e_6, _e;\n    var adaptor = this.adaptor;\n    var domMaps = [new Map(), new Map()];\n    try {\n      for (var _f = __values(html.math), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var math = _g.value;\n        var node = adaptor.parent(math.start.node);\n        if (node && math.state() < MathItem_js_1.STATE.METRICS) {\n          var map = domMaps[math.display ? 1 : 0];\n          if (!map.has(node)) {\n            map.set(node, this.getTestElement(node, math.display));\n          }\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n    var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;\n    var maps = [new Map(), new Map()];\n    try {\n      for (var _h = __values(maps.keys()), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var i = _j.value;\n        try {\n          for (var _k = (e_4 = void 0, __values(domMaps[i].keys())), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var node = _l.value;\n            maps[i].set(node, this.measureMetrics(domMaps[i].get(node), getFamily));\n          }\n        } catch (e_4_1) {\n          e_4 = {\n            error: e_4_1\n          };\n        } finally {\n          try {\n            if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n          } finally {\n            if (e_4) throw e_4.error;\n          }\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n    try {\n      for (var _m = __values(maps.keys()), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var i = _o.value;\n        try {\n          for (var _p = (e_6 = void 0, __values(domMaps[i].values())), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var node = _q.value;\n            adaptor.remove(node);\n          }\n        } catch (e_6_1) {\n          e_6 = {\n            error: e_6_1\n          };\n        } finally {\n          try {\n            if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n          } finally {\n            if (e_6) throw e_6.error;\n          }\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n    return maps;\n  };\n  CommonOutputJax.prototype.getTestElement = function (node, display) {\n    var adaptor = this.adaptor;\n    if (!this.testInline) {\n      this.testInline = this.html('mjx-test', {\n        style: {\n          display: 'inline-block',\n          width: '100%',\n          'font-style': 'normal',\n          'font-weight': 'normal',\n          'font-size': '100%',\n          'font-size-adjust': 'none',\n          'text-indent': 0,\n          'text-transform': 'none',\n          'letter-spacing': 'normal',\n          'word-spacing': 'normal',\n          overflow: 'hidden',\n          height: '1px',\n          'margin-right': '-1px'\n        }\n      }, [this.html('mjx-left-box', {\n        style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'left'\n        }\n      }), this.html('mjx-ex-box', {\n        style: {\n          position: 'absolute',\n          overflow: 'hidden',\n          width: '1px',\n          height: '60ex'\n        }\n      }), this.html('mjx-right-box', {\n        style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'right'\n        }\n      })]);\n      this.testDisplay = adaptor.clone(this.testInline);\n      adaptor.setStyle(this.testDisplay, 'display', 'table');\n      adaptor.setStyle(this.testDisplay, 'margin-right', '');\n      adaptor.setStyle(adaptor.firstChild(this.testDisplay), 'display', 'none');\n      var right = adaptor.lastChild(this.testDisplay);\n      adaptor.setStyle(right, 'display', 'table-cell');\n      adaptor.setStyle(right, 'width', '10000em');\n      adaptor.setStyle(right, 'float', '');\n    }\n    return adaptor.append(node, adaptor.clone(display ? this.testDisplay : this.testInline));\n  };\n  CommonOutputJax.prototype.measureMetrics = function (node, getFamily) {\n    var adaptor = this.adaptor;\n    var family = getFamily ? adaptor.fontFamily(node) : '';\n    var em = adaptor.fontSize(node);\n    var _a = __read(adaptor.nodeSize(adaptor.childNode(node, 1)), 2),\n      w = _a[0],\n      h = _a[1];\n    var ex = w ? h / 60 : em * this.options.exFactor;\n    var containerWidth = !w ? 1000000 : adaptor.getStyle(node, 'display') === 'table' ? adaptor.nodeSize(adaptor.lastChild(node))[0] - 1 : adaptor.nodeBBox(adaptor.lastChild(node)).left - adaptor.nodeBBox(adaptor.firstChild(node)).left - 2;\n    var scale = Math.max(this.options.minScale, this.options.matchFontHeight ? ex / this.font.params.x_height / em : 1);\n    var lineWidth = 1000000;\n    return {\n      em: em,\n      ex: ex,\n      containerWidth: containerWidth,\n      lineWidth: lineWidth,\n      scale: scale,\n      family: family\n    };\n  };\n  CommonOutputJax.prototype.styleSheet = function (html) {\n    var e_7, _a;\n    this.setDocument(html);\n    this.cssStyles.clear();\n    this.cssStyles.addStyles(this.constructor.commonStyles);\n    if ('getStyles' in html) {\n      try {\n        for (var _b = __values(html.getStyles()), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var styles = _c.value;\n          this.cssStyles.addStyles(styles);\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n    this.addWrapperStyles(this.cssStyles);\n    this.addFontStyles(this.cssStyles);\n    var sheet = this.html('style', {\n      id: 'MJX-styles'\n    }, [this.text('\\n' + this.cssStyles.cssText + '\\n')]);\n    return sheet;\n  };\n  CommonOutputJax.prototype.addFontStyles = function (styles) {\n    styles.addStyles(this.font.styles);\n  };\n  CommonOutputJax.prototype.addWrapperStyles = function (styles) {\n    var e_8, _a;\n    try {\n      for (var _b = __values(this.factory.getKinds()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var kind = _c.value;\n        this.addClassStyles(this.factory.getNodeClass(kind), styles);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n  };\n  CommonOutputJax.prototype.addClassStyles = function (CLASS, styles) {\n    styles.addStyles(CLASS.styles);\n  };\n  CommonOutputJax.prototype.setDocument = function (html) {\n    if (html) {\n      this.document = html;\n      this.adaptor.document = html.document;\n    }\n  };\n  CommonOutputJax.prototype.html = function (type, def, content, ns) {\n    if (def === void 0) {\n      def = {};\n    }\n    if (content === void 0) {\n      content = [];\n    }\n    return this.adaptor.node(type, def, content, ns);\n  };\n  CommonOutputJax.prototype.text = function (text) {\n    return this.adaptor.text(text);\n  };\n  CommonOutputJax.prototype.fixed = function (m, n) {\n    if (n === void 0) {\n      n = 3;\n    }\n    if (Math.abs(m) < .0006) {\n      return '0';\n    }\n    return m.toFixed(n).replace(/\\.?0+$/, '');\n  };\n  CommonOutputJax.prototype.measureText = function (text, variant, font) {\n    if (font === void 0) {\n      font = ['', false, false];\n    }\n    var node = this.unknownText(text, variant);\n    if (variant === '-explicitFont') {\n      var styles = this.cssFontStyles(font);\n      this.adaptor.setAttributes(node, {\n        style: styles\n      });\n    }\n    return this.measureTextNodeWithCache(node, text, variant, font);\n  };\n  CommonOutputJax.prototype.measureTextNodeWithCache = function (text, chars, variant, font) {\n    if (font === void 0) {\n      font = ['', false, false];\n    }\n    if (variant === '-explicitFont') {\n      variant = [font[0], font[1] ? 'T' : 'F', font[2] ? 'T' : 'F', ''].join('-');\n    }\n    if (!this.unknownCache.has(variant)) {\n      this.unknownCache.set(variant, new Map());\n    }\n    var map = this.unknownCache.get(variant);\n    var cached = map.get(chars);\n    if (cached) return cached;\n    var bbox = this.measureTextNode(text);\n    map.set(chars, bbox);\n    return bbox;\n  };\n  CommonOutputJax.prototype.measureXMLnode = function (xml) {\n    var adaptor = this.adaptor;\n    var content = this.html('mjx-xml-block', {\n      style: {\n        display: 'inline-block'\n      }\n    }, [adaptor.clone(xml)]);\n    var base = this.html('mjx-baseline', {\n      style: {\n        display: 'inline-block',\n        width: 0,\n        height: 0\n      }\n    });\n    var style = {\n      position: 'absolute',\n      display: 'inline-block',\n      'font-family': 'initial',\n      'line-height': 'normal'\n    };\n    var node = this.html('mjx-measure-xml', {\n      style: style\n    }, [base, content]);\n    adaptor.append(adaptor.parent(this.math.start.node), this.container);\n    adaptor.append(this.container, node);\n    var em = this.math.metrics.em * this.math.metrics.scale;\n    var _a = adaptor.nodeBBox(content),\n      left = _a.left,\n      right = _a.right,\n      bottom = _a.bottom,\n      top = _a.top;\n    var w = (right - left) / em;\n    var h = (adaptor.nodeBBox(base).top - top) / em;\n    var d = (bottom - top) / em - h;\n    adaptor.remove(this.container);\n    adaptor.remove(node);\n    return {\n      w: w,\n      h: h,\n      d: d\n    };\n  };\n  CommonOutputJax.prototype.cssFontStyles = function (font, styles) {\n    if (styles === void 0) {\n      styles = {};\n    }\n    var _a = __read(font, 3),\n      family = _a[0],\n      italic = _a[1],\n      bold = _a[2];\n    styles['font-family'] = this.font.getFamily(family);\n    if (italic) styles['font-style'] = 'italic';\n    if (bold) styles['font-weight'] = 'bold';\n    return styles;\n  };\n  CommonOutputJax.prototype.getFontData = function (styles) {\n    if (!styles) {\n      styles = new Styles_js_1.Styles();\n    }\n    return [this.font.getFamily(styles.get('font-family')), styles.get('font-style') === 'italic', styles.get('font-weight') === 'bold'];\n  };\n  CommonOutputJax.NAME = 'Common';\n  CommonOutputJax.OPTIONS = __assign(__assign({}, OutputJax_js_1.AbstractOutputJax.OPTIONS), {\n    scale: 1,\n    minScale: .5,\n    mtextInheritFont: false,\n    merrorInheritFont: false,\n    mtextFont: '',\n    merrorFont: 'serif',\n    mathmlSpacing: false,\n    skipAttributes: {},\n    exFactor: .5,\n    displayAlign: 'center',\n    displayIndent: '0',\n    wrapperFactory: null,\n    font: null,\n    cssStyles: null\n  });\n  CommonOutputJax.commonStyles = {};\n  return CommonOutputJax;\n}(OutputJax_js_1.AbstractOutputJax);\nexports.CommonOutputJax = CommonOutputJax;","map":{"version":3,"names":["OutputJax_js_1","require","MathItem_js_1","Options_js_1","lengths_js_1","Styles_js_1","StyleList_js_1","CommonOutputJax","_super","__extends","options","defaultFactory","defaultFont","_this","_a","__read","separateOptions","OPTIONS","jaxOptions","fontOptions","call","factory","wrapperFactory","jax","cssStyles","CssStyles","font","unknownCache","Map","prototype","typeset","math","html","setDocument","node","createNode","toDOM","constructor","NAME","setScale","scale","metrics","adaptor","setStyle","percent","pxPerEm","ex","params","x_height","root","setTeXclass","nodeMap","container","processMath","executeFilters","postFilters","getBBox","bbox","wrap","getOuterBBox","getMetrics","maps","getMetricMaps","_b","__values","_c","next","done","value","parent_1","parent","start","state","STATE","METRICS","map","display","_d","get","em","containerWidth","lineWidth","family","setMetrics","mtextInheritFont","outputData","mtextFamily","merrorInheritFont","merrorFamily","getMetricsFor","getFamily","test","getTestElement","measureMetrics","remove","domMaps","_f","_g","has","set","_h","keys","_j","i","_k","e_4","_l","_m","_o","_p","e_6","values","_q","testInline","style","width","overflow","height","position","testDisplay","clone","firstChild","right","lastChild","append","fontFamily","fontSize","nodeSize","childNode","w","h","exFactor","getStyle","nodeBBox","left","Math","max","minScale","matchFontHeight","styleSheet","clear","addStyles","commonStyles","getStyles","styles","addWrapperStyles","addFontStyles","sheet","id","text","cssText","getKinds","kind","addClassStyles","getNodeClass","CLASS","document","type","def","content","ns","fixed","m","n","abs","toFixed","replace","measureText","variant","unknownText","cssFontStyles","setAttributes","measureTextNodeWithCache","chars","join","cached","measureTextNode","measureXMLnode","xml","base","bottom","top","d","italic","bold","getFontData","Styles","__assign","AbstractOutputJax","mtextFont","merrorFont","mathmlSpacing","skipAttributes","displayAlign","displayIndent","exports"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/node_modules/mathjax-full/ts/output/common/OutputJax.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2017-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the abstract class for the CommonOutputJax\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {AbstractOutputJax} from '../../core/OutputJax.js';\nimport {MathDocument} from '../../core/MathDocument.js';\nimport {MathItem, Metrics, STATE} from '../../core/MathItem.js';\nimport {MmlNode} from '../../core/MmlTree/MmlNode.js';\nimport {FontData, FontDataClass, CharOptions, DelimiterData, CssFontData} from './FontData.js';\nimport {OptionList, separateOptions} from '../../util/Options.js';\nimport {CommonWrapper, AnyWrapper, AnyWrapperClass} from './Wrapper.js';\nimport {CommonWrapperFactory, AnyWrapperFactory} from './WrapperFactory.js';\nimport {percent} from '../../util/lengths.js';\nimport {StyleList, Styles} from '../../util/Styles.js';\nimport {StyleList as CssStyleList, CssStyles} from '../../util/StyleList.js';\n\n/*****************************************************************/\n\nexport interface ExtendedMetrics extends Metrics {\n  family: string;     // the font family for the surrounding text\n}\n\n/**\n * Maps linking a node to the test node it contains,\n *  and a map linking a node to the metrics within that node.\n */\nexport type MetricMap<N> = Map<N, ExtendedMetrics>;\ntype MetricDomMap<N> = Map<N, N>;\n\n/**\n * Maps for unknown characters\n */\nexport type UnknownBBox = {w: number, h: number, d: number};\nexport type UnknownMap = Map<string, UnknownBBox>;\nexport type UnknownVariantMap = Map<string, UnknownMap>;\n\n/*****************************************************************/\n\n/**\n *  The CommonOutputJax class on which the CHTML and SVG jax are built\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n * @template W  The Wrapper class\n * @template F  The WrapperFactory class\n * @template FD The FontData class\n * @template FC The FontDataClass object\n */\nexport abstract class CommonOutputJax<\n  N, T, D,\n  W extends AnyWrapper,\n  F extends AnyWrapperFactory,\n  FD extends FontData<any, any, any>,\n  FC extends FontDataClass<any, any, any>\n> extends AbstractOutputJax<N, T, D> {\n\n  /**\n   * The name of this output jax\n   */\n  public static NAME: string = 'Common';\n\n  /**\n   * @override\n   */\n  public static OPTIONS: OptionList = {\n      ...AbstractOutputJax.OPTIONS,\n    scale: 1,                      // global scaling factor for all expressions\n    minScale: .5,                  // smallest scaling factor to use\n    mtextInheritFont: false,       // true to make mtext elements use surrounding font\n    merrorInheritFont: false,      // true to make merror text use surrounding font\n    mtextFont: '',                 // font to use for mtext, if not inheriting (empty means use MathJax fonts)\n    merrorFont: 'serif',           // font to use for merror, if not inheriting (empty means use MathJax fonts)\n    mathmlSpacing: false,          // true for MathML spacing rules, false for TeX rules\n    skipAttributes: {},            // RFDa and other attributes NOT to copy to the output\n    exFactor: .5,                  // default size of ex in em units\n    displayAlign: 'center',        // default for indentalign when set to 'auto'\n    displayIndent: '0',            // default for indentshift when set to 'auto'\n    wrapperFactory: null,          // The wrapper factory to use\n    font: null,                    // The FontData object to use\n    cssStyles: null                // The CssStyles object to use\n  };\n\n  /**\n   *  The default styles for the output jax\n   */\n  public static commonStyles: CssStyleList = {};\n\n  /**\n   * Used for collecting styles needed for the output jax\n   */\n  public cssStyles: CssStyles;\n\n  /**\n   * The MathDocument for the math we find\n   */\n  public document: MathDocument<N, T, D>;\n\n  /**\n   * the MathItem currently being processed\n   */\n  public math: MathItem<N, T, D>;\n\n  /**\n   * The container element for the math\n   */\n  public container: N;\n\n  /**\n   * The top-level table, if any\n   */\n  public table: AnyWrapper;\n\n  /**\n   * The pixels per em for the math item being processed\n   */\n  public pxPerEm: number;\n\n  /**\n   * The data for the font in use\n   */\n  public font: FD;\n\n  /**\n   * The wrapper factory for the MathML nodes\n   */\n  public factory: F;\n\n  /**\n   * A map from the nodes in the expression currently being processed to the\n   * wrapper nodes for them (used by functions like core() to locate the wrappers\n   * from the core nodes)\n   */\n  public nodeMap: Map<MmlNode, W>;\n\n  /**\n   * Node used to test for in-line metric data\n   */\n  public testInline: N;\n\n  /**\n   * Node used to test for display metric data\n   */\n  public testDisplay: N;\n\n  /**\n   * Cache of unknonw character bounding boxes for this element\n   */\n  protected unknownCache: UnknownVariantMap;\n\n  /*****************************************************************/\n\n  /**\n   * Get the WrapperFactory and connect it to this output jax\n   * Get the cssStyle and font objects\n   *\n   * @param {OptionList} options         The configuration options\n   * @param {CommonWrapperFactory} defaultFactory  The default wrapper factory class\n   * @param {FC} defaultFont  The default FontData constructor\n   * @constructor\n   */\n  constructor(options: OptionList = null,\n              defaultFactory: typeof CommonWrapperFactory = null,\n              defaultFont: FC = null) {\n    const [jaxOptions, fontOptions] = separateOptions(options, defaultFont.OPTIONS);\n    super(jaxOptions);\n    this.factory = this.options.wrapperFactory ||\n      new defaultFactory<CommonOutputJax<N, T, D, W, F, FD, FC>, W,\n    AnyWrapperClass, CharOptions, DelimiterData, FD>();\n    this.factory.jax = this;\n    this.cssStyles = this.options.cssStyles || new CssStyles();\n    this.font = this.options.font || new defaultFont(fontOptions);\n    this.unknownCache = new Map();\n  }\n\n  /*****************************************************************/\n\n  /**\n   * Save the math document\n   * Create the mjx-container node\n   * Create the DOM output for the root MathML math node in the container\n   * Return the container node\n   *\n   * @override\n   */\n  public typeset(math: MathItem<N, T, D>, html: MathDocument<N, T, D>) {\n    this.setDocument(html);\n    let node = this.createNode();\n    this.toDOM(math, node, html);\n    return node;\n  }\n\n  /**\n   * @return {N}  The container DOM node for the typeset math\n   */\n  protected createNode(): N {\n    const jax = (this.constructor as typeof CommonOutputJax).NAME;\n    return this.html('mjx-container', {'class': 'MathJax', jax: jax});\n  }\n\n  /**\n   * @param {N} node   The container whose scale is to be set\n   */\n  protected setScale(node: N) {\n    const scale = this.math.metrics.scale * this.options.scale;\n    if (scale !== 1) {\n      this.adaptor.setStyle(node, 'fontSize', percent(scale));\n    }\n  }\n\n  /**\n   * Save the math document, if any, and the math item\n   * Set the document where HTML nodes will be created via the adaptor\n   * Recursively set the TeX classes for the nodes\n   * Set the scaling for the DOM node\n   * Create the nodeMap (maps MathML nodes to corresponding wrappers)\n   * Create the HTML output for the root MathML node in the container\n   * Clear the nodeMape\n   * Execute the post-filters\n   *\n   * @param {MathItem} math      The math item to convert\n   * @param {N} node             The contaier to place the result into\n   * @param {MathDocument} html  The document containing the math\n   */\n  public toDOM(math: MathItem<N, T, D>, node: N, html: MathDocument<N, T, D> = null) {\n    this.setDocument(html);\n    this.math = math;\n    this.pxPerEm = math.metrics.ex / this.font.params.x_height;\n    math.root.setTeXclass(null);\n    this.setScale(node);\n    this.nodeMap = new Map<MmlNode, W>();\n    this.container = node;\n    this.processMath(math.root, node);\n    this.nodeMap = null;\n    this.executeFilters(this.postFilters, math, html, node);\n  }\n\n  /**\n   * This is the actual typesetting function supplied by the subclass\n   *\n   * @param {MmlNode} math   The intenral MathML node of the root math element to process\n   * @param {N} node         The container node where the math is to be typeset\n   */\n  protected abstract processMath(math: MmlNode, node: N): void;\n\n  /*****************************************************************/\n\n  /**\n   * @param {MathItem} math      The MathItem to get the bounding box for\n   * @param {MathDocument} html  The MathDocument for the math\n   */\n  public getBBox(math: MathItem<N, T, D>, html: MathDocument<N, T, D>) {\n    this.setDocument(html);\n    this.math = math;\n    math.root.setTeXclass(null);\n    this.nodeMap = new Map<MmlNode, W>();\n    let bbox = this.factory.wrap(math.root).getOuterBBox();\n    this.nodeMap = null;\n    return bbox;\n  }\n\n  /*****************************************************************/\n\n  /**\n   * @override\n   */\n  public getMetrics(html: MathDocument<N, T, D>) {\n    this.setDocument(html);\n    const adaptor = this.adaptor;\n    const maps = this.getMetricMaps(html);\n    for (const math of html.math) {\n      const parent = adaptor.parent(math.start.node);\n      if (math.state() < STATE.METRICS && parent) {\n        const map = maps[math.display ? 1 : 0];\n        const {em, ex, containerWidth, lineWidth, scale, family} = map.get(parent);\n        math.setMetrics(em, ex, containerWidth, lineWidth, scale);\n        if (this.options.mtextInheritFont) {\n          math.outputData.mtextFamily = family;\n        }\n        if (this.options.merrorInheritFont) {\n          math.outputData.merrorFamily = family;\n        }\n        math.state(STATE.METRICS);\n      }\n    }\n  }\n\n  /**\n   * @param {N} node            The container node whose metrics are to be measured\n   * @param {boolean} display   True if the metrics are for displayed math\n   * @return {Metrics}          Object containing em, ex, containerWidth, etc.\n   */\n  public getMetricsFor(node: N, display: boolean): ExtendedMetrics {\n    const getFamily = (this.options.mtextInheritFont || this.options.merrorInheritFont);\n    const test = this.getTestElement(node, display);\n    const metrics = this.measureMetrics(test, getFamily);\n    this.adaptor.remove(test);\n    return metrics;\n  }\n\n  /**\n   * Get a MetricMap for the math list\n   *\n   * @param {MathDocument} html  The math document whose math list is to be processed.\n   * @return {MetricMap[]}       The node-to-metrics maps for all the containers that have math\n   */\n  protected getMetricMaps(html: MathDocument<N, T, D>): MetricMap<N>[] {\n    const adaptor = this.adaptor;\n    const domMaps = [new Map() as MetricDomMap<N>, new Map() as MetricDomMap<N>];\n    //\n    // Add the test elements all at once (so only one reflow)\n    // Currently, we do one test for each container element for in-line and one for display math\n    //   (since we need different techniques for the two forms to avoid a WebKit bug).\n    //   This may need to be changed to handle floating elements better, since that has to be\n    //   done at the location of the math itself, not necessarily the end of the container.\n    //\n    for (const math of html.math) {\n      const node = adaptor.parent(math.start.node);\n      if (node && math.state() < STATE.METRICS) {\n        const map = domMaps[math.display ? 1 : 0];\n        if (!map.has(node)) {\n          map.set(node, this.getTestElement(node, math.display));\n        }\n      }\n    }\n    //\n    // Measure the metrics for all the mapped elements\n    //\n    const getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;\n    const maps = [new Map() as MetricMap<N>, new Map() as MetricMap<N>];\n    for (const i of maps.keys()) {\n      for (const node of domMaps[i].keys()) {\n        maps[i].set(node, this.measureMetrics(domMaps[i].get(node), getFamily));\n      }\n    }\n    //\n    // Remove the test elements\n    //\n    for (const i of maps.keys()) {\n      for (const node of domMaps[i].values()) {\n        adaptor.remove(node);\n      }\n    }\n    return maps;\n  }\n\n  /**\n   * @param {N} node    The math element to be measured\n   * @return {N}        The test elements that were added\n   */\n  protected getTestElement(node: N, display: boolean): N {\n    const adaptor = this.adaptor;\n    if (!this.testInline) {\n      this.testInline = this.html('mjx-test', {style: {\n        display:            'inline-block',\n        width:              '100%',\n        'font-style':       'normal',\n        'font-weight':      'normal',\n        'font-size':        '100%',\n        'font-size-adjust': 'none',\n        'text-indent':      0,\n        'text-transform':   'none',\n        'letter-spacing':   'normal',\n        'word-spacing':     'normal',\n        overflow:           'hidden',\n        height:             '1px',\n        'margin-right':     '-1px'\n      }}, [\n        this.html('mjx-left-box', {style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'left'\n        }}),\n        this.html('mjx-ex-box', {style: {\n          position: 'absolute',\n          overflow: 'hidden',\n          width: '1px', height: '60ex'\n        }}),\n        this.html('mjx-right-box', {style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'right'\n        }})\n      ]);\n      this.testDisplay = adaptor.clone(this.testInline);\n      adaptor.setStyle(this.testDisplay, 'display', 'table');\n      adaptor.setStyle(this.testDisplay, 'margin-right', '');\n      adaptor.setStyle(adaptor.firstChild(this.testDisplay) as N, 'display', 'none');\n      const right = adaptor.lastChild(this.testDisplay) as N;\n      adaptor.setStyle(right, 'display', 'table-cell');\n      adaptor.setStyle(right, 'width', '10000em');\n      adaptor.setStyle(right, 'float', '');\n    }\n    return adaptor.append(node, adaptor.clone(display ? this.testDisplay : this.testInline) as N) as N;\n  }\n\n  /**\n   * @param {N} node              The test node to measure\n   * @param {boolean} getFamily   True if font family of surroundings is to be determined\n   * @return {ExtendedMetrics}    The metric data for the given node\n   */\n  protected measureMetrics(node: N, getFamily: boolean): ExtendedMetrics {\n    const adaptor = this.adaptor;\n    const family = (getFamily ? adaptor.fontFamily(node) : '');\n    const em = adaptor.fontSize(node);\n    const [w, h] = adaptor.nodeSize(adaptor.childNode(node, 1) as N);\n    const ex = (w ? h / 60 : em * this.options.exFactor);\n    const containerWidth = (!w ? 1000000 : adaptor.getStyle(node, 'display') === 'table' ?\n                            adaptor.nodeSize(adaptor.lastChild(node) as N)[0] - 1 :\n                            adaptor.nodeBBox(adaptor.lastChild(node) as N).left -\n                            adaptor.nodeBBox(adaptor.firstChild(node) as N).left - 2);\n    const scale = Math.max(this.options.minScale,\n                           this.options.matchFontHeight ? ex / this.font.params.x_height / em : 1);\n    const lineWidth = 1000000;      // no linebreaking (otherwise would be a percentage of cwidth)\n    return {em, ex, containerWidth, lineWidth, scale, family};\n  }\n\n  /*****************************************************************/\n\n  /**\n   * @override\n   */\n  public styleSheet(html: MathDocument<N, T, D>) {\n    this.setDocument(html);\n    //\n    // Start with the common styles\n    //\n    this.cssStyles.clear();\n    this.cssStyles.addStyles((this.constructor as typeof CommonOutputJax).commonStyles);\n    //\n    // Add document-specific styles\n    //\n    if ('getStyles' in html) {\n      for (const styles of ((html as any).getStyles() as CssStyleList[])) {\n        this.cssStyles.addStyles(styles);\n      }\n    }\n    //\n    // Gather the CSS from the classes and font\n    //\n    this.addWrapperStyles(this.cssStyles);\n    this.addFontStyles(this.cssStyles);\n    //\n    // Create the stylesheet for the CSS\n    //\n    const sheet = this.html('style', {id: 'MJX-styles'}, [this.text('\\n' + this.cssStyles.cssText + '\\n')]);\n    return sheet as N;\n  }\n\n  /**\n   * @param {CssStyles} styles   The style object to add to\n   */\n  protected addFontStyles(styles: CssStyles) {\n    styles.addStyles(this.font.styles);\n  }\n\n  /**\n   * @param {CssStyles} styles   The style object to add to\n   */\n  protected addWrapperStyles(styles: CssStyles) {\n    for (const kind of this.factory.getKinds()) {\n      this.addClassStyles(this.factory.getNodeClass(kind), styles);\n    }\n  }\n\n  /**\n   * @param {typeof CommonWrapper} CLASS  The Wrapper class whose styles are to be added\n   * @param {CssStyles} styles            The style object to add to.\n   */\n  protected addClassStyles(CLASS: typeof CommonWrapper, styles: CssStyles) {\n    styles.addStyles(CLASS.styles);\n  }\n\n  /*****************************************************************/\n\n  /**\n   * @param {MathDocument} html  The document to be used\n   */\n  protected setDocument(html: MathDocument<N, T, D>) {\n    if (html) {\n      this.document = html;\n      this.adaptor.document = html.document;\n    }\n  }\n\n  /**\n   * @param {string} type      The type of HTML node to create\n   * @param {OptionList} def   The properties to set on the HTML node\n   * @param {(N|T)[]} content  Array of child nodes to set for the HTML node\n   * @param {string} ns        The namespace for the element\n   * @return {N}               The newly created DOM tree\n   */\n  public html(type: string, def: OptionList = {}, content: (N | T)[] = [], ns?: string): N {\n    return this.adaptor.node(type, def, content, ns);\n  }\n\n  /**\n   * @param {string} text  The text string for which to make a text node\n   *\n   * @return {T}  A text node with the given text\n   */\n  public text(text: string): T {\n    return this.adaptor.text(text);\n  }\n\n  /**\n   * @param {number} m    A number to be shown with a fixed number of digits\n   * @param {number=} n   The number of digits to use\n   * @return {string}     The formatted number\n   */\n  public fixed(m: number, n: number = 3): string {\n    if (Math.abs(m) < .0006) {\n      return '0';\n    }\n    return m.toFixed(n).replace(/\\.?0+$/, '');\n  }\n\n  /*****************************************************************/\n  /*\n   *  Methods for handling text that is not in the current MathJax font\n   */\n\n  /**\n   * Create a DOM node for text from a specific CSS font, or that is\n   *  not in the current MathJax font\n   *\n   * @param {string} text        The text to be displayed\n   * @param {string} variant     The name of the variant for the text\n   * @return {N}                 The text element containing the text\n   */\n  public abstract unknownText(text: string, variant: string): N;\n\n  /**\n   * Measure text from a specific font, or that isn't in the MathJax font\n   *\n   * @param {string} text        The text to measure\n   * @param {string} variant     The variant for the text\n   * @param {CssFontData} font   The family, italic, and bold data for explicit fonts\n   * @return {UnknownBBox}       The width, height, and depth of the text (in ems)\n   */\n  public measureText(text: string, variant: string, font: CssFontData = ['', false, false]): UnknownBBox {\n    const node = this.unknownText(text, variant);\n    if (variant === '-explicitFont') {\n      const styles = this.cssFontStyles(font);\n      this.adaptor.setAttributes(node, {style: styles});\n    }\n    return this.measureTextNodeWithCache(node, text, variant, font);\n  }\n\n  /**\n   * Get the size of a text node, caching the result, and using\n   *   a cached result, if there is one.\n   *\n   * @param {N} text         The text element to measure\n   * @param {string} chars   The string contained in the text node\n   * @param {string} variant     The variant for the text\n   * @param {CssFontData} font   The family, italic, and bold data for explicit fonts\n   * @return {UnknownBBox}   The width, height and depth for the text\n   */\n  public measureTextNodeWithCache(\n    text: N, chars: string, variant: string,\n    font: CssFontData = ['', false, false]\n  ): UnknownBBox {\n    if (variant === '-explicitFont') {\n      variant = [font[0], font[1] ? 'T' : 'F', font[2] ? 'T' : 'F', ''].join('-');\n    }\n    if (!this.unknownCache.has(variant)) {\n      this.unknownCache.set(variant, new Map());\n    }\n    const map = this.unknownCache.get(variant);\n    const cached = map.get(chars);\n    if (cached) return cached;\n    const bbox = this.measureTextNode(text);\n    map.set(chars, bbox);\n    return bbox;\n  }\n\n  /**\n   * Measure the width of a text element by placing it in the page\n   *  and looking up its size (fake the height and depth, since we can't measure that)\n   *\n   * @param {N} text            The text element to measure\n   * @return {UnknownBBox}      The width, height and depth for the text (in ems)\n   */\n  public abstract measureTextNode(text: N): UnknownBBox;\n\n  /**\n   * Measure the width, height and depth of an annotation-xml node's content\n   *\n   * @param{N} xml          The xml content node to be measured\n   * @return {UnknownBBox}  The width, height, and depth of the content\n   */\n  public measureXMLnode(xml: N): UnknownBBox {\n    const adaptor = this.adaptor;\n    const content =  this.html('mjx-xml-block', {style: {display: 'inline-block'}}, [adaptor.clone(xml)]);\n    const base = this.html('mjx-baseline', {style: {display: 'inline-block', width: 0, height: 0}});\n    const style = {\n      position: 'absolute',\n      display: 'inline-block',\n      'font-family': 'initial',\n      'line-height': 'normal'\n    };\n    const node = this.html('mjx-measure-xml', {style}, [base, content]);\n    adaptor.append(adaptor.parent(this.math.start.node), this.container);\n    adaptor.append(this.container, node);\n    const em = this.math.metrics.em * this.math.metrics.scale;\n    const {left, right, bottom, top} = adaptor.nodeBBox(content);\n    const w = (right - left) / em;\n    const h = (adaptor.nodeBBox(base).top - top) / em;\n    const d = (bottom - top) / em - h;\n    adaptor.remove(this.container);\n    adaptor.remove(node);\n    return {w, h, d};\n  }\n\n  /**\n   * @param {CssFontData} font   The family, style, and weight for the given font\n   * @param {StyleList} styles   The style object to add the font data to\n   * @return {StyleList}         The modified (or initialized) style object\n   */\n  public cssFontStyles(font: CssFontData, styles: StyleList = {}): StyleList {\n    const [family, italic, bold] = font;\n    styles['font-family'] = this.font.getFamily(family);\n    if (italic) styles['font-style'] = 'italic';\n    if (bold) styles['font-weight'] = 'bold';\n    return styles;\n  }\n\n  /**\n   * @param {Styles} styles   The style object to query\n   * @return {CssFontData}    The family, italic, and boolean values\n   */\n  public getFontData(styles: Styles): CssFontData {\n    if (!styles) {\n      styles = new Styles();\n    }\n    return [this.font.getFamily(styles.get('font-family')),\n            styles.get('font-style') === 'italic',\n            styles.get('font-weight') === 'bold'] as CssFontData;\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}