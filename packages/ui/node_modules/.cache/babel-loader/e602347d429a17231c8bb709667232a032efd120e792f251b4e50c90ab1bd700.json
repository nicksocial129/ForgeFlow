{"ast":null,"code":"import{useEffect,useRef}from'react';import ReactFlow,{Controls,Background,useNodesState,useEdgesState}from'reactflow';import'reactflow/dist/style.css';import'views/canvas/index.css';import{useLocation,useNavigate}from'react-router-dom';// material-ui\nimport{Toolbar,Box,AppBar}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MarketplaceCanvasNode from'./MarketplaceCanvasNode';import MarketplaceCanvasHeader from'./MarketplaceCanvasHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const nodeTypes={customNode:MarketplaceCanvasNode};const edgeTypes={buttonedge:''};// ==============================|| CANVAS ||============================== //\nconst MarketplaceCanvas=()=>{const theme=useTheme();const navigate=useNavigate();const{state}=useLocation();const{flowData,name}=state;// ==============================|| ReactFlow ||============================== //\nconst[nodes,setNodes,onNodesChange]=useNodesState();const[edges,setEdges,onEdgesChange]=useEdgesState();const reactFlowWrapper=useRef(null);// ==============================|| useEffect ||============================== //\nuseEffect(()=>{if(flowData){const initialFlow=JSON.parse(flowData);setNodes(initialFlow.nodes||[]);setEdges(initialFlow.edges||[]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[flowData]);const onChatflowCopy=flowData=>{const templateFlowData=JSON.stringify(flowData);navigate(\"/canvas\",{state:{templateFlowData}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{enableColorOnDark:true,position:\"fixed\",color:\"inherit\",elevation:1,sx:{bgcolor:theme.palette.background.default},children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(MarketplaceCanvasHeader,{flowName:name,flowData:JSON.parse(flowData),onChatflowCopy:flowData=>onChatflowCopy(flowData)})})}),/*#__PURE__*/_jsx(Box,{sx:{pt:'70px',height:'100vh',width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-parent-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-wrapper\",ref:reactFlowWrapper,children:/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,nodesDraggable:false,nodeTypes:nodeTypes,edgeTypes:edgeTypes,fitView:true,minZoom:0.1,children:[/*#__PURE__*/_jsx(Controls,{style:{display:'flex',flexDirection:'row',left:'50%',transform:'translate(-50%, -50%)'}}),/*#__PURE__*/_jsx(Background,{color:\"#aaa\",gap:16})]})})})})]})});};export default MarketplaceCanvas;","map":{"version":3,"names":["useEffect","useRef","ReactFlow","Controls","Background","useNodesState","useEdgesState","useLocation","useNavigate","Toolbar","Box","AppBar","useTheme","MarketplaceCanvasNode","MarketplaceCanvasHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","nodeTypes","customNode","edgeTypes","buttonedge","MarketplaceCanvas","theme","navigate","state","flowData","name","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","reactFlowWrapper","initialFlow","JSON","parse","onChatflowCopy","templateFlowData","stringify","children","enableColorOnDark","position","color","elevation","sx","bgcolor","palette","background","default","flowName","pt","height","width","className","ref","nodesDraggable","fitView","minZoom","style","display","flexDirection","left","transform","gap"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/packages/ui/src/views/marketplaces/MarketplaceCanvas.js"],"sourcesContent":["import { useEffect, useRef } from 'react'\nimport ReactFlow, { Controls, Background, useNodesState, useEdgesState } from 'reactflow'\nimport 'reactflow/dist/style.css'\nimport 'views/canvas/index.css'\n\nimport { useLocation, useNavigate } from 'react-router-dom'\n\n// material-ui\nimport { Toolbar, Box, AppBar } from '@mui/material'\nimport { useTheme } from '@mui/material/styles'\n\n// project imports\nimport MarketplaceCanvasNode from './MarketplaceCanvasNode'\n\nimport MarketplaceCanvasHeader from './MarketplaceCanvasHeader'\n\nconst nodeTypes = { customNode: MarketplaceCanvasNode }\nconst edgeTypes = { buttonedge: '' }\n\n// ==============================|| CANVAS ||============================== //\n\nconst MarketplaceCanvas = () => {\n    const theme = useTheme()\n    const navigate = useNavigate()\n\n    const { state } = useLocation()\n    const { flowData, name } = state\n\n    // ==============================|| ReactFlow ||============================== //\n\n    const [nodes, setNodes, onNodesChange] = useNodesState()\n    const [edges, setEdges, onEdgesChange] = useEdgesState()\n\n    const reactFlowWrapper = useRef(null)\n\n    // ==============================|| useEffect ||============================== //\n\n    useEffect(() => {\n        if (flowData) {\n            const initialFlow = JSON.parse(flowData)\n            setNodes(initialFlow.nodes || [])\n            setEdges(initialFlow.edges || [])\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [flowData])\n\n    const onChatflowCopy = (flowData) => {\n        const templateFlowData = JSON.stringify(flowData)\n        navigate(`/canvas`, { state: { templateFlowData } })\n    }\n\n    return (\n        <>\n            <Box>\n                <AppBar\n                    enableColorOnDark\n                    position='fixed'\n                    color='inherit'\n                    elevation={1}\n                    sx={{\n                        bgcolor: theme.palette.background.default\n                    }}\n                >\n                    <Toolbar>\n                        <MarketplaceCanvasHeader\n                            flowName={name}\n                            flowData={JSON.parse(flowData)}\n                            onChatflowCopy={(flowData) => onChatflowCopy(flowData)}\n                        />\n                    </Toolbar>\n                </AppBar>\n                <Box sx={{ pt: '70px', height: '100vh', width: '100%' }}>\n                    <div className='reactflow-parent-wrapper'>\n                        <div className='reactflow-wrapper' ref={reactFlowWrapper}>\n                            <ReactFlow\n                                nodes={nodes}\n                                edges={edges}\n                                onNodesChange={onNodesChange}\n                                onEdgesChange={onEdgesChange}\n                                nodesDraggable={false}\n                                nodeTypes={nodeTypes}\n                                edgeTypes={edgeTypes}\n                                fitView\n                                minZoom={0.1}\n                            >\n                                <Controls\n                                    style={{\n                                        display: 'flex',\n                                        flexDirection: 'row',\n                                        left: '50%',\n                                        transform: 'translate(-50%, -50%)'\n                                    }}\n                                />\n                                <Background color='#aaa' gap={16} />\n                            </ReactFlow>\n                        </div>\n                    </div>\n                </Box>\n            </Box>\n        </>\n    )\n}\n\nexport default MarketplaceCanvas\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}