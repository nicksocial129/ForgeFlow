{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HTMLDocument = void 0;\nvar MathDocument_js_1 = require(\"../../core/MathDocument.js\");\nvar Options_js_1 = require(\"../../util/Options.js\");\nvar HTMLMathItem_js_1 = require(\"./HTMLMathItem.js\");\nvar HTMLMathList_js_1 = require(\"./HTMLMathList.js\");\nvar HTMLDomStrings_js_1 = require(\"./HTMLDomStrings.js\");\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\nvar HTMLDocument = function (_super) {\n  __extends(HTMLDocument, _super);\n  function HTMLDocument(document, adaptor, options) {\n    var _this = this;\n    var _a = __read((0, Options_js_1.separateOptions)(options, HTMLDomStrings_js_1.HTMLDomStrings.OPTIONS), 2),\n      html = _a[0],\n      dom = _a[1];\n    _this = _super.call(this, document, adaptor, html) || this;\n    _this.domStrings = _this.options['DomStrings'] || new HTMLDomStrings_js_1.HTMLDomStrings(dom);\n    _this.domStrings.adaptor = adaptor;\n    _this.styles = [];\n    return _this;\n  }\n  HTMLDocument.prototype.findPosition = function (N, index, delim, nodes) {\n    var e_1, _a;\n    var adaptor = this.adaptor;\n    try {\n      for (var _b = __values(nodes[N]), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var list = _c.value;\n        var _d = __read(list, 2),\n          node = _d[0],\n          n = _d[1];\n        if (index <= n && adaptor.kind(node) === '#text') {\n          return {\n            node: node,\n            n: Math.max(index, 0),\n            delim: delim\n          };\n        }\n        index -= n;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return {\n      node: null,\n      n: 0,\n      delim: delim\n    };\n  };\n  HTMLDocument.prototype.mathItem = function (item, jax, nodes) {\n    var math = item.math;\n    var start = this.findPosition(item.n, item.start.n, item.open, nodes);\n    var end = this.findPosition(item.n, item.end.n, item.close, nodes);\n    return new this.options.MathItem(math, jax, item.display, start, end);\n  };\n  HTMLDocument.prototype.findMath = function (options) {\n    var e_2, _a, e_3, _b, _c, e_4, _d, e_5, _e;\n    if (!this.processed.isSet('findMath')) {\n      this.adaptor.document = this.document;\n      options = (0, Options_js_1.userOptions)({\n        elements: this.options.elements || [this.adaptor.body(this.document)]\n      }, options);\n      try {\n        for (var _f = __values(this.adaptor.getElements(options['elements'], this.document)), _g = _f.next(); !_g.done; _g = _f.next()) {\n          var container = _g.value;\n          var _h = __read([null, null], 2),\n            strings = _h[0],\n            nodes = _h[1];\n          try {\n            for (var _j = (e_3 = void 0, __values(this.inputJax)), _k = _j.next(); !_k.done; _k = _j.next()) {\n              var jax = _k.value;\n              var list = new this.options['MathList']();\n              if (jax.processStrings) {\n                if (strings === null) {\n                  _c = __read(this.domStrings.find(container), 2), strings = _c[0], nodes = _c[1];\n                }\n                try {\n                  for (var _l = (e_4 = void 0, __values(jax.findMath(strings))), _m = _l.next(); !_m.done; _m = _l.next()) {\n                    var math = _m.value;\n                    list.push(this.mathItem(math, jax, nodes));\n                  }\n                } catch (e_4_1) {\n                  e_4 = {\n                    error: e_4_1\n                  };\n                } finally {\n                  try {\n                    if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n                  } finally {\n                    if (e_4) throw e_4.error;\n                  }\n                }\n              } else {\n                try {\n                  for (var _o = (e_5 = void 0, __values(jax.findMath(container))), _p = _o.next(); !_p.done; _p = _o.next()) {\n                    var math = _p.value;\n                    var item = new this.options.MathItem(math.math, jax, math.display, math.start, math.end);\n                    list.push(item);\n                  }\n                } catch (e_5_1) {\n                  e_5 = {\n                    error: e_5_1\n                  };\n                } finally {\n                  try {\n                    if (_p && !_p.done && (_e = _o.return)) _e.call(_o);\n                  } finally {\n                    if (e_5) throw e_5.error;\n                  }\n                }\n              }\n              this.math.merge(list);\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_k && !_k.done && (_b = _j.return)) _b.call(_j);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n      this.processed.set('findMath');\n    }\n    return this;\n  };\n  HTMLDocument.prototype.updateDocument = function () {\n    if (!this.processed.isSet('updateDocument')) {\n      this.addPageElements();\n      this.addStyleSheet();\n      _super.prototype.updateDocument.call(this);\n      this.processed.set('updateDocument');\n    }\n    return this;\n  };\n  HTMLDocument.prototype.addPageElements = function () {\n    var body = this.adaptor.body(this.document);\n    var node = this.documentPageElements();\n    if (node) {\n      this.adaptor.append(body, node);\n    }\n  };\n  HTMLDocument.prototype.addStyleSheet = function () {\n    var sheet = this.documentStyleSheet();\n    var adaptor = this.adaptor;\n    if (sheet && !adaptor.parent(sheet)) {\n      var head = adaptor.head(this.document);\n      var styles = this.findSheet(head, adaptor.getAttribute(sheet, 'id'));\n      if (styles) {\n        adaptor.replace(sheet, styles);\n      } else {\n        adaptor.append(head, sheet);\n      }\n    }\n  };\n  HTMLDocument.prototype.findSheet = function (head, id) {\n    var e_6, _a;\n    if (id) {\n      try {\n        for (var _b = __values(this.adaptor.tags(head, 'style')), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var sheet = _c.value;\n          if (this.adaptor.getAttribute(sheet, 'id') === id) {\n            return sheet;\n          }\n        }\n      } catch (e_6_1) {\n        e_6 = {\n          error: e_6_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_6) throw e_6.error;\n        }\n      }\n    }\n    return null;\n  };\n  HTMLDocument.prototype.removeFromDocument = function (restore) {\n    var e_7, _a;\n    if (restore === void 0) {\n      restore = false;\n    }\n    if (this.processed.isSet('updateDocument')) {\n      try {\n        for (var _b = __values(this.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var math = _c.value;\n          if (math.state() >= MathItem_js_1.STATE.INSERTED) {\n            math.state(MathItem_js_1.STATE.TYPESET, restore);\n          }\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n    this.processed.clear('updateDocument');\n    return this;\n  };\n  HTMLDocument.prototype.documentStyleSheet = function () {\n    return this.outputJax.styleSheet(this);\n  };\n  HTMLDocument.prototype.documentPageElements = function () {\n    return this.outputJax.pageElements(this);\n  };\n  HTMLDocument.prototype.addStyles = function (styles) {\n    this.styles.push(styles);\n  };\n  HTMLDocument.prototype.getStyles = function () {\n    return this.styles;\n  };\n  HTMLDocument.KIND = 'HTML';\n  HTMLDocument.OPTIONS = __assign(__assign({}, MathDocument_js_1.AbstractMathDocument.OPTIONS), {\n    renderActions: (0, Options_js_1.expandable)(__assign(__assign({}, MathDocument_js_1.AbstractMathDocument.OPTIONS.renderActions), {\n      styles: [MathItem_js_1.STATE.INSERTED + 1, '', 'updateStyleSheet', false]\n    })),\n    MathList: HTMLMathList_js_1.HTMLMathList,\n    MathItem: HTMLMathItem_js_1.HTMLMathItem,\n    DomStrings: null\n  });\n  return HTMLDocument;\n}(MathDocument_js_1.AbstractMathDocument);\nexports.HTMLDocument = HTMLDocument;","map":{"version":3,"names":["MathDocument_js_1","require","Options_js_1","HTMLMathItem_js_1","HTMLMathList_js_1","HTMLDomStrings_js_1","MathItem_js_1","HTMLDocument","_super","__extends","document","adaptor","options","_this","_a","__read","separateOptions","HTMLDomStrings","OPTIONS","html","dom","call","domStrings","styles","prototype","findPosition","N","index","delim","nodes","_b","__values","_c","next","done","list","value","_d","node","n","kind","Math","max","mathItem","item","jax","math","start","open","end","close","MathItem","display","findMath","processed","isSet","userOptions","elements","body","_f","getElements","_g","container","_h","strings","_j","e_3","inputJax","_k","processStrings","find","_l","e_4","_m","push","_o","e_5","_p","merge","set","updateDocument","addPageElements","addStyleSheet","documentPageElements","append","sheet","documentStyleSheet","parent","head","findSheet","getAttribute","replace","id","tags","removeFromDocument","restore","state","STATE","INSERTED","TYPESET","clear","outputJax","styleSheet","pageElements","addStyles","getStyles","KIND","__assign","AbstractMathDocument","renderActions","expandable","MathList","HTMLMathList","HTMLMathItem","DomStrings","exports"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/node_modules/mathjax-full/ts/handlers/html/HTMLDocument.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2017-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the HTMLDocument class\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {AbstractMathDocument} from '../../core/MathDocument.js';\nimport {userOptions, separateOptions, OptionList, expandable} from '../../util/Options.js';\nimport {HTMLMathItem} from './HTMLMathItem.js';\nimport {HTMLMathList} from './HTMLMathList.js';\nimport {HTMLDomStrings} from './HTMLDomStrings.js';\nimport {DOMAdaptor} from '../../core/DOMAdaptor.js';\nimport {InputJax} from '../../core/InputJax.js';\nimport {STATE, ProtoItem, Location} from '../../core/MathItem.js';\nimport {StyleList} from '../../util/StyleList.js';\n\n/*****************************************************************/\n/**\n * List of Lists of pairs consisting of a DOM node and its text length\n *\n * These represent the Text elements that make up a single\n * string in the list of strings to be searched for math\n * (multiple consecutive Text nodes can form a single string).\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n */\nexport type HTMLNodeArray<N, T> = [N | T, number][][];\n\n/*****************************************************************/\n/**\n *  The HTMLDocument class (extends AbstractMathDocument)\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\nexport class HTMLDocument<N, T, D> extends AbstractMathDocument<N, T, D> {\n\n  /**\n   * The kind of document\n   */\n  public static KIND: string = 'HTML';\n\n  /**\n   * The default options for HTMLDocument\n   */\n  public static OPTIONS: OptionList = {\n    ...AbstractMathDocument.OPTIONS,\n    renderActions: expandable({\n      ...AbstractMathDocument.OPTIONS.renderActions,\n      styles: [STATE.INSERTED + 1, '', 'updateStyleSheet', false]  // update styles on a rerender() call\n    }),\n    MathList: HTMLMathList,           // Use the HTMLMathList for MathLists\n    MathItem: HTMLMathItem,           // Use the HTMLMathItem for MathItem\n    DomStrings: null                  // Use the default DomString parser\n  };\n\n  /**\n   * Extra styles to be included in the document's stylesheet (added by extensions)\n   */\n  protected styles: StyleList[];\n\n  /**\n   * The DomString parser for locating the text in DOM trees\n   */\n  public domStrings: HTMLDomStrings<N, T, D>;\n\n  /**\n   * @override\n   * @constructor\n   * @extends {AbstractMathDocument}\n   */\n  constructor(document: any, adaptor: DOMAdaptor<N, T, D>, options: OptionList) {\n    let [html, dom] = separateOptions(options, HTMLDomStrings.OPTIONS);\n    super(document, adaptor, html);\n    this.domStrings = this.options['DomStrings'] || new HTMLDomStrings<N, T, D>(dom);\n    this.domStrings.adaptor = adaptor;\n    this.styles = [];\n  }\n\n  /**\n   * Creates a Location object for a delimiter at the position given by index in the N's string\n   *  of the array of strings searched for math, recovering the original DOM node where the delimiter\n   *  was found.\n   *\n   * @param {number} N             The index of the string in the string array\n   * @param {number} index         The position within the N's string that needs to be found\n   * @param {string} delim         The delimiter for this position\n   * @param {HTMLNodeArray} nodes  The list of node lists representing the string array\n   * @return {Location}            The Location object for the position of the delimiter in the document\n   */\n  protected findPosition(N: number, index: number, delim: string, nodes: HTMLNodeArray<N, T>): Location<N, T> {\n    const adaptor = this.adaptor;\n    for (const list of nodes[N]) {\n      let [node, n] = list;\n      if (index <= n && adaptor.kind(node) === '#text') {\n        return {node: node, n: Math.max(index, 0), delim: delim};\n      }\n      index -= n;\n    }\n    return {node: null, n: 0, delim: delim};\n  }\n\n  /**\n   * Convert a ProtoItem to a MathItem (i.e., determine the actual Location\n   *  objects for its start and end)\n   *\n   * @param {ProtoItem} item       The proto math item to turn into an actual MathItem\n   * @param {InputJax} jax         The input jax to use for the MathItem\n   * @param {HTMLNodeArray} nodes  The array of node lists that produced the string array\n   * @return {HTMLMathItem}        The MathItem for the given proto item\n   */\n  protected mathItem(item: ProtoItem<N, T>, jax: InputJax<N, T, D>,\n                     nodes: HTMLNodeArray<N, T>): HTMLMathItem<N, T, D> {\n                       let math = item.math;\n                       let start = this.findPosition(item.n, item.start.n, item.open, nodes);\n                       let end = this.findPosition(item.n, item.end.n, item.close, nodes);\n                       return new this.options.MathItem(math, jax, item.display, start, end) as HTMLMathItem<N, T, D>;\n                     }\n\n  /**\n   * Find math within the document:\n   *  Get the list of containers (default is document.body), and for each:\n   *    For each input jax:\n   *      Make a new MathList to store the located math\n   *      If the input jax processes strings:\n   *        If we haven't already made the string array and corresponding node list, do so\n   *        Ask the jax to find the math in the string array, and\n   *          for each one, push it onto the math list\n   *      Otherwise (the jax processes DOM nodes):\n   *        Ask the jax to find the math in the container, and\n   *          for each one, make the result into a MathItem, and push it on the list\n   *      Merge the new math list into the document's math list\n   *        (we use merge to maintain a sorted list of MathItems)\n   *\n   * @override\n   */\n  public findMath(options: OptionList) {\n    if (!this.processed.isSet('findMath')) {\n      this.adaptor.document = this.document;\n      options = userOptions({elements: this.options.elements || [this.adaptor.body(this.document)]}, options);\n      for (const container of this.adaptor.getElements(options['elements'], this.document)) {\n        let [strings, nodes] = [null, null] as [string[], HTMLNodeArray<N, T>];\n        for (const jax of this.inputJax) {\n          let list = new (this.options['MathList'])();\n          if (jax.processStrings) {\n            if (strings === null) {\n              [strings, nodes] = this.domStrings.find(container);\n            }\n            for (const math of jax.findMath(strings)) {\n              list.push(this.mathItem(math, jax, nodes));\n            }\n          } else {\n            for (const math of jax.findMath(container)) {\n              let item: HTMLMathItem<N, T, D> =\n                new this.options.MathItem(math.math, jax, math.display, math.start, math.end);\n              list.push(item);\n            }\n          }\n          this.math.merge(list);\n        }\n      }\n      this.processed.set('findMath');\n    }\n    return this;\n  }\n\n  /**\n   * @override\n   */\n  public updateDocument() {\n    if (!this.processed.isSet('updateDocument')) {\n      this.addPageElements();\n      this.addStyleSheet();\n      super.updateDocument();\n      this.processed.set('updateDocument');\n    }\n    return this;\n  }\n\n  /**\n   *  Add any elements needed for the document\n   */\n  protected addPageElements() {\n    const body = this.adaptor.body(this.document);\n    const node = this.documentPageElements();\n    if (node) {\n      this.adaptor.append(body, node);\n    }\n  }\n\n  /**\n   * Add the stylesheet to the document\n   */\n  public addStyleSheet() {\n    const sheet = this.documentStyleSheet();\n    const adaptor = this.adaptor;\n    if (sheet && !adaptor.parent(sheet)) {\n      const head = adaptor.head(this.document);\n      let styles = this.findSheet(head, adaptor.getAttribute(sheet, 'id'));\n      if (styles) {\n        adaptor.replace(sheet, styles);\n      } else {\n        adaptor.append(head, sheet);\n      }\n    }\n  }\n\n  /**\n   * @param {N} head     The document <head>\n   * @param {string} id  The id of the stylesheet to find\n   * @param {N|null}     The stylesheet with the given ID\n   */\n  protected findSheet(head: N, id: string) {\n    if (id) {\n      for (const sheet of this.adaptor.tags(head, 'style')) {\n        if (this.adaptor.getAttribute(sheet, 'id') === id) {\n          return sheet;\n        }\n      }\n    }\n    return null as N;\n  }\n\n  /**\n   * @override\n   */\n  public removeFromDocument(restore: boolean = false) {\n    if (this.processed.isSet('updateDocument')) {\n      for (const math of this.math) {\n        if (math.state() >= STATE.INSERTED) {\n          math.state(STATE.TYPESET, restore);\n        }\n      }\n    }\n    this.processed.clear('updateDocument');\n    return this;\n  }\n\n  /**\n   * @override\n   */\n  public documentStyleSheet() {\n    return this.outputJax.styleSheet(this);\n  }\n\n  /**\n   * @override\n   */\n  public documentPageElements() {\n    return this.outputJax.pageElements(this);\n  }\n\n  /**\n   * Add styles to be included in the document's stylesheet\n   *\n   * @param {StyleList} styles   The styles to include\n   */\n  public addStyles(styles: StyleList) {\n    this.styles.push(styles);\n  }\n\n  /**\n   * Get the array of document-specific styles\n   */\n  public getStyles() {\n    return this.styles;\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}