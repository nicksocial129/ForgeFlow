{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from'react-redux';import{useSnackbar}from'notistack';import{removeSnackbar}from'store/actions';let displayed=[];const useNotifier=()=>{const dispatch=useDispatch();const notifier=useSelector(state=>state.notifier);const{notifications}=notifier;const{enqueueSnackbar,closeSnackbar}=useSnackbar();const storeDisplayed=id=>{displayed=[...displayed,id];};const removeDisplayed=id=>{displayed=[...displayed.filter(key=>id!==key)];};React.useEffect(()=>{notifications.forEach(_ref=>{let{key,message,options={},dismissed=false}=_ref;if(dismissed){// dismiss snackbar using notistack\ncloseSnackbar(key);return;}// do nothing if snackbar is already displayed\nif(displayed.includes(key))return;// display snackbar using notistack\nenqueueSnackbar(message,{key,...options,onClose:(event,reason,myKey)=>{if(options.onClose){options.onClose(event,reason,myKey);}},onExited:(event,myKey)=>{// remove this snackbar from redux store\ndispatch(removeSnackbar(myKey));removeDisplayed(myKey);}});// keep track of snackbars that we've displayed\nstoreDisplayed(key);});},[notifications,closeSnackbar,enqueueSnackbar,dispatch]);};export default useNotifier;","map":{"version":3,"names":["React","useDispatch","useSelector","useSnackbar","removeSnackbar","displayed","useNotifier","dispatch","notifier","state","notifications","enqueueSnackbar","closeSnackbar","storeDisplayed","id","removeDisplayed","filter","key","useEffect","forEach","_ref","message","options","dismissed","includes","onClose","event","reason","myKey","onExited"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/packages/ui/src/utils/useNotifier.js"],"sourcesContent":["import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useSnackbar } from 'notistack'\nimport { removeSnackbar } from 'store/actions'\n\nlet displayed = []\n\nconst useNotifier = () => {\n    const dispatch = useDispatch()\n    const notifier = useSelector((state) => state.notifier)\n    const { notifications } = notifier\n\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n    const storeDisplayed = (id) => {\n        displayed = [...displayed, id]\n    }\n\n    const removeDisplayed = (id) => {\n        displayed = [...displayed.filter((key) => id !== key)]\n    }\n\n    React.useEffect(() => {\n        notifications.forEach(({ key, message, options = {}, dismissed = false }) => {\n            if (dismissed) {\n                // dismiss snackbar using notistack\n                closeSnackbar(key)\n                return\n            }\n\n            // do nothing if snackbar is already displayed\n            if (displayed.includes(key)) return\n\n            // display snackbar using notistack\n            enqueueSnackbar(message, {\n                key,\n                ...options,\n                onClose: (event, reason, myKey) => {\n                    if (options.onClose) {\n                        options.onClose(event, reason, myKey)\n                    }\n                },\n                onExited: (event, myKey) => {\n                    // remove this snackbar from redux store\n                    dispatch(removeSnackbar(myKey))\n                    removeDisplayed(myKey)\n                }\n            })\n\n            // keep track of snackbars that we've displayed\n            storeDisplayed(key)\n        })\n    }, [notifications, closeSnackbar, enqueueSnackbar, dispatch])\n}\n\nexport default useNotifier\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,WAAW,CACvC,OAASC,cAAc,KAAQ,eAAe,CAE9C,GAAI,CAAAC,SAAS,CAAG,EAAE,CAElB,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAO,QAAQ,CAAGN,WAAW,CAAEO,KAAK,EAAKA,KAAK,CAACD,QAAQ,CAAC,CACvD,KAAM,CAAEE,aAAc,CAAC,CAAGF,QAAQ,CAElC,KAAM,CAAEG,eAAe,CAAEC,aAAc,CAAC,CAAGT,WAAW,CAAC,CAAC,CAExD,KAAM,CAAAU,cAAc,CAAIC,EAAE,EAAK,CAC3BT,SAAS,CAAG,CAAC,GAAGA,SAAS,CAAES,EAAE,CAAC,CAClC,CAAC,CAED,KAAM,CAAAC,eAAe,CAAID,EAAE,EAAK,CAC5BT,SAAS,CAAG,CAAC,GAAGA,SAAS,CAACW,MAAM,CAAEC,GAAG,EAAKH,EAAE,GAAKG,GAAG,CAAC,CAAC,CAC1D,CAAC,CAEDjB,KAAK,CAACkB,SAAS,CAAC,IAAM,CAClBR,aAAa,CAACS,OAAO,CAACC,IAAA,EAAuD,IAAtD,CAAEH,GAAG,CAAEI,OAAO,CAAEC,OAAO,CAAG,CAAC,CAAC,CAAEC,SAAS,CAAG,KAAM,CAAC,CAAAH,IAAA,CACpE,GAAIG,SAAS,CAAE,CACX;AACAX,aAAa,CAACK,GAAG,CAAC,CAClB,OACJ,CAEA;AACA,GAAIZ,SAAS,CAACmB,QAAQ,CAACP,GAAG,CAAC,CAAE,OAE7B;AACAN,eAAe,CAACU,OAAO,CAAE,CACrBJ,GAAG,CACH,GAAGK,OAAO,CACVG,OAAO,CAAEA,CAACC,KAAK,CAAEC,MAAM,CAAEC,KAAK,GAAK,CAC/B,GAAIN,OAAO,CAACG,OAAO,CAAE,CACjBH,OAAO,CAACG,OAAO,CAACC,KAAK,CAAEC,MAAM,CAAEC,KAAK,CAAC,CACzC,CACJ,CAAC,CACDC,QAAQ,CAAEA,CAACH,KAAK,CAAEE,KAAK,GAAK,CACxB;AACArB,QAAQ,CAACH,cAAc,CAACwB,KAAK,CAAC,CAAC,CAC/Bb,eAAe,CAACa,KAAK,CAAC,CAC1B,CACJ,CAAC,CAAC,CAEF;AACAf,cAAc,CAACI,GAAG,CAAC,CACvB,CAAC,CAAC,CACN,CAAC,CAAE,CAACP,aAAa,CAAEE,aAAa,CAAED,eAAe,CAAEJ,QAAQ,CAAC,CAAC,CACjE,CAAC,CAED,cAAe,CAAAD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}