{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HTMLAdaptor = void 0;\nvar DOMAdaptor_js_1 = require(\"../core/DOMAdaptor.js\");\nvar HTMLAdaptor = function (_super) {\n  __extends(HTMLAdaptor, _super);\n  function HTMLAdaptor(window) {\n    var _this = _super.call(this, window.document) || this;\n    _this.window = window;\n    _this.parser = new window.DOMParser();\n    return _this;\n  }\n  HTMLAdaptor.prototype.parse = function (text, format) {\n    if (format === void 0) {\n      format = 'text/html';\n    }\n    return this.parser.parseFromString(text, format);\n  };\n  HTMLAdaptor.prototype.create = function (kind, ns) {\n    return ns ? this.document.createElementNS(ns, kind) : this.document.createElement(kind);\n  };\n  HTMLAdaptor.prototype.text = function (text) {\n    return this.document.createTextNode(text);\n  };\n  HTMLAdaptor.prototype.head = function (doc) {\n    return doc.head || doc;\n  };\n  HTMLAdaptor.prototype.body = function (doc) {\n    return doc.body || doc;\n  };\n  HTMLAdaptor.prototype.root = function (doc) {\n    return doc.documentElement || doc;\n  };\n  HTMLAdaptor.prototype.doctype = function (doc) {\n    return doc.doctype ? \"<!DOCTYPE \".concat(doc.doctype.name, \">\") : '';\n  };\n  HTMLAdaptor.prototype.tags = function (node, name, ns) {\n    if (ns === void 0) {\n      ns = null;\n    }\n    var nodes = ns ? node.getElementsByTagNameNS(ns, name) : node.getElementsByTagName(name);\n    return Array.from(nodes);\n  };\n  HTMLAdaptor.prototype.getElements = function (nodes, _document) {\n    var e_1, _a;\n    var containers = [];\n    try {\n      for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n        var node = nodes_1_1.value;\n        if (typeof node === 'string') {\n          containers = containers.concat(Array.from(this.document.querySelectorAll(node)));\n        } else if (Array.isArray(node)) {\n          containers = containers.concat(Array.from(node));\n        } else if (node instanceof this.window.NodeList || node instanceof this.window.HTMLCollection) {\n          containers = containers.concat(Array.from(node));\n        } else {\n          containers.push(node);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return containers;\n  };\n  HTMLAdaptor.prototype.contains = function (container, node) {\n    return container.contains(node);\n  };\n  HTMLAdaptor.prototype.parent = function (node) {\n    return node.parentNode;\n  };\n  HTMLAdaptor.prototype.append = function (node, child) {\n    return node.appendChild(child);\n  };\n  HTMLAdaptor.prototype.insert = function (nchild, ochild) {\n    return this.parent(ochild).insertBefore(nchild, ochild);\n  };\n  HTMLAdaptor.prototype.remove = function (child) {\n    return this.parent(child).removeChild(child);\n  };\n  HTMLAdaptor.prototype.replace = function (nnode, onode) {\n    return this.parent(onode).replaceChild(nnode, onode);\n  };\n  HTMLAdaptor.prototype.clone = function (node) {\n    return node.cloneNode(true);\n  };\n  HTMLAdaptor.prototype.split = function (node, n) {\n    return node.splitText(n);\n  };\n  HTMLAdaptor.prototype.next = function (node) {\n    return node.nextSibling;\n  };\n  HTMLAdaptor.prototype.previous = function (node) {\n    return node.previousSibling;\n  };\n  HTMLAdaptor.prototype.firstChild = function (node) {\n    return node.firstChild;\n  };\n  HTMLAdaptor.prototype.lastChild = function (node) {\n    return node.lastChild;\n  };\n  HTMLAdaptor.prototype.childNodes = function (node) {\n    return Array.from(node.childNodes);\n  };\n  HTMLAdaptor.prototype.childNode = function (node, i) {\n    return node.childNodes[i];\n  };\n  HTMLAdaptor.prototype.kind = function (node) {\n    var n = node.nodeType;\n    return n === 1 || n === 3 || n === 8 ? node.nodeName.toLowerCase() : '';\n  };\n  HTMLAdaptor.prototype.value = function (node) {\n    return node.nodeValue || '';\n  };\n  HTMLAdaptor.prototype.textContent = function (node) {\n    return node.textContent;\n  };\n  HTMLAdaptor.prototype.innerHTML = function (node) {\n    return node.innerHTML;\n  };\n  HTMLAdaptor.prototype.outerHTML = function (node) {\n    return node.outerHTML;\n  };\n  HTMLAdaptor.prototype.serializeXML = function (node) {\n    var serializer = new this.window.XMLSerializer();\n    return serializer.serializeToString(node);\n  };\n  HTMLAdaptor.prototype.setAttribute = function (node, name, value, ns) {\n    if (ns === void 0) {\n      ns = null;\n    }\n    if (!ns) {\n      return node.setAttribute(name, value);\n    }\n    name = ns.replace(/.*\\//, '') + ':' + name.replace(/^.*:/, '');\n    return node.setAttributeNS(ns, name, value);\n  };\n  HTMLAdaptor.prototype.getAttribute = function (node, name) {\n    return node.getAttribute(name);\n  };\n  HTMLAdaptor.prototype.removeAttribute = function (node, name) {\n    return node.removeAttribute(name);\n  };\n  HTMLAdaptor.prototype.hasAttribute = function (node, name) {\n    return node.hasAttribute(name);\n  };\n  HTMLAdaptor.prototype.allAttributes = function (node) {\n    return Array.from(node.attributes).map(function (x) {\n      return {\n        name: x.name,\n        value: x.value\n      };\n    });\n  };\n  HTMLAdaptor.prototype.addClass = function (node, name) {\n    if (node.classList) {\n      node.classList.add(name);\n    } else {\n      node.className = (node.className + ' ' + name).trim();\n    }\n  };\n  HTMLAdaptor.prototype.removeClass = function (node, name) {\n    if (node.classList) {\n      node.classList.remove(name);\n    } else {\n      node.className = node.className.split(/ /).filter(function (c) {\n        return c !== name;\n      }).join(' ');\n    }\n  };\n  HTMLAdaptor.prototype.hasClass = function (node, name) {\n    if (node.classList) {\n      return node.classList.contains(name);\n    }\n    return node.className.split(/ /).indexOf(name) >= 0;\n  };\n  HTMLAdaptor.prototype.setStyle = function (node, name, value) {\n    node.style[name] = value;\n  };\n  HTMLAdaptor.prototype.getStyle = function (node, name) {\n    return node.style[name];\n  };\n  HTMLAdaptor.prototype.allStyles = function (node) {\n    return node.style.cssText;\n  };\n  HTMLAdaptor.prototype.insertRules = function (node, rules) {\n    var e_2, _a;\n    try {\n      for (var _b = __values(rules.reverse()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var rule = _c.value;\n        try {\n          node.sheet.insertRule(rule, 0);\n        } catch (e) {\n          console.warn(\"MathJax: can't insert css rule '\".concat(rule, \"': \").concat(e.message));\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n  HTMLAdaptor.prototype.fontSize = function (node) {\n    var style = this.window.getComputedStyle(node);\n    return parseFloat(style.fontSize);\n  };\n  HTMLAdaptor.prototype.fontFamily = function (node) {\n    var style = this.window.getComputedStyle(node);\n    return style.fontFamily || '';\n  };\n  HTMLAdaptor.prototype.nodeSize = function (node, em, local) {\n    if (em === void 0) {\n      em = 1;\n    }\n    if (local === void 0) {\n      local = false;\n    }\n    if (local && node.getBBox) {\n      var _a = node.getBBox(),\n        width = _a.width,\n        height = _a.height;\n      return [width / em, height / em];\n    }\n    return [node.offsetWidth / em, node.offsetHeight / em];\n  };\n  HTMLAdaptor.prototype.nodeBBox = function (node) {\n    var _a = node.getBoundingClientRect(),\n      left = _a.left,\n      right = _a.right,\n      top = _a.top,\n      bottom = _a.bottom;\n    return {\n      left: left,\n      right: right,\n      top: top,\n      bottom: bottom\n    };\n  };\n  return HTMLAdaptor;\n}(DOMAdaptor_js_1.AbstractDOMAdaptor);\nexports.HTMLAdaptor = HTMLAdaptor;","map":{"version":3,"names":["DOMAdaptor_js_1","require","HTMLAdaptor","_super","__extends","window","_this","call","document","parser","DOMParser","prototype","parse","text","format","parseFromString","create","kind","ns","createElementNS","createElement","createTextNode","head","doc","body","root","documentElement","doctype","concat","name","tags","node","nodes","getElementsByTagNameNS","getElementsByTagName","Array","from","getElements","_document","containers","nodes_1","__values","nodes_1_1","next","done","value","querySelectorAll","isArray","NodeList","HTMLCollection","push","contains","container","parent","parentNode","append","child","appendChild","insert","nchild","ochild","insertBefore","remove","removeChild","replace","nnode","onode","replaceChild","clone","cloneNode","split","n","splitText","nextSibling","previous","previousSibling","firstChild","lastChild","childNodes","childNode","i","nodeType","nodeName","toLowerCase","nodeValue","textContent","innerHTML","outerHTML","serializeXML","serializer","XMLSerializer","serializeToString","setAttribute","setAttributeNS","getAttribute","removeAttribute","hasAttribute","allAttributes","attributes","map","x","addClass","classList","add","className","trim","removeClass","filter","c","join","hasClass","indexOf","setStyle","style","getStyle","allStyles","cssText","insertRules","rules","_b","reverse","_c","rule","sheet","insertRule","e","console","warn","message","fontSize","getComputedStyle","parseFloat","fontFamily","nodeSize","em","local","getBBox","_a","width","height","offsetWidth","offsetHeight","nodeBBox","getBoundingClientRect","left","right","top","bottom","AbstractDOMAdaptor","exports"],"sources":["/Users/nickprince/Desktop/Flowise Working Commit/node_modules/mathjax-full/ts/adaptors/HTMLAdaptor.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2018-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the HTML DOM adaptor\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {OptionList} from '../util/Options.js';\nimport {AttributeData, AbstractDOMAdaptor, DOMAdaptor, PageBBox} from '../core/DOMAdaptor.js';\n\n/*****************************************************************/\n/**\n * The minimum fields needed for a Document\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n */\nexport interface MinDocument<N, T> {\n  documentElement: N;\n  head: N;\n  body: N;\n  title: string;\n  doctype: {name: string};\n  /* tslint:disable:jsdoc-require */\n  createElement(kind: string): N;\n  createElementNS(ns: string, kind: string): N;\n  createTextNode(text: string): T;\n  querySelectorAll(selector: string): ArrayLike<N>;\n  /* tslint:enable */\n}\n\n/*****************************************************************/\n/**\n * The minimum fields needed for an HTML Element\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n */\nexport interface MinHTMLElement<N, T> {\n  nodeType: number;\n  nodeName: string;\n  nodeValue: string;\n  textContent: string;\n  innerHTML: string;\n  outerHTML: string;\n  parentNode: N | Node;\n  nextSibling: N | T | Node;\n  previousSibling: N | T | Node;\n  offsetWidth: number;\n  offsetHeight: number;\n\n  attributes: AttributeData[] | NamedNodeMap;\n  className: string;\n  classList: DOMTokenList;\n  style: OptionList;\n  sheet?: {insertRule: (rule: string, index?: number) => void};\n\n  childNodes: (N | T)[] | NodeList;\n  firstChild: N | T | Node;\n  lastChild: N | T | Node;\n  /* tslint:disable:jsdoc-require */\n  getElementsByTagName(name: string): N[] | HTMLCollectionOf<Element>;\n  getElementsByTagNameNS(ns: string, name: string): N[] | HTMLCollectionOf<Element>;\n  contains(child: N | T): boolean;\n  appendChild(child: N | T): N | T | Node;\n  removeChild(child: N | T): N | T  | Node;\n  replaceChild(nnode: N | T, onode: N | T): N | T  | Node;\n  insertBefore(nchild: N | T, ochild: N | T): void;\n  cloneNode(deep: boolean): N | Node;\n  setAttribute(name: string, value: string): void;\n  setAttributeNS(ns: string, name: string, value: string): void;\n  getAttribute(name: string): string;\n  removeAttribute(name: string): void;\n  hasAttribute(name: string): boolean;\n  getBoundingClientRect(): Object;\n  getBBox?(): {x: number, y: number, width: number, height: number};\n  /* tslint:endable */\n}\n\n/*****************************************************************/\n/**\n * The minimum fields needed for a Text element\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n */\nexport interface MinText<N, T> {\n  nodeType: number;\n  nodeName: string;\n  nodeValue: string;\n  parentNode: N | Node;\n  nextSibling: N | T | Node;\n  previousSibling: N | T | Node;\n  splitText(n: number): T;\n}\n\n/*****************************************************************/\n/**\n * The minimum fields needed for a DOMParser\n *\n * @template D  The Document class\n */\nexport interface MinDOMParser<D> {\n  parseFromString(text: string, format?: string): D;\n}\n\n/*****************************************************************/\n/**\n * The minimum fields needed for a DOMParser\n *\n * @template N  The HTMLElement node class\n */\nexport interface MinXMLSerializer<N> {\n  serializeToString(node: N): string;\n}\n\n/*****************************************************************/\n/**\n * The minimum fields needed for a Window\n *\n * @template N  The HTMLElement node class\n * @template D  The Document class\n */\nexport interface MinWindow<N, D> {\n  document: D;\n  DOMParser: {\n    new(): MinDOMParser<D>\n  };\n  XMLSerializer: {\n    new(): MinXMLSerializer<N>;\n  };\n  NodeList: any;\n  HTMLCollection: any;\n  HTMLElement: any;\n  DocumentFragment: any;\n  Document: any;\n  getComputedStyle(node: N): any;\n}\n\n/*****************************************************************/\n/**\n * The minimum needed for an HTML Adaptor\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\nexport interface MinHTMLAdaptor<N, T, D> extends DOMAdaptor<N, T, D> {\n  window: MinWindow<N, D>;\n}\n\n/*****************************************************************/\n/**\n *  Abstract HTMLAdaptor class for manipulating HTML elements\n *  (subclass of AbstractDOMAdaptor)\n *\n *  N = HTMLElement node class\n *  T = Text node class\n *  D = Document class\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\nexport class HTMLAdaptor<N extends MinHTMLElement<N, T>, T extends MinText<N, T>, D extends MinDocument<N, T>> extends\nAbstractDOMAdaptor<N, T, D> implements MinHTMLAdaptor<N, T, D> {\n  /**\n   * The window object for this adaptor\n   */\n  public window: MinWindow<N, D>;\n\n  /**\n   * The DOMParser used to parse a string into a DOM tree\n   */\n  public parser: MinDOMParser<D>;\n\n  /**\n   * @override\n   * @constructor\n   */\n  constructor(window: MinWindow<N, D>) {\n    super(window.document);\n    this.window = window;\n    this.parser = new (window.DOMParser as any)();\n  }\n\n  /**\n   * @override\n   */\n  public parse(text: string, format: string = 'text/html') {\n    return this.parser.parseFromString(text, format);\n  }\n\n  /**\n   * @override\n   */\n  protected create(kind: string, ns?: string) {\n    return (ns ?\n            this.document.createElementNS(ns, kind) :\n            this.document.createElement(kind));\n  }\n\n  /**\n   * @override\n   */\n  public text(text: string) {\n    return this.document.createTextNode(text);\n  }\n\n  /**\n   * @override\n   */\n  public head(doc: D) {\n    return doc.head || (doc as any as N);\n  }\n\n  /**\n   * @override\n   */\n  public body(doc: D) {\n    return doc.body || (doc as any as N);\n  }\n\n  /**\n   * @override\n   */\n  public root(doc: D) {\n    return doc.documentElement || (doc as any as N);\n  }\n\n  /**\n   * @override\n   */\n  public doctype(doc: D) {\n    return (doc.doctype ? `<!DOCTYPE ${doc.doctype.name}>` : '');\n  }\n\n  /**\n   * @override\n   */\n  public tags(node: N, name: string, ns: string = null) {\n    let nodes = (ns ? node.getElementsByTagNameNS(ns, name) : node.getElementsByTagName(name));\n    return Array.from(nodes as N[]) as N[];\n  }\n\n  /**\n   * @override\n   */\n  public getElements(nodes: (string | N | N[])[], _document: D) {\n    let containers: N[] = [];\n    for (const node of nodes) {\n      if (typeof(node) === 'string') {\n        containers = containers.concat(Array.from(this.document.querySelectorAll(node)));\n      } else if (Array.isArray(node)) {\n        containers = containers.concat(Array.from(node) as N[]);\n      } else if (node instanceof this.window.NodeList || node instanceof this.window.HTMLCollection) {\n        containers = containers.concat(Array.from(node as any as N[]));\n      } else {\n        containers.push(node);\n      }\n    }\n    return containers;\n  }\n\n  /**\n   * @override\n   */\n  public contains(container: N, node: N | T) {\n    return container.contains(node);\n  }\n\n  /**\n   * @override\n   */\n  public parent(node: N | T) {\n    return node.parentNode as N;\n  }\n\n  /**\n   * @override\n   */\n  public append(node: N, child: N | T) {\n    return node.appendChild(child) as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public insert(nchild: N | T, ochild: N | T) {\n    return this.parent(ochild).insertBefore(nchild, ochild);\n  }\n\n  /**\n   * @override\n   */\n  public remove(child: N | T) {\n    return this.parent(child).removeChild(child) as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public replace(nnode: N | T, onode: N | T) {\n    return this.parent(onode).replaceChild(nnode, onode) as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public clone(node: N) {\n    return node.cloneNode(true) as N;\n  }\n\n  /**\n   * @override\n   */\n  public split(node: T, n: number) {\n    return node.splitText(n);\n  }\n\n  /**\n   * @override\n   */\n  public next(node: N | T) {\n    return node.nextSibling as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public previous(node: N | T) {\n    return node.previousSibling as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public firstChild(node: N) {\n    return node.firstChild as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public lastChild(node: N) {\n    return node.lastChild as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public childNodes(node: N) {\n    return Array.from(node.childNodes as (N | T)[]);\n  }\n\n  /**\n   * @override\n   */\n  public childNode(node: N, i: number) {\n    return node.childNodes[i] as N | T;\n  }\n\n  /**\n   * @override\n   */\n  public kind(node: N | T) {\n    const n = node.nodeType;\n    return (n === 1 || n === 3 || n === 8 ? node.nodeName.toLowerCase() : '');\n  }\n\n  /**\n   * @override\n   */\n  public value(node: N | T) {\n    return node.nodeValue || '';\n  }\n\n  /**\n   * @override\n   */\n  public textContent(node: N) {\n    return node.textContent;\n  }\n\n  /**\n   * @override\n   */\n  public innerHTML(node: N) {\n    return node.innerHTML;\n  }\n\n  /**\n   * @override\n   */\n  public outerHTML(node: N) {\n    return node.outerHTML;\n  }\n\n  public serializeXML(node: N) {\n    const serializer = new this.window.XMLSerializer();\n    return serializer.serializeToString(node) as string;\n  }\n\n  /**\n   * @override\n   */\n  public setAttribute(node: N, name: string, value: string, ns: string = null) {\n    if (!ns) {\n      return node.setAttribute(name, value);\n    }\n    name = ns.replace(/.*\\//, '') + ':' + name.replace(/^.*:/, '');\n    return node.setAttributeNS(ns, name, value);\n  }\n\n  /**\n   * @override\n   */\n  public getAttribute(node: N, name: string) {\n    return node.getAttribute(name);\n  }\n\n  /**\n   * @override\n   */\n  public removeAttribute(node: N, name: string) {\n    return node.removeAttribute(name);\n  }\n\n  /**\n   * @override\n   */\n  public hasAttribute(node: N, name: string) {\n    return node.hasAttribute(name);\n  }\n\n  /**\n   * @override\n   */\n  public allAttributes(node: N) {\n    return Array.from(node.attributes).map(\n      (x: AttributeData) => {\n        return {name: x.name, value: x.value} as AttributeData;\n      }\n    );\n  }\n\n  /**\n   * @override\n   */\n  public addClass(node: N, name: string) {\n    if (node.classList) {\n      node.classList.add(name);\n    } else {\n      node.className = (node.className + ' ' + name).trim();\n    }\n  }\n\n  /**\n   * @override\n   */\n  public removeClass(node: N, name: string) {\n    if (node.classList) {\n      node.classList.remove(name);\n    } else {\n      node.className = node.className.split(/ /).filter((c) => c !== name).join(' ');\n    }\n  }\n\n  /**\n   * @override\n   */\n  public hasClass(node: N, name: string) {\n    if (node.classList) {\n      return node.classList.contains(name);\n    }\n    return node.className.split(/ /).indexOf(name) >= 0;\n  }\n\n  /**\n   * @override\n   */\n  public setStyle(node: N, name: string, value: string) {\n    (node.style as OptionList)[name] = value;\n  }\n\n  /**\n   * @override\n   */\n  public getStyle(node: N, name: string) {\n    return (node.style as OptionList)[name];\n  }\n\n  /**\n   * @override\n   */\n  public allStyles(node: N) {\n    return node.style.cssText;\n  }\n\n  /**\n   * @override\n   */\n  public insertRules(node: N, rules: string[]) {\n    for (const rule of rules.reverse()) {\n      try {\n        node.sheet.insertRule(rule, 0);\n      } catch (e) {\n        console.warn(`MathJax: can't insert css rule '${rule}': ${e.message}`);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  public fontSize(node: N) {\n    const style = this.window.getComputedStyle(node);\n    return parseFloat(style.fontSize);\n  }\n\n  /**\n   * @override\n   */\n  public fontFamily(node: N) {\n    const style = this.window.getComputedStyle(node);\n    return style.fontFamily || '';\n  }\n\n  /**\n   * @override\n   */\n  public nodeSize(node: N, em: number = 1, local: boolean = false) {\n    if (local && node.getBBox) {\n      let {width, height} = node.getBBox();\n      return [width / em , height / em] as [number, number];\n    }\n    return [node.offsetWidth / em, node.offsetHeight / em] as [number, number];\n  }\n\n  /**\n   * @override\n   */\n  public nodeBBox(node: N) {\n    const {left, right, top, bottom} = node.getBoundingClientRect() as PageBBox;\n    return {left, right, top, bottom};\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,IAAAA,eAAA,GAAAC,OAAA;AA4JA,IAAAC,WAAA,aAAAC,MAAA;EACAC,SAAA,CAAAF,WAAA,EAAAC,MAAA;EAeE,SAAAD,YAAYG,MAAuB;IAAnC,IAAAC,KAAA,GACEH,MAAA,CAAAI,IAAA,OAAMF,MAAM,CAACG,QAAQ,CAAC;IACtBF,KAAI,CAACD,MAAM,GAAGA,MAAM;IACpBC,KAAI,CAACG,MAAM,GAAG,IAAKJ,MAAM,CAACK,SAAiB,EAAE;;EAC/C;EAKOR,WAAA,CAAAS,SAAA,CAAAC,KAAK,GAAZ,UAAaC,IAAY,EAAEC,MAA4B;IAA5B,IAAAA,MAAA;MAAAA,MAAA,cAA4B;IAAA;IACrD,OAAO,IAAI,CAACL,MAAM,CAACM,eAAe,CAACF,IAAI,EAAEC,MAAM,CAAC;EAClD,CAAC;EAKSZ,WAAA,CAAAS,SAAA,CAAAK,MAAM,GAAhB,UAAiBC,IAAY,EAAEC,EAAW;IACxC,OAAQA,EAAE,GACF,IAAI,CAACV,QAAQ,CAACW,eAAe,CAACD,EAAE,EAAED,IAAI,CAAC,GACvC,IAAI,CAACT,QAAQ,CAACY,aAAa,CAACH,IAAI,CAAC;EAC3C,CAAC;EAKMf,WAAA,CAAAS,SAAA,CAAAE,IAAI,GAAX,UAAYA,IAAY;IACtB,OAAO,IAAI,CAACL,QAAQ,CAACa,cAAc,CAACR,IAAI,CAAC;EAC3C,CAAC;EAKMX,WAAA,CAAAS,SAAA,CAAAW,IAAI,GAAX,UAAYC,GAAM;IAChB,OAAOA,GAAG,CAACD,IAAI,IAAKC,GAAgB;EACtC,CAAC;EAKMrB,WAAA,CAAAS,SAAA,CAAAa,IAAI,GAAX,UAAYD,GAAM;IAChB,OAAOA,GAAG,CAACC,IAAI,IAAKD,GAAgB;EACtC,CAAC;EAKMrB,WAAA,CAAAS,SAAA,CAAAc,IAAI,GAAX,UAAYF,GAAM;IAChB,OAAOA,GAAG,CAACG,eAAe,IAAKH,GAAgB;EACjD,CAAC;EAKMrB,WAAA,CAAAS,SAAA,CAAAgB,OAAO,GAAd,UAAeJ,GAAM;IACnB,OAAQA,GAAG,CAACI,OAAO,GAAG,aAAAC,MAAA,CAAaL,GAAG,CAACI,OAAO,CAACE,IAAI,MAAG,GAAG,EAAE;EAC7D,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAmB,IAAI,GAAX,UAAYC,IAAO,EAAEF,IAAY,EAAEX,EAAiB;IAAjB,IAAAA,EAAA;MAAAA,EAAA,OAAiB;IAAA;IAClD,IAAIc,KAAK,GAAId,EAAE,GAAGa,IAAI,CAACE,sBAAsB,CAACf,EAAE,EAAEW,IAAI,CAAC,GAAGE,IAAI,CAACG,oBAAoB,CAACL,IAAI,CAAE;IAC1F,OAAOM,KAAK,CAACC,IAAI,CAACJ,KAAY,CAAQ;EACxC,CAAC;EAKM9B,WAAA,CAAAS,SAAA,CAAA0B,WAAW,GAAlB,UAAmBL,KAA2B,EAAEM,SAAY;;IAC1D,IAAIC,UAAU,GAAQ,EAAE;;MACxB,KAAmB,IAAAC,OAAA,GAAAC,QAAA,CAAAT,KAAK,GAAAU,SAAA,GAAAF,OAAA,CAAAG,IAAA,KAAAD,SAAA,CAAAE,IAAA,EAAAF,SAAA,GAAAF,OAAA,CAAAG,IAAA,IAAE;QAArB,IAAMZ,IAAI,GAAAW,SAAA,CAAAG,KAAA;QACb,IAAI,OAAOd,IAAK,KAAK,QAAQ,EAAE;UAC7BQ,UAAU,GAAGA,UAAU,CAACX,MAAM,CAACO,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC5B,QAAQ,CAACsC,gBAAgB,CAACf,IAAI,CAAC,CAAC,CAAC;SACjF,MAAM,IAAII,KAAK,CAACY,OAAO,CAAChB,IAAI,CAAC,EAAE;UAC9BQ,UAAU,GAAGA,UAAU,CAACX,MAAM,CAACO,KAAK,CAACC,IAAI,CAACL,IAAI,CAAQ,CAAC;SACxD,MAAM,IAAIA,IAAI,YAAY,IAAI,CAAC1B,MAAM,CAAC2C,QAAQ,IAAIjB,IAAI,YAAY,IAAI,CAAC1B,MAAM,CAAC4C,cAAc,EAAE;UAC7FV,UAAU,GAAGA,UAAU,CAACX,MAAM,CAACO,KAAK,CAACC,IAAI,CAACL,IAAkB,CAAC,CAAC;SAC/D,MAAM;UACLQ,UAAU,CAACW,IAAI,CAACnB,IAAI,CAAC;;;;;;;;;;;;;;IAGzB,OAAOQ,UAAU;EACnB,CAAC;EAKMrC,WAAA,CAAAS,SAAA,CAAAwC,QAAQ,GAAf,UAAgBC,SAAY,EAAErB,IAAW;IACvC,OAAOqB,SAAS,CAACD,QAAQ,CAACpB,IAAI,CAAC;EACjC,CAAC;EAKM7B,WAAA,CAAAS,SAAA,CAAA0C,MAAM,GAAb,UAActB,IAAW;IACvB,OAAOA,IAAI,CAACuB,UAAe;EAC7B,CAAC;EAKMpD,WAAA,CAAAS,SAAA,CAAA4C,MAAM,GAAb,UAAcxB,IAAO,EAAEyB,KAAY;IACjC,OAAOzB,IAAI,CAAC0B,WAAW,CAACD,KAAK,CAAU;EACzC,CAAC;EAKMtD,WAAA,CAAAS,SAAA,CAAA+C,MAAM,GAAb,UAAcC,MAAa,EAAEC,MAAa;IACxC,OAAO,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,CAACC,YAAY,CAACF,MAAM,EAAEC,MAAM,CAAC;EACzD,CAAC;EAKM1D,WAAA,CAAAS,SAAA,CAAAmD,MAAM,GAAb,UAAcN,KAAY;IACxB,OAAO,IAAI,CAACH,MAAM,CAACG,KAAK,CAAC,CAACO,WAAW,CAACP,KAAK,CAAU;EACvD,CAAC;EAKMtD,WAAA,CAAAS,SAAA,CAAAqD,OAAO,GAAd,UAAeC,KAAY,EAAEC,KAAY;IACvC,OAAO,IAAI,CAACb,MAAM,CAACa,KAAK,CAAC,CAACC,YAAY,CAACF,KAAK,EAAEC,KAAK,CAAU;EAC/D,CAAC;EAKMhE,WAAA,CAAAS,SAAA,CAAAyD,KAAK,GAAZ,UAAarC,IAAO;IAClB,OAAOA,IAAI,CAACsC,SAAS,CAAC,IAAI,CAAM;EAClC,CAAC;EAKMnE,WAAA,CAAAS,SAAA,CAAA2D,KAAK,GAAZ,UAAavC,IAAO,EAAEwC,CAAS;IAC7B,OAAOxC,IAAI,CAACyC,SAAS,CAACD,CAAC,CAAC;EAC1B,CAAC;EAKMrE,WAAA,CAAAS,SAAA,CAAAgC,IAAI,GAAX,UAAYZ,IAAW;IACrB,OAAOA,IAAI,CAAC0C,WAAoB;EAClC,CAAC;EAKMvE,WAAA,CAAAS,SAAA,CAAA+D,QAAQ,GAAf,UAAgB3C,IAAW;IACzB,OAAOA,IAAI,CAAC4C,eAAwB;EACtC,CAAC;EAKMzE,WAAA,CAAAS,SAAA,CAAAiE,UAAU,GAAjB,UAAkB7C,IAAO;IACvB,OAAOA,IAAI,CAAC6C,UAAmB;EACjC,CAAC;EAKM1E,WAAA,CAAAS,SAAA,CAAAkE,SAAS,GAAhB,UAAiB9C,IAAO;IACtB,OAAOA,IAAI,CAAC8C,SAAkB;EAChC,CAAC;EAKM3E,WAAA,CAAAS,SAAA,CAAAmE,UAAU,GAAjB,UAAkB/C,IAAO;IACvB,OAAOI,KAAK,CAACC,IAAI,CAACL,IAAI,CAAC+C,UAAuB,CAAC;EACjD,CAAC;EAKM5E,WAAA,CAAAS,SAAA,CAAAoE,SAAS,GAAhB,UAAiBhD,IAAO,EAAEiD,CAAS;IACjC,OAAOjD,IAAI,CAAC+C,UAAU,CAACE,CAAC,CAAU;EACpC,CAAC;EAKM9E,WAAA,CAAAS,SAAA,CAAAM,IAAI,GAAX,UAAYc,IAAW;IACrB,IAAMwC,CAAC,GAAGxC,IAAI,CAACkD,QAAQ;IACvB,OAAQV,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,GAAGxC,IAAI,CAACmD,QAAQ,CAACC,WAAW,EAAE,GAAG,EAAE;EAC1E,CAAC;EAKMjF,WAAA,CAAAS,SAAA,CAAAkC,KAAK,GAAZ,UAAad,IAAW;IACtB,OAAOA,IAAI,CAACqD,SAAS,IAAI,EAAE;EAC7B,CAAC;EAKMlF,WAAA,CAAAS,SAAA,CAAA0E,WAAW,GAAlB,UAAmBtD,IAAO;IACxB,OAAOA,IAAI,CAACsD,WAAW;EACzB,CAAC;EAKMnF,WAAA,CAAAS,SAAA,CAAA2E,SAAS,GAAhB,UAAiBvD,IAAO;IACtB,OAAOA,IAAI,CAACuD,SAAS;EACvB,CAAC;EAKMpF,WAAA,CAAAS,SAAA,CAAA4E,SAAS,GAAhB,UAAiBxD,IAAO;IACtB,OAAOA,IAAI,CAACwD,SAAS;EACvB,CAAC;EAEMrF,WAAA,CAAAS,SAAA,CAAA6E,YAAY,GAAnB,UAAoBzD,IAAO;IACzB,IAAM0D,UAAU,GAAG,IAAI,IAAI,CAACpF,MAAM,CAACqF,aAAa,EAAE;IAClD,OAAOD,UAAU,CAACE,iBAAiB,CAAC5D,IAAI,CAAW;EACrD,CAAC;EAKM7B,WAAA,CAAAS,SAAA,CAAAiF,YAAY,GAAnB,UAAoB7D,IAAO,EAAEF,IAAY,EAAEgB,KAAa,EAAE3B,EAAiB;IAAjB,IAAAA,EAAA;MAAAA,EAAA,OAAiB;IAAA;IACzE,IAAI,CAACA,EAAE,EAAE;MACP,OAAOa,IAAI,CAAC6D,YAAY,CAAC/D,IAAI,EAAEgB,KAAK,CAAC;;IAEvChB,IAAI,GAAGX,EAAE,CAAC8C,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,GAAGnC,IAAI,CAACmC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAC9D,OAAOjC,IAAI,CAAC8D,cAAc,CAAC3E,EAAE,EAAEW,IAAI,EAAEgB,KAAK,CAAC;EAC7C,CAAC;EAKM3C,WAAA,CAAAS,SAAA,CAAAmF,YAAY,GAAnB,UAAoB/D,IAAO,EAAEF,IAAY;IACvC,OAAOE,IAAI,CAAC+D,YAAY,CAACjE,IAAI,CAAC;EAChC,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAoF,eAAe,GAAtB,UAAuBhE,IAAO,EAAEF,IAAY;IAC1C,OAAOE,IAAI,CAACgE,eAAe,CAAClE,IAAI,CAAC;EACnC,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAqF,YAAY,GAAnB,UAAoBjE,IAAO,EAAEF,IAAY;IACvC,OAAOE,IAAI,CAACiE,YAAY,CAACnE,IAAI,CAAC;EAChC,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAsF,aAAa,GAApB,UAAqBlE,IAAO;IAC1B,OAAOI,KAAK,CAACC,IAAI,CAACL,IAAI,CAACmE,UAAU,CAAC,CAACC,GAAG,CACpC,UAACC,CAAgB;MACf,OAAO;QAACvE,IAAI,EAAEuE,CAAC,CAACvE,IAAI;QAAEgB,KAAK,EAAEuD,CAAC,CAACvD;MAAK,CAAkB;IACxD,CAAC,CACF;EACH,CAAC;EAKM3C,WAAA,CAAAS,SAAA,CAAA0F,QAAQ,GAAf,UAAgBtE,IAAO,EAAEF,IAAY;IACnC,IAAIE,IAAI,CAACuE,SAAS,EAAE;MAClBvE,IAAI,CAACuE,SAAS,CAACC,GAAG,CAAC1E,IAAI,CAAC;KACzB,MAAM;MACLE,IAAI,CAACyE,SAAS,GAAG,CAACzE,IAAI,CAACyE,SAAS,GAAG,GAAG,GAAG3E,IAAI,EAAE4E,IAAI,EAAE;;EAEzD,CAAC;EAKMvG,WAAA,CAAAS,SAAA,CAAA+F,WAAW,GAAlB,UAAmB3E,IAAO,EAAEF,IAAY;IACtC,IAAIE,IAAI,CAACuE,SAAS,EAAE;MAClBvE,IAAI,CAACuE,SAAS,CAACxC,MAAM,CAACjC,IAAI,CAAC;KAC5B,MAAM;MACLE,IAAI,CAACyE,SAAS,GAAGzE,IAAI,CAACyE,SAAS,CAAClC,KAAK,CAAC,GAAG,CAAC,CAACqC,MAAM,CAAC,UAACC,CAAC;QAAK,OAAAA,CAAC,KAAK/E,IAAI;MAAV,CAAU,CAAC,CAACgF,IAAI,CAAC,GAAG,CAAC;;EAElF,CAAC;EAKM3G,WAAA,CAAAS,SAAA,CAAAmG,QAAQ,GAAf,UAAgB/E,IAAO,EAAEF,IAAY;IACnC,IAAIE,IAAI,CAACuE,SAAS,EAAE;MAClB,OAAOvE,IAAI,CAACuE,SAAS,CAACnD,QAAQ,CAACtB,IAAI,CAAC;;IAEtC,OAAOE,IAAI,CAACyE,SAAS,CAAClC,KAAK,CAAC,GAAG,CAAC,CAACyC,OAAO,CAAClF,IAAI,CAAC,IAAI,CAAC;EACrD,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAqG,QAAQ,GAAf,UAAgBjF,IAAO,EAAEF,IAAY,EAAEgB,KAAa;IACjDd,IAAI,CAACkF,KAAoB,CAACpF,IAAI,CAAC,GAAGgB,KAAK;EAC1C,CAAC;EAKM3C,WAAA,CAAAS,SAAA,CAAAuG,QAAQ,GAAf,UAAgBnF,IAAO,EAAEF,IAAY;IACnC,OAAQE,IAAI,CAACkF,KAAoB,CAACpF,IAAI,CAAC;EACzC,CAAC;EAKM3B,WAAA,CAAAS,SAAA,CAAAwG,SAAS,GAAhB,UAAiBpF,IAAO;IACtB,OAAOA,IAAI,CAACkF,KAAK,CAACG,OAAO;EAC3B,CAAC;EAKMlH,WAAA,CAAAS,SAAA,CAAA0G,WAAW,GAAlB,UAAmBtF,IAAO,EAAEuF,KAAe;;;MACzC,KAAmB,IAAAC,EAAA,GAAA9E,QAAA,CAAA6E,KAAK,CAACE,OAAO,EAAE,GAAAC,EAAA,GAAAF,EAAA,CAAA5E,IAAA,KAAA8E,EAAA,CAAA7E,IAAA,EAAA6E,EAAA,GAAAF,EAAA,CAAA5E,IAAA,IAAE;QAA/B,IAAM+E,IAAI,GAAAD,EAAA,CAAA5E,KAAA;QACb,IAAI;UACFd,IAAI,CAAC4F,KAAK,CAACC,UAAU,CAACF,IAAI,EAAE,CAAC,CAAC;SAC/B,CAAC,OAAOG,CAAC,EAAE;UACVC,OAAO,CAACC,IAAI,CAAC,mCAAAnG,MAAA,CAAmC8F,IAAI,SAAA9F,MAAA,CAAMiG,CAAC,CAACG,OAAO,CAAE,CAAC;;;;;;;;;;;;;;EAG5E,CAAC;EAKM9H,WAAA,CAAAS,SAAA,CAAAsH,QAAQ,GAAf,UAAgBlG,IAAO;IACrB,IAAMkF,KAAK,GAAG,IAAI,CAAC5G,MAAM,CAAC6H,gBAAgB,CAACnG,IAAI,CAAC;IAChD,OAAOoG,UAAU,CAAClB,KAAK,CAACgB,QAAQ,CAAC;EACnC,CAAC;EAKM/H,WAAA,CAAAS,SAAA,CAAAyH,UAAU,GAAjB,UAAkBrG,IAAO;IACvB,IAAMkF,KAAK,GAAG,IAAI,CAAC5G,MAAM,CAAC6H,gBAAgB,CAACnG,IAAI,CAAC;IAChD,OAAOkF,KAAK,CAACmB,UAAU,IAAI,EAAE;EAC/B,CAAC;EAKMlI,WAAA,CAAAS,SAAA,CAAA0H,QAAQ,GAAf,UAAgBtG,IAAO,EAAEuG,EAAc,EAAEC,KAAsB;IAAtC,IAAAD,EAAA;MAAAA,EAAA,IAAc;IAAA;IAAE,IAAAC,KAAA;MAAAA,KAAA,QAAsB;IAAA;IAC7D,IAAIA,KAAK,IAAIxG,IAAI,CAACyG,OAAO,EAAE;MACrB,IAAAC,EAAA,GAAkB1G,IAAI,CAACyG,OAAO,EAAE;QAA/BE,KAAK,GAAAD,EAAA,CAAAC,KAAA;QAAEC,MAAM,GAAAF,EAAA,CAAAE,MAAkB;MACpC,OAAO,CAACD,KAAK,GAAGJ,EAAE,EAAGK,MAAM,GAAGL,EAAE,CAAqB;;IAEvD,OAAO,CAACvG,IAAI,CAAC6G,WAAW,GAAGN,EAAE,EAAEvG,IAAI,CAAC8G,YAAY,GAAGP,EAAE,CAAqB;EAC5E,CAAC;EAKMpI,WAAA,CAAAS,SAAA,CAAAmI,QAAQ,GAAf,UAAgB/G,IAAO;IACf,IAAA0G,EAAA,GAA6B1G,IAAI,CAACgH,qBAAqB,EAAc;MAApEC,IAAI,GAAAP,EAAA,CAAAO,IAAA;MAAEC,KAAK,GAAAR,EAAA,CAAAQ,KAAA;MAAEC,GAAG,GAAAT,EAAA,CAAAS,GAAA;MAAEC,MAAM,GAAAV,EAAA,CAAAU,MAA4C;IAC3E,OAAO;MAACH,IAAI,EAAAA,IAAA;MAAEC,KAAK,EAAAA,KAAA;MAAEC,GAAG,EAAAA,GAAA;MAAEC,MAAM,EAAAA;IAAA,CAAC;EACnC,CAAC;EACH,OAAAjJ,WAAC;AAAD,CAAC,CA7XDF,eAAA,CAAAoJ,kBAAkB;AADLC,OAAA,CAAAnJ,WAAA,GAAAA,WAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}