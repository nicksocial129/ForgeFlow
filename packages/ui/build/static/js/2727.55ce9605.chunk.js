"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[2727],{39784:(e,t,a)=>{a.d(t,{c:()=>o});var n=a(31060);const o={getAllChatflows:()=>n.c.get("/chatflows"),getSpecificChatflow:e=>n.c.get("/chatflows/".concat(e)),getSpecificChatflowFromPublicEndpoint:e=>n.c.get("/public-chatflows/".concat(e)),createNewChatflow:e=>n.c.post("/chatflows",e),updateChatflow:(e,t)=>n.c.put("/chatflows/".concat(e),t),deleteChatflow:e=>n.c.delete("/chatflows/".concat(e)),getIsChatflowStreaming:e=>n.c.get("/chatflows-streaming/".concat(e))}},31060:(e,t,a)=>{a.d(t,{c:()=>r});var n=a(30938),o=a(80576);const l=n.c.create({baseURL:"".concat(o.OM,"/api/v1"),headers:{"Content-type":"application/json"}});l.interceptors.request.use((function(e){const t=localStorage.getItem("username"),a=localStorage.getItem("password");return t&&a&&(e.auth={username:t,password:a}),e}));const r=l},54136:(e,t,a)=>{a.d(t,{c:()=>o});var n=a(59192);const o=e=>{const[t,a]=(0,n.useState)(null),[o,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1);return{data:t,error:o,loading:r,request:async function(){i(!0);try{const t=await e(...arguments);a(t.data)}catch(t){l(t||"Unexpected Error!")}finally{i(!1)}}}}},78472:(e,t,a)=>{a.d(t,{y:()=>r});var n=a(26e3),o=a(12464),l=a(43152);const r=(0,n.cp)(o.c)((e=>{let{theme:t,color:a="primary"}=e;return{color:"white",backgroundColor:t.palette[a].main,"&:hover":{backgroundColor:t.palette[a].main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"}}}));(0,n.cp)(l.c)((e=>{let{theme:t,color:a="primary"}=e;return{"&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:t.palette[a].main}}}))},37764:(e,t,a)=>{a.d(t,{c:()=>p});var n=a(92572),o=a(59192),l=a(95836),r=a(51515),i=a(78944),s=a(2340),c=a(54528),d=a(78472),u=a(38154),h=a(9e4);const p=e=>{let{show:t,dialogProps:a,onConfirm:p}=e;const g=document.getElementById("portal"),[m,f]=(0,o.useState)(""),[x,b]=(0,o.useState)(""),v=t?(0,h.jsxs)(l.c,{onKeyUp:e=>{"Enter"===e.key&&p(m,x)},open:t,fullWidth:!0,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(r.c,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),(0,h.jsxs)(i.c,{children:[(0,h.jsx)(s.c,{children:"Username"}),(0,h.jsx)(u.E,{inputParam:{label:"Username",name:"username",type:"string",placeholder:"john doe"},onChange:e=>f(e),value:m,showDialog:!1}),(0,h.jsx)("div",{style:{marginTop:20}}),(0,h.jsx)(s.c,{children:"Password"}),(0,h.jsx)(u.E,{inputParam:{label:"Password",name:"password",type:"password"},onChange:e=>b(e),value:x})]}),(0,h.jsx)(c.c,{children:(0,h.jsx)(d.y,{variant:"contained",onClick:()=>p(m,x),children:a.confirmButtonName})})]}):null;return(0,n.createPortal)(v,g)}},55764:(e,t,a)=>{a.d(t,{_:()=>s});var n=a(47463),o=a.n(n),l=a(91352),r=(a(17564),a(90440),a(68584),a(53944),a(2973)),i=a(9e4);const s=e=>{let{value:t,placeholder:a,disabled:n=!1,type:s,style:c,onValueChange:d,onMouseUp:u,onBlur:h}=e;const p=(0,r.c)();return(0,i.jsx)(o(),{disabled:n,value:t,placeholder:a,highlight:e=>(0,l.highlight)(e,"json"===s?l.languages.json:l.languages.js),padding:10,onValueChange:d,onMouseUp:u,onBlur:h,tabSize:4,style:{...c,background:p.palette.codeEditor.main},textareaClassName:"editor__textarea"})}},29224:(e,t,a)=>{a.d(t,{u:()=>s});var n=a(47463),o=a.n(n),l=a(91352),r=(a(17564),a(90440),a(68584),a(53944),a(2973)),i=a(9e4);const s=e=>{let{value:t,placeholder:a,disabled:n=!1,type:s,style:c,onValueChange:d,onMouseUp:u,onBlur:h}=e;const p=(0,r.c)();return(0,i.jsx)(o(),{disabled:n,value:t,placeholder:a,highlight:e=>(0,l.highlight)(e,"json"===s?l.languages.json:l.languages.js),padding:10,onValueChange:d,onMouseUp:u,onBlur:h,tabSize:4,style:{...c,background:p.palette.card.main},textareaClassName:"editor__textarea"})}},38154:(e,t,a)=>{a.d(t,{E:()=>k});var n=a(59192),o=a(61368),l=a(15860),r=a(31824),i=a(92572),s=a(81710),c=a(95836),d=a(78944),u=a(2340),h=a(54528),p=a(12464),g=a(2973),m=a(94604),f=a.n(m),x=a(78472),b=a(55764),v=a(29224),w=a(83860),y=a(9e4);const j=e=>{let{show:t,dialogProps:a,onCancel:o,onConfirm:l}=e;const r=document.getElementById("portal"),m=(0,g.c)(),j=(0,s.OY)(),C=(0,s.w1)((e=>e.customization)),S="json",[k,E]=(0,n.useState)(""),[P,I]=(0,n.useState)(null);(0,n.useEffect)((()=>(a.value&&E(a.value),a.inputParam&&I(a.inputParam),()=>{E(""),I(null)})),[a]),(0,n.useEffect)((()=>(j(t?{type:w.wp}:{type:w.OC}),()=>j({type:w.OC}))),[t,j]);const O=t?(0,y.jsxs)(c.c,{open:t,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,y.jsx)(d.c,{children:(0,y.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:P&&"string"===P.type&&(0,y.jsxs)("div",{style:{flex:70},children:[(0,y.jsx)(u.c,{sx:{mb:2,ml:1},variant:"h4",children:P.label}),(0,y.jsx)(f(),{style:{border:"1px solid",borderColor:m.palette.grey[500],borderRadius:"12px",height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden",backgroundColor:"white"},children:C.isDarkMode?(0,y.jsx)(b._,{disabled:a.disabled,value:k,onValueChange:e=>E(e),placeholder:P.placeholder,type:S,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}}):(0,y.jsx)(v.u,{disabled:a.disabled,value:k,onValueChange:e=>E(e),placeholder:P.placeholder,type:S,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}})})]})})}),(0,y.jsxs)(h.c,{children:[(0,y.jsx)(p.c,{onClick:o,children:a.cancelButtonName}),(0,y.jsx)(x.y,{disabled:a.disabled,variant:"contained",onClick:()=>l(k,P.name),children:a.confirmButtonName})]})]}):null;return(0,i.createPortal)(O,r)};var C=a(36208),S=a(16828);const k=e=>{var t,a;let{inputParam:i,value:s,nodes:c,edges:d,nodeId:u,onChange:h,disabled:p=!1,showDialog:g,dialogProps:m,onDialogCancel:f,onDialogConfirm:x}=e;const[b,v]=(0,n.useState)(null!==s&&void 0!==s?s:""),[w,k]=(0,n.useState)(null),[E,P]=(0,n.useState)([]),I=(0,n.useRef)(null),O=Boolean(w),N=()=>{k(null)};return(0,n.useEffect)((()=>{if(!p&&c&&d&&u&&i){const e=null!==i&&void 0!==i&&i.acceptVariable?(0,S.gJ)(c,d,u,i.id):[];P(e)}}),[p,i,c,d,u]),(0,n.useEffect)((()=>{"string"===typeof b&&b&&b.endsWith("{{")&&k(I.current)}),[b]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.c,{sx:{mt:1,width:"100%"},size:"small",children:(0,y.jsx)(l.c,{id:i.name,size:"small",disabled:p,type:(e=>{switch(e){case"string":default:return"text";case"password":return"password";case"number":return"number"}})(i.type),placeholder:i.placeholder,multiline:!!i.rows,rows:null!==(t=i.rows)&&void 0!==t?t:1,value:b,name:i.name,onChange:e=>{v(e.target.value),h(e.target.value)},inputProps:{step:null!==(a=i.step)&&void 0!==a?a:1,style:{height:i.rows?"90px":"inherit"}}})}),g&&(0,y.jsx)(j,{show:g,dialogProps:m,onCancel:f,onConfirm:(e,t)=>{v(e),x(e,t)}}),(0,y.jsx)("div",{ref:I}),(null===i||void 0===i?void 0:i.acceptVariable)&&(0,y.jsx)(r.cp,{open:O,anchorEl:w,onClose:N,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,y.jsx)(C.c,{disabled:p,availableNodesForVariable:E,onSelectAndReturnVal:e=>{(e=>{const t=b+e.substring(2);h(t),v(t)})(e),N()}})})]})}},36208:(e,t,a)=>{a.d(t,{c:()=>b});var n=a(81710),o=a(20332),l=a(2340),r=a(63556),i=a(54156),s=a(50944),c=a(62168),d=a(46900),u=a(18436),h=a(94604),p=a.n(h),g=a(18548);const m=a.p+"static/media/chathistory.c04a95d8006f2ac86a7d.png";var f=a(80576),x=a(9e4);const b=e=>{let{availableNodesForVariable:t,disabled:a=!1,onSelectAndReturnVal:h}=e;const b=(0,n.w1)((e=>e.customization)),v=(e,t)=>{let a=e?"".concat(e.id,".data.instance"):t;const n="{{".concat(a,"}}");h(n)};return(0,x.jsx)(x.Fragment,{children:!a&&(0,x.jsxs)("div",{style:{flex:30},children:[(0,x.jsx)(o.c,{flexDirection:"row",sx:{mb:1,ml:2,mt:2},children:(0,x.jsx)(l.c,{variant:"h5",children:"Select Variable"})}),(0,x.jsx)(p(),{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:(0,x.jsx)(r.c,{sx:{pl:2,pr:2},children:(0,x.jsxs)(i.c,{children:[(0,x.jsx)(s.c,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(null,"question"),children:(0,x.jsxs)(c.cp,{alignItems:"center",children:[(0,x.jsx)(d.c,{children:(0,x.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,x.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:g})})}),(0,x.jsx)(u.c,{sx:{ml:1},primary:"question",secondary:"User's question from chatbox"})]})}),(0,x.jsx)(s.c,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(null,"chat_history"),children:(0,x.jsxs)(c.cp,{alignItems:"center",children:[(0,x.jsx)(d.c,{children:(0,x.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,x.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"chatHistory",src:m})})}),(0,x.jsx)(u.c,{sx:{ml:1},primary:"chat_history",secondary:"Past conversation history between user and AI"})]})}),t&&t.length>0&&t.map(((e,t)=>{var n;const o=e.data.outputAnchors[0].options.find((t=>t.name===e.data.outputs.output));return(0,x.jsx)(s.c,{sx:{p:0,borderRadius:"".concat(b.borderRadius,"px"),boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>v(e),children:(0,x.jsxs)(c.cp,{alignItems:"center",children:[(0,x.jsx)(d.c,{children:(0,x.jsx)("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:(0,x.jsx)("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:e.data.name,src:"".concat(f.OM,"/api/v1/node-icon/").concat(e.data.name)})})}),(0,x.jsx)(u.c,{sx:{ml:1},primary:e.data.inputs.chainName?e.data.inputs.chainName:e.data.id,secondary:"".concat(null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:"output"," from ").concat(e.data.label)})]})},t)}))]})})})]})})}},36832:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(59192),o=a(9e4);function l(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,i)}s((n=n.apply(e,t||[])).next())}))}const r=e=>{var{style:t,className:r}=e,i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["style","className"]);const s=(0,n.useRef)(null);return(0,n.useEffect)((()=>{l(void 0,void 0,void 0,(function*(){yield a.e(4216).then(a.bind(a,4216))}))}),[]),(0,n.useEffect)((()=>{s.current&&Object.assign(s.current,i)}),[i]),(0,o.jsx)("flowise-fullchatbot",{ref:s,style:t,class:r})};var i=a(26696),s=a(37764),c=a(39784),d=a(54136),u=a(80576);const h=()=>{const e=document.location.pathname.toString().split("/"),t="chatbot"===e[e.length-1]?"":e[e.length-1],a=(0,i.i6)(),[l,h]=(0,n.useState)(null),[p,g]=(0,n.useState)({}),[m,f]=(0,n.useState)(!1),[x,b]=(0,n.useState)({}),[v,w]=(0,n.useState)(!0),[y,j]=(0,n.useState)({}),C=(0,d.c)(c.c.getSpecificChatflowFromPublicEndpoint),S=(0,d.c)(c.c.getSpecificChatflow);return(0,n.useEffect)((()=>{C.request(t)}),[]),(0,n.useEffect)((()=>{var e,a;C.error&&(401===(null===(e=C.error)||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.getItem("username")&&localStorage.getItem("password")?S.request(t):(b({title:"Login",confirmButtonName:"Login"}),f(!0))))}),[C.error]),(0,n.useEffect)((()=>{var e,t;S.error&&(401===(null===(e=S.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(b({title:"Login",confirmButtonName:"Login"}),f(!0)))}),[S.error]),(0,n.useEffect)((()=>{if(C.data||S.data){const t=C.data||S.data;if(h(t),t.chatbotConfig)try{const e=JSON.parse(t.chatbotConfig);g(e),e.overrideConfig&&(e.overrideConfig.generateNewSession&&(e.overrideConfig.sessionId=Date.now().toString()),j(e.overrideConfig))}catch(e){console.error(e),g({}),j({})}}}),[C.data,S.data]),(0,n.useEffect)((()=>{w(C.loading||S.loading)}),[C.loading,S.loading]),(0,o.jsx)(o.Fragment,{children:v?null:(0,o.jsxs)(o.Fragment,{children:[!l||l.apikeyid?(0,o.jsx)("p",{children:"Invalid Chatbot"}):(0,o.jsx)(r,{chatflowid:l.id,apiHost:u.OM,chatflowConfig:y,theme:{chatWindow:p}}),(0,o.jsx)(s.c,{show:m,dialogProps:x,onConfirm:(e,t)=>{localStorage.setItem("username",e),localStorage.setItem("password",t),a(0)}})]})})}},18548:(e,t,a)=>{e.exports=a.p+"static/media/robot.3e38acc0493763eacabe.png"}}]);
//# sourceMappingURL=2727.55ce9605.chunk.js.map