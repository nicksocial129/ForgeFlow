"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[5448],{86360:(e,t,a)=>{a.d(t,{c:()=>n});var o=a(31060);const n={getAllTools:()=>o.c.get("/tools"),getSpecificTool:e=>o.c.get("/tools/".concat(e)),createNewTool:e=>o.c.post("/tools",e),updateTool:(e,t)=>o.c.put("/tools/".concat(e),t),deleteTool:e=>o.c.delete("/tools/".concat(e))}},60708:(e,t,a)=>{a.d(t,{c:()=>l});var o=a(6196),n=a(7128),s=a(32160),i=a(51784),c=a(81710),r=a(9e4);const l=e=>{let{title:t,style:a}=e;const l=(0,c.w1)((e=>e.customization));return(0,r.jsx)(n.c,{title:(0,i.cp)(t),placement:"right",children:(0,r.jsx)(s.c,{sx:{height:15,width:15},children:(0,r.jsx)(o.c,{style:{...a,background:"transparent",color:l.isDarkMode?"white":"inherit",height:15,width:15}})})})}},56708:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var o=a(59192),n=a(26696),s=a(81710),i=a(63556),c=a(20332),r=a(38608),l=a(40584),d=a(65256),p=a(36670),h=a(2973),u=a(79557),m=a(83920),x=a(6870),g=a(80576),f=a(89536),y=a(93500),j=a(31060);const w=()=>j.c.get("/marketplaces/chatflows"),T=()=>j.c.get("/marketplaces/tools");var v=a(54136),b=a(9e4);function C(e){const{children:t,value:a,index:o,...n}=e;return(0,b.jsx)("div",{role:"tabpanel",hidden:a!==o,id:"attachment-tabpanel-".concat(o),"aria-labelledby":"attachment-tab-".concat(o),...n,children:a===o&&(0,b.jsx)(i.c,{sx:{p:1},children:t})})}const E=()=>{const e=(0,n.i6)(),t=(0,h.c)(),a=(0,s.w1)((e=>e.customization)),[j,E]=(0,o.useState)(!0),[k,D]=(0,o.useState)(!0),[S,M]=(0,o.useState)({}),P=["Chatflows","Tools"],[N,A]=(0,o.useState)(0),[I,O]=(0,o.useState)(!1),[L,B]=(0,o.useState)({}),R=(0,v.c)(w),F=(0,v.c)(T),U=e=>{const t={title:e.templateName,type:"TEMPLATE",data:e};B(t),O(!0)},q=t=>{e("/marketplace/".concat(t.id),{state:t})};return(0,o.useEffect)((()=>{R.request(),F.request()}),[]),(0,o.useEffect)((()=>{E(R.loading)}),[R.loading]),(0,o.useEffect)((()=>{D(F.loading)}),[F.loading]),(0,o.useEffect)((()=>{if(R.data)try{const e=R.data,t={};for(let a=0;a<e.length;a+=1){const o=e[a].flowData,n=JSON.parse(o).nodes||[];t[e[a].id]=[];for(let s=0;s<n.length;s+=1){const o="".concat(g.OM,"/api/v1/node-icon/").concat(n[s].data.name);t[e[a].id].includes(o)||t[e[a].id].push(o)}}M(t)}catch(e){console.error(e)}}),[R.data]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.c,{sx:{background:a.isDarkMode?t.palette.common.black:""},children:[(0,b.jsx)(c.c,{flexDirection:"row",children:(0,b.jsx)("h1",{children:"Marketplace"})}),(0,b.jsx)(r.c,{sx:{mb:2},variant:"fullWidth",value:N,onChange:(e,t)=>{A(t)},"aria-label":"tabs",children:P.map(((e,t)=>(0,b.jsx)(l.c,{icon:0===t?(0,b.jsx)(u.Ke2,{}):(0,b.jsx)(u.w98,{}),iconPosition:"start",label:(0,b.jsx)("span",{style:{fontSize:"1.1rem"},children:e})},t)))}),P.map(((e,t)=>(0,b.jsxs)(C,{value:N,index:t,children:["Chatflows"===e&&(0,b.jsx)(d.cp,{container:!0,spacing:g.ox,children:!j&&R.data&&R.data.map(((e,t)=>(0,b.jsxs)(d.cp,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,b.jsx)(p.c,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,b.jsx)(x.c,{onClick:()=>q(e),data:e,images:S[e.id]})}),!e.badge&&(0,b.jsx)(x.c,{onClick:()=>q(e),data:e,images:S[e.id]})]},t)))}),"Tools"===e&&(0,b.jsx)(d.cp,{container:!0,spacing:g.ox,children:!k&&F.data&&F.data.map(((e,t)=>(0,b.jsxs)(d.cp,{item:!0,lg:3,md:4,sm:6,xs:12,children:[e.badge&&(0,b.jsx)(p.c,{sx:{"& .MuiBadge-badge":{right:20}},badgeContent:e.badge,color:"POPULAR"===e.badge?"primary":"error",children:(0,b.jsx)(x.c,{data:e,onClick:()=>U(e)})}),!e.badge&&(0,b.jsx)(x.c,{data:e,onClick:()=>U(e)})]},t)))})]},t))),(!j&&(!R.data||0===R.data.length)||!k&&(!F.data||0===F.data.length))&&(0,b.jsxs)(c.c,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[(0,b.jsx)(i.c,{sx:{p:2,height:"auto"},children:(0,b.jsx)("img",{style:{objectFit:"cover",height:"30vh",width:"auto"},src:f.c,alt:"WorkflowEmptySVG"})}),(0,b.jsx)("div",{children:"No Marketplace Yet"})]})]}),(0,b.jsx)(y.c,{show:I,dialogProps:L,onCancel:()=>O(!1),onConfirm:()=>O(!1),onUseTemplate:e=>(B({title:"Add New Tool",type:"IMPORT",cancelButtonName:"Cancel",confirmButtonName:"Add",data:e}),void O(!0))})]})}},93500:(e,t,a)=>{a.d(t,{c:()=>O});var o=a(92572),n=a(59192),s=a(81710),i=a(83860),c=a(86155),r=a(12464),l=a(95836),d=a(51515),p=a(78944),h=a(63556),u=a(20332),m=a(2340),x=a(15860),g=a(54528),f=a(78472),y=a(35400),j=a(79557),w=a(9e4);const T=e=>{let{columns:t,rows:a,style:o,disabled:n=!1,onRowUpdate:s,addNewRow:i}=e;return(0,w.jsxs)(w.Fragment,{children:[!n&&(0,w.jsx)(r.c,{variant:"outlined",onClick:i,startIcon:(0,w.jsx)(j.SU7,{}),children:"Add Item"}),a&&t&&(0,w.jsx)("div",{style:{marginTop:10,height:300,width:"100%",...o},children:(0,w.jsx)(y.op,{processRowUpdate:e=>(s(e),e),isCellEditable:()=>!n,onProcessRowUpdateError:e=>console.error(e),rows:a,columns:t})})]})};var v=a(60708),b=a(13792),C=a(9440),E=a(31128),k=a(55764),D=a(29224),S=a(2973),M=a(86360),P=a(78256),N=a(54136),A=a(81424),I=a(16828);const O=e=>{let{show:t,dialogProps:a,onUseTemplate:y,onCancel:O,onConfirm:L}=e;const B=document.getElementById("portal"),R=(0,S.c)(),F=(0,s.w1)((e=>e.customization)),U=(0,s.OY)();(0,A.c)();const{confirm:q}=(0,P.c)(),K=function(){return U((0,i.mq)(...arguments))},W=function(){return U((0,i.EF)(...arguments))},z=(0,N.c)(M.c.getSpecificTool),[_,J]=(0,n.useState)(""),[Y,G]=(0,n.useState)(""),[V,H]=(0,n.useState)(""),[$,X]=(0,n.useState)(""),[Q,Z]=(0,n.useState)([]),[ee,te]=(0,n.useState)(""),ae=(0,n.useCallback)((e=>()=>{setTimeout((()=>{Z((t=>t.filter((t=>t.id!==e))))}))}),[]),oe=(0,n.useMemo)((()=>[{field:"property",headerName:"Property",editable:!0,flex:1},{field:"type",headerName:"Type",type:"singleSelect",valueOptions:["string","number","boolean","date"],editable:!0,width:120},{field:"description",headerName:"Description",editable:!0,flex:1},{field:"required",headerName:"Required",type:"boolean",editable:!0,width:80},{field:"actions",type:"actions",width:80,getActions:e=>[(0,w.jsx)(b.i,{icon:(0,w.jsx)(C.c,{}),label:"Delete",onClick:ae(e.id)},"Delete")]}]),[ae]);(0,n.useEffect)((()=>(U(t?{type:i.wp}:{type:i.OC}),()=>U({type:i.OC}))),[t,U]),(0,n.useEffect)((()=>{z.data&&(J(z.data.id),G(z.data.name),H(z.data.description),Z((0,I.gp)(z.data.schema)),z.data.func?te(z.data.func):te(""))}),[z.data]),(0,n.useEffect)((()=>{"EDIT"===a.type&&a.data?(J(a.data.id),G(a.data.name),H(a.data.description),X(a.data.iconSrc),Z((0,I.gp)(a.data.schema)),a.data.func?te(a.data.func):te("")):"EDIT"===a.type&&a.toolId?z.request(a.toolId):"IMPORT"===a.type&&a.data||"TEMPLATE"===a.type&&a.data?(G(a.data.name),H(a.data.description),X(a.data.iconSrc),Z((0,I.gp)(a.data.schema)),a.data.func?te(a.data.func):te("")):"ADD"===a.type&&(J(""),G(""),H(""),X(""),Z([]),te(""))}),[a]);const ne=t?(0,w.jsxs)(l.c,{fullWidth:!0,maxWidth:"md",open:t,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,w.jsx)(d.c,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a.title,(0,w.jsx)("div",{style:{flex:1}}),"EDIT"===a.type&&(0,w.jsx)(r.c,{variant:"outlined",onClick:()=>(async()=>{try{const e=await M.c.getSpecificTool(_);if(e.data){const t=e.data;delete t.id,delete t.createdDate,delete t.updatedDate;let a=JSON.stringify(t,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(a),n="".concat(Y,"-CustomTool.json"),s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("download",n),s.click()}}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);K({message:"Failed to export Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),O()}})(),startIcon:(0,w.jsx)(j.y_w,{}),children:"Export"})]})}),(0,w.jsxs)(p.c,{children:[(0,w.jsxs)(h.c,{sx:{p:2},children:[(0,w.jsx)(u.c,{sx:{position:"relative"},direction:"row",children:(0,w.jsxs)(m.c,{variant:"overline",children:["Tool Name",(0,w.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,w.jsx)(v.c,{style:{marginLeft:10},title:"Tool name must be small capital letter with underscore. Ex: my_tool"})]})}),(0,w.jsx)(x.c,{id:"toolName",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"My New Tool",value:Y,name:"toolName",onChange:e=>G(e.target.value)})]}),(0,w.jsxs)(h.c,{sx:{p:2},children:[(0,w.jsx)(u.c,{sx:{position:"relative"},direction:"row",children:(0,w.jsxs)(m.c,{variant:"overline",children:["Tool description",(0,w.jsx)("span",{style:{color:"red"},children:"\xa0*"}),(0,w.jsx)(v.c,{style:{marginLeft:10},title:"Description of what the tool does. This is for ChatGPT to determine when to use this tool."})]})}),(0,w.jsx)(x.c,{id:"toolDesc",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"Description of what the tool does. This is for ChatGPT to determine when to use this tool.",multiline:!0,rows:3,value:V,name:"toolDesc",onChange:e=>H(e.target.value)})]}),(0,w.jsxs)(h.c,{sx:{p:2},children:[(0,w.jsx)(u.c,{sx:{position:"relative"},direction:"row",children:(0,w.jsx)(m.c,{variant:"overline",children:"Tool Icon Src"})}),(0,w.jsx)(x.c,{id:"toolIcon",type:"string",fullWidth:!0,disabled:"TEMPLATE"===a.type,placeholder:"https://raw.githubusercontent.com/gilbarbara/logos/main/logos/airtable.svg",value:$,name:"toolIcon",onChange:e=>X(e.target.value)})]}),(0,w.jsxs)(h.c,{sx:{p:2},children:[(0,w.jsx)(u.c,{sx:{position:"relative"},direction:"row",children:(0,w.jsxs)(m.c,{variant:"overline",children:["Output Schema",(0,w.jsx)(v.c,{style:{marginLeft:10},title:"What should be the output response in JSON format?"})]})}),(0,w.jsx)(T,{columns:oe,rows:Q,disabled:"TEMPLATE"===a.type,addNewRow:()=>{setTimeout((()=>{Z((e=>{let t=[...(0,c.cloneDeep)(e)];const a=t.length?t[t.length-1].id+1:1;return t.push({id:a,property:"",description:"",type:"",required:!1}),t}))}))},onRowUpdate:e=>{setTimeout((()=>{Z((t=>{let a=[...(0,c.cloneDeep)(t)];const o=a.findIndex((t=>t.id===e.id));return o>=0&&(a[o]={...e}),a}))}))}})]}),(0,w.jsxs)(h.c,{sx:{p:2},children:[(0,w.jsx)(u.c,{sx:{position:"relative"},direction:"row",children:(0,w.jsxs)(m.c,{variant:"overline",children:["Javascript Function",(0,w.jsx)(v.c,{style:{marginLeft:10},title:'Function to execute when tool is being used. You can use properties specified in Output Schema as variables. For example, if the property is <code>userid</code>, you can use as <code>$userid</code>. Return value must be a string. You can also override the code from API by following this <a target="_blank" href="https://docs.flowiseai.com/tools/custom-tool#override-function-from-api">guide</a>'})]})}),"TEMPLATE"!==a.type&&(0,w.jsx)(r.c,{style:{marginBottom:10},variant:"outlined",onClick:()=>te("/*\n* You can use any libraries imported in Flowise\n* You can use properties specified in Output Schema as variables. Ex: Property = userid, Variable = $userid\n* Must return a string value at the end of function\n*/\n\nconst fetch = require('node-fetch');\nconst url = 'https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true';\nconst options = {\n    method: 'GET',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n};\ntry {\n    const response = await fetch(url, options);\n    const text = await response.text();\n    return text;\n} catch (error) {\n    console.error(error);\n    return '';\n}"),children:"See Example"}),F.isDarkMode?(0,w.jsx)(k._,{value:ee,disabled:"TEMPLATE"===a.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",borderRadius:5}}):(0,w.jsx)(D.u,{value:ee,disabled:"TEMPLATE"===a.type,onValueChange:e=>te(e),style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%",border:"1px solid ".concat(R.palette.grey[300]),borderRadius:5}})]})]}),(0,w.jsxs)(g.c,{children:["EDIT"===a.type&&(0,w.jsx)(f.y,{color:"error",variant:"contained",onClick:()=>(async()=>{const e={title:"Delete Tool",description:"Delete tool ".concat(Y,"?"),confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await q(e))try{(await M.c.deleteTool(_)).data&&(K({message:"Tool deleted",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),L())}catch(t){const e=t.response.data||"".concat(t.response.status,": ").concat(t.response.statusText);K({message:"Failed to delete Tool: ".concat(e),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),O()}})(),children:"Delete"}),"TEMPLATE"===a.type&&(0,w.jsx)(f.y,{color:"secondary",variant:"contained",onClick:()=>{y(a.data)},children:"Use Template"}),"TEMPLATE"!==a.type&&(0,w.jsx)(f.y,{disabled:!(Y&&V),variant:"contained",onClick:()=>"ADD"===a.type||"IMPORT"===a.type?(async()=>{try{const e={name:Y,description:V,color:(0,I.EX)(),schema:JSON.stringify(Q),func:ee,iconSrc:$},t=await M.c.createNewTool(e);t.data&&(K({message:"New Tool added",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),L(t.data.id))}catch(e){const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);K({message:"Failed to add new Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),O()}})():(async()=>{try{const e=await M.c.updateTool(_,{name:Y,description:V,schema:JSON.stringify(Q),func:ee,iconSrc:$});e.data&&(K({message:"Tool saved",options:{key:(new Date).getTime()+Math.random(),variant:"success",action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),L(e.data.id))}catch(e){console.error(e);const t=e.response.data||"".concat(e.response.status,": ").concat(e.response.statusText);K({message:"Failed to save Tool: ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"error",persist:!0,action:e=>(0,w.jsx)(r.c,{style:{color:"white"},onClick:()=>W(e),children:(0,w.jsx)(j.KgB,{})})}}),O()}})(),children:a.confirmButtonName})]}),(0,w.jsx)(E.c,{})]}):null;return(0,o.createPortal)(ne,B)}}}]);
//# sourceMappingURL=5448.9db26882.chunk.js.map